<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
.chartjs-container {
    margin: 1.5em auto;
    padding: 1em;
    background: #f8f9fa;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.chart-note {
    text-align: center;
    color: #6c757d;
    font-size: 0.9em;
    margin-top: 0.5em;
}
</style>
<link rel="index" title="Index" href="genindex.html"><link rel="search" title="Search" href="search.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Configuration Architecture ### System Overview The configuration integration system provides a unified approach to managing controller parameters from multiple sources with strict type safety and validation: ``` - DIP_SMC_PSO Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5349f25f" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=8a7e329d" />
    
    


<style>
  body {
    --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">DIP_SMC_PSO Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">DIP_SMC_PSO Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">ğŸ“š Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">Optimal Sliding Mode Control for a Double-Inverted Pendulum via PSO  ## How to validate a ResearchPlan JSON Run the validator locally: ```bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory_overview.html">Theory Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">3. System Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="plant_model.html">1.x Plant Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="hil_quickstart.html">Hardware-in-the-Loop (HIL) Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamlit_dashboard_guide.html">Streamlit Dashboard User Guide</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/theSadeQ/DIP_SMC_PSO/blob/main/docs/configuration_integration_documentation.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/theSadeQ/DIP_SMC_PSO/edit/main/docs/configuration_integration_documentation.md" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <p>#==========================================================================================\<br />
#================ docs/configuration_integration_documentation.md ===================\<br />
#==========================================================================================\ # Configuration Integration Documentation ## Overview This document provides guidance on integrating the configuration system with the Enterprise Controller Factory. The DIP SMC-PSO project features a sophisticated configuration architecture that supports multiple sources, type safety, validation, and integration with controller creation workflows. ## Table of Contents 1. <a class="reference internal" href="#configuration-architecture"><span class="xref myst">Configuration Architecture</span></a>
2. <a class="reference internal" href="#configuration-sources-and-priority"><span class="xref myst">Configuration Sources and Priority</span></a>
3. <a class="reference internal" href="#yaml-configuration-structure"><span class="xref myst">YAML Configuration Structure</span></a>
4. <a class="reference internal" href="#type-safe-configuration-classes"><span class="xref myst">Type-Safe Configuration Classes</span></a>
5. <a class="reference internal" href="#configuration-resolution-patterns"><span class="xref myst">Configuration Resolution Patterns</span></a>
6. <a class="reference internal" href="#validation-and-error-handling"><span class="xref myst">Validation and Error Handling</span></a>
7. <a class="reference internal" href="#advanced-configuration-scenarios"><span class="xref myst">Advanced Configuration Scenarios</span></a>
8. <a class="reference internal" href="#migration-and-deprecation-handling"><span class="xref myst">Migration and Deprecation Handling</span></a>
9. <a class="reference internal" href="#best-practices"><span class="xref myst">Best Practices</span></a>
10. <a class="reference internal" href="#examples-and-use-cases"><span class="xref myst">Examples and Use Cases</span></a></p>
<section id="configuration-architecture-system-overview-the-configuration-integration-system-provides-a-unified-approach-to-managing-controller-parameters-from-multiple-sources-with-strict-type-safety-and-validation">
<h1>Configuration Architecture ### System Overview The configuration integration system provides a unified approach to managing controller parameters from multiple sources with strict type safety and validation: ```<a class="headerlink" href="#configuration-architecture-system-overview-the-configuration-integration-system-provides-a-unified-approach-to-managing-controller-parameters-from-multiple-sources-with-strict-type-safety-and-validation" title="Link to this heading">Â¶</a></h1>
<p>Configuration Integration Architecture
â”œâ”€â”€ Configuration Sources
â”‚ â”œâ”€â”€ YAML Configuration Files (config.yaml)
â”‚ â”œâ”€â”€ Python Configuration Objects (Pydantic models)
â”‚ â”œâ”€â”€ Explicit Parameters (function arguments)
â”‚ â””â”€â”€ Environment Variables (optional)
â”œâ”€â”€ Configuration Processing
â”‚ â”œâ”€â”€ Multi-Source Resolution (priority-based)
â”‚ â”œâ”€â”€ Type Validation (Pydantic integration)
â”‚ â”œâ”€â”€ Parameter Migration (deprecation handling)
â”‚ â””â”€â”€ Fallback Mechanisms (graceful degradation)
â”œâ”€â”€ Factory Integration
â”‚ â”œâ”€â”€ Automatic Parameter Extraction
â”‚ â”œâ”€â”€ Controller-Specific Configuration
â”‚ â”œâ”€â”€ PSO Optimization Integration
â”‚ â””â”€â”€ Dynamic Configuration Updates
â””â”€â”€ Validation and Monitoring â”œâ”€â”€ Real-Time Validation â”œâ”€â”€ Configuration Drift Detection â”œâ”€â”€ Parameter Constraint Checking â””â”€â”€ Performance Impact Monitoring</p>
<div class="highlight-### notranslate"><div class="highlight"><pre><span></span>2. **Priority-Based Resolution**: Clear precedence rules for conflicting parameters
3. **Backward Compatibility**: migration from legacy configurations
4. **Validation-First**: All parameters validated before controller creation
5. **Performance Optimized**: Minimal overhead for configuration processing
6. **Extensibility**: Easy addition of new configuration sources and parameters

## Configuration Sources and Priority ### Priority Resolution Order The factory system resolves configuration parameters using a clear priority hierarchy: 1. **Explicit Function Parameters** (Highest Priority)
2. **Configuration Object Attributes**
3. **YAML Configuration File Values**
4. **Registry Default Values** (Lowest Priority) ```python
def demonstrate_configuration_priority(): &quot;&quot;&quot;Demonstrate configuration priority resolution.&quot;&quot;&quot; from src.config import load_config from src.controllers.factory import create_controller # Load YAML configuration config = load_config(&quot;config.yaml&quot;) # Contains gains: [10, 8, 5, 3, 20, 2] # Priority 1: Explicit parameters override everything controller = create_controller( &#39;classical_smc&#39;, config=config, gains=[25, 20, 15, 10, 40, 6] # These gains will be used (Priority 1) ) print(f&quot;Priority 1 - Explicit gains: {controller.gains}&quot;) # Priority 2: Configuration object when no explicit parameters controller = create_controller( &#39;classical_smc&#39;, config=config # Uses gains from config.yaml (Priority 2) ) print(f&quot;Priority 2 - Config gains: {controller.gains}&quot;) # Priority 3: Registry defaults when no config provided controller = create_controller(&#39;classical_smc&#39;) # Uses registry defaults (Priority 3) print(f&quot;Priority 3 - Default gains: {controller.gains}&quot;) demonstrate_configuration_priority()
``` ### Configuration Source Details #### 1. Explicit Function Parameters

```python
# Highest priority - always used when provided
controller = create_controller( &#39;classical_smc&#39;, gains=[20, 15, 12, 8, 35, 5], # Explicit gains max_force=150.0, # Explicit max_force boundary_layer=0.02 # Explicit boundary_layer
)
``` #### 2. Configuration Object Attributes

```python
# example-metadata:
# runnable: false # Second priority - extracted from configuration objects
class CustomConfig: def __init__(self): self.controllers = { &#39;classical_smc&#39;: { &#39;gains&#39;: [18, 12, 10, 6, 30, 4], &#39;max_force&#39;: 120.0, &#39;boundary_layer&#39;: 0.015 } } config = CustomConfig()
controller = create_controller(&#39;classical_smc&#39;, config=config)
``` #### 3. YAML Configuration Files

```yaml
# config.yaml - Third priority
controllers: classical_smc: gains: [15, 10, 8, 5, 25, 3] max_force: 100.0 boundary_layer: 0.01 dt: 0.001
``` #### 4. Registry Defaults

```python
# example-metadata:
# runnable: false # Fourth priority - built-in defaults
CONTROLLER_REGISTRY = { &#39;classical_smc&#39;: { &#39;default_gains&#39;: [20.0, 15.0, 12.0, 8.0, 35.0, 5.0], # ... other defaults }
}
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="yaml-configuration-structure-complete-configuration-schema-the-project-uses-a-hierarchical-yaml-configuration-structure-yaml">
<h1>YAML Configuration Structure ### Complete Configuration Schema The project uses a hierarchical YAML configuration structure: ```yaml<a class="headerlink" href="#yaml-configuration-structure-complete-configuration-schema-the-project-uses-a-hierarchical-yaml-configuration-structure-yaml" title="Link to this heading">Â¶</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="config-yaml-complete-configuration-example-global-settings">
<h1>config.yaml - Complete configuration example # Global settings<a class="headerlink" href="#config-yaml-complete-configuration-example-global-settings" title="Link to this heading">Â¶</a></h1>
<p>global_seed: 42 # Physics parameters for the double-inverted pendulum
physics: # Pendulum masses [kg] m1: 0.5 # Upper pendulum mass m2: 0.5 # Lower pendulum mass M: 2.0 # Cart mass # Pendulum lengths [m] l1: 0.5 # Upper pendulum length l2: 0.5 # Lower pendulum length # Friction coefficients b1: 0.1 # Upper pendulum friction b2: 0.1 # Lower pendulum friction # Moments of inertia [kgâ‹…mÂ²] I1: 0.1 # Upper pendulum inertia I2: 0.1 # Lower pendulum inertia # Simulation parameters
simulation: duration: 5.0 # Simulation time [s] dt: 0.001 # Integration timestep [s] initial_state: # Initial conditions [Î¸1, Î¸2, x, Î¸Ì‡1, Î¸Ì‡2, áº‹] - 0.1 # Initial angle 1 [rad] - 0.05 # Initial angle 2 [rad] - 0.0 # Initial cart position [m] - 0.0 # Initial angular velocity 1 [rad/s] - 0.0 # Initial angular velocity 2 [rad/s] - 0.0 # Initial cart velocity [m/s] use_full_dynamics: false # Use simplified (false) or full (true) dynamics # Controller configurations
controllers: classical_smc: # Gains: [k1, k2, Î»1, Î»2, K, kd] gains: [20.0, 15.0, 12.0, 8.0, 35.0, 5.0] max_force: 150.0 # Control saturation limit [N] boundary_layer: 0.02 # Chattering reduction parameter dt: 0.001 # Control timestep [s] switch_method: â€œtanhâ€ # Switching function type regularization: 1e-10 # Numerical regularization sta_smc: # Gains: [K1, K2, k1, k2, Î»1, Î»2] gains: [25.0, 15.0, 20.0, 12.0, 8.0, 6.0] max_force: 150.0 dt: 0.001 boundary_layer: 0.01 power_exponent: 0.5 # Super-twisting power parameter regularization: 1e-6 switch_method: â€œtanhâ€ damping_gain: 0.0 adaptive_smc: # Gains: [k1, k2, Î»1, Î»2, Î³] gains: [25.0, 18.0, 15.0, 10.0, 4.0] max_force: 150.0 dt: 0.001 leak_rate: 0.01 # Adaptation leak rate dead_zone: 0.05 # Dead zone for adaptation adapt_rate_limit: 10.0 # Maximum adaptation rate K_min: 0.1 # Minimum adaptive gain K_max: 100.0 # Maximum adaptive gain K_init: 10.0 # Initial adaptive gain alpha: 0.5 # Adaptation smoothing parameter boundary_layer: 0.01 smooth_switch: true hybrid_adaptive_sta_smc: # Gains: [k1, k2, Î»1, Î»2] gains: [18.0, 12.0, 10.0, 8.0] max_force: 150.0 dt: 0.001 hybrid_mode: â€œclassical_adaptiveâ€ # Hybrid operation mode k1_init: 4.0 # Initial adaptive gain 1 k2_init: 0.4 # Initial adaptive gain 2 leak_rate: 0.01 dead_zone: 0.05 classical_config: # Sub-controller configuration gains: [20.0, 15.0, 12.0, 8.0, 35.0, 5.0] max_force: 150.0 boundary_layer: 0.02 dt: 0.001 adaptive_config: # Sub-controller configuration gains: [25.0, 18.0, 15.0, 10.0, 4.0] max_force: 150.0 dt: 0.001 # PSO optimization parameters
pso: n_particles: 30 # Swarm size max_iter: 100 # Maximum iterations w: 0.9 # Inertia weight c1: 2.0 # Cognitive coefficient c2: 2.0 # Social coefficient bounds: # Parameter bounds for optimization classical_smc: lower: [1.0, 1.0, 1.0, 1.0, 5.0, 0.1] upper: [30.0, 30.0, 20.0, 20.0, 50.0, 10.0] adaptive_smc: lower: [2.0, 2.0, 1.0, 1.0, 0.5] upper: [40.0, 40.0, 25.0, 25.0, 10.0] # Cost function configuration
cost_function: weights: ise: 0.4 # Integral squared error weight control_effort: 0.3 # Control effort weight settling_time: 0.2 # Settling time weight overshoot: 0.1 # Overshoot penalty weight normalization: enable: true threshold: 1e-12 # Hardware-in-the-loop configuration
hil: enabled: false plant_server: host: â€œlocalhostâ€ port: 8888 update_rate: 1000 # Hz controller_client: host: â€œlocalhostâ€ port: 8888 timeout: 1.0 # seconds # Logging and monitoring
logging: level: â€œINFOâ€ file: â€œsimulation.logâ€ format: â€œ%(asctime)s - %(name)s - %(levelname)s - %(message)sâ€ monitoring: performance_tracking: true memory_monitoring: true control_saturation_alerts: true
<code class="docutils literal notranslate"><span class="pre">###</span> <span class="pre">Configuration</span> <span class="pre">Validation</span> <span class="pre">The</span> <span class="pre">YAML</span> <span class="pre">configuration</span> <span class="pre">is</span> <span class="pre">validated</span> <span class="pre">using</span> <span class="pre">Pydantic</span> <span class="pre">models:</span></code>python</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="example-metadata">
<h1>example-metadata:<a class="headerlink" href="#example-metadata" title="Link to this heading">Â¶</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="runnable-false-from-pydantic-import-basemodel-field-validator">
<h1>runnable: false from pydantic import BaseModel, Field, validator<a class="headerlink" href="#runnable-false-from-pydantic-import-basemodel-field-validator" title="Link to this heading">Â¶</a></h1>
<p>from typing import List, Dict, Optional, Literal class PhysicsConfig(BaseModel): â€œâ€â€Physics parameters for the double-inverted pendulum.â€â€â€ m1: float = Field(â€¦, gt=0, description=â€Upper pendulum mass [kg]â€) m2: float = Field(â€¦, gt=0, description=â€Lower pendulum mass [kg]â€) M: float = Field(â€¦, gt=0, description=â€Cart mass [kg]â€) l1: float = Field(â€¦, gt=0, description=â€Upper pendulum length [m]â€) l2: float = Field(â€¦, gt=0, description=â€Lower pendulum length [m]â€) b1: float = Field(â€¦, ge=0, description=â€Upper pendulum frictionâ€) b2: float = Field(â€¦, ge=0, description=â€Lower pendulum frictionâ€) I1: float = Field(â€¦, gt=0, description=â€Upper pendulum inertia [kgâ‹…mÂ²]â€) I2: float = Field(â€¦, gt=0, description=â€Lower pendulum inertia [kgâ‹…mÂ²]â€) class SimulationConfig(BaseModel): â€œâ€â€Simulation parameters.â€â€â€ duration: float = Field(â€¦, gt=0, description=â€Simulation time [s]â€) dt: float = Field(â€¦, gt=0, le=0.01, description=â€Integration timestep [s]â€) initial_state: List[float] = Field(â€¦, min_items=6, max_items=6) use_full_dynamics: bool = Field(False, description=â€Use full nonlinear dynamicsâ€) &#64;validator(â€˜initial_stateâ€™) def validate_initial_state(cls, v): â€œâ€â€Validate initial state vector.â€â€â€ if len(v) != 6: raise ValueError(â€œInitial state must have 6 componentsâ€) # Check angle limits (Â±Ï€) if abs(v[0]) &gt; 3.14159 or abs(v[1]) &gt; 3.14159: raise ValueError(â€œInitial angles must be within Â±Ï€ radiansâ€) return v class ClassicalSMCConfig(BaseModel): â€œâ€â€Classical SMC controller configuration.â€â€â€ gains: List[float] = Field(â€¦, min_items=6, max_items=6) max_force: float = Field(â€¦, gt=0) boundary_layer: float = Field(â€¦, gt=0) dt: float = Field(â€¦, gt=0) switch_method: Literal[â€œtanhâ€, â€œlinearâ€, â€œsignâ€] = â€œtanhâ€ regularization: float = Field(1e-10, gt=0) &#64;validator(â€˜gainsâ€™) def validate_gains(cls, v): â€œâ€â€Validate SMC gains for stability.â€â€â€ if not all(g &gt; 0 for g in v): raise ValueError(â€œAll SMC gains must be positiveâ€) k1, k2, lam1, lam2, K, kd = v # Stability constraints if lam1 &lt;= 0 or lam2 &lt;= 0: raise ValueError(â€œSurface coefficients Î»1, Î»2 must be positiveâ€) if K &lt;= 0: raise ValueError(â€œSwitching gain K must be positiveâ€) # Practical constraints if K &gt; 200: raise ValueError(â€œSwitching gain K too large (&gt;200), may cause excessive chatteringâ€) return v class ConfigSchema(BaseModel): â€œâ€â€Complete configuration schema.â€â€â€ global_seed: Optional[int] = Field(None, ge=0) physics: PhysicsConfig simulation: SimulationConfig controllers: Dict[str, Dict] = Field(default_factory=dict) pso: Optional[Dict] = Field(default_factory=dict) cost_function: Optional[Dict] = Field(default_factory=dict) hil: Optional[Dict] = Field(default_factory=dict) logging: Optional[Dict] = Field(default_factory=dict) monitoring: Optional[Dict] = Field(default_factory=dict)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="o">---</span>

<span class="c1">## Type-Safe Configuration Classes ### Controller-Specific Configuration Classes Each controller type has a dedicated configuration class with domain-specific validation: #### Classical SMC Configuration ```python</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Literal</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span> <span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ClassicalSMCConfig</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Type-safe configuration for Classical SMC controller.&quot;&quot;&quot;</span> <span class="c1"># Required parameters gains: List[float] = field() # [k1, k2, Î»1, Î»2, K, kd] max_force: float = field() # Control saturation limit [N] boundary_layer: float = field() # Chattering reduction thickness # Optional parameters with defaults dt: float = field(default=0.01) # Control timestep [s] switch_method: Literal[&quot;tanh&quot;, &quot;linear&quot;, &quot;sign&quot;] = field(default=&quot;tanh&quot;) regularization: float = field(default=1e-10) # Matrix regularization boundary_layer_slope: float = field(default=0.0) # Adaptive boundary layer controllability_threshold: Optional[float] = field(default=None) # Optional dynamics model dynamics_model: Optional[object] = field(default=None, compare=False) def __post_init__(self): &quot;&quot;&quot;Validate configuration after creation.&quot;&quot;&quot; self._validate_gains() self._validate_control_parameters() self._validate_stability_requirements() def _validate_gains(self): &quot;&quot;&quot;Validate gain array for classical SMC.&quot;&quot;&quot; if len(self.gains) != 6: raise ValueError(&quot;Classical SMC requires exactly 6 gains: [k1, k2, Î»1, Î»2, K, kd]&quot;) if not all(isinstance(g, (int, float)) and np.isfinite(g) for g in self.gains): raise ValueError(&quot;All gains must be finite numbers&quot;) if not all(g &gt; 0 for g in self.gains): raise ValueError(&quot;All gains must be positive for stability&quot;) k1, k2, lam1, lam2, K, kd = self.gains # Control theory constraints if lam1 &lt;= 0 or lam2 &lt;= 0: raise ValueError(&quot;Surface coefficients Î»1, Î»2 must be positive (Hurwitz stability)&quot;) if K &lt;= 0: raise ValueError(&quot;Switching gain K must be positive (reaching condition)&quot;) # Practical constraints if K &gt; 200: raise ValueError(&quot;Switching gain K &gt; 200 may cause excessive chattering&quot;) if lam1/k1 &gt; 50 or lam2/k2 &gt; 50: raise ValueError(&quot;Surface coefficient ratios too large (Î»/k &gt; 50)&quot;) def _validate_control_parameters(self): &quot;&quot;&quot;Validate control-specific parameters.&quot;&quot;&quot; if self.max_force &lt;= 0: raise ValueError(&quot;max_force must be positive&quot;) if self.boundary_layer &lt;= 0: raise ValueError(&quot;boundary_layer must be positive&quot;) if self.dt &lt;= 0: raise ValueError(&quot;dt must be positive&quot;) if self.regularization &lt;= 0: raise ValueError(&quot;regularization must be positive&quot;) def _validate_stability_requirements(self): &quot;&quot;&quot;Validate control theory stability requirements.&quot;&quot;&quot; k1, k2, lam1, lam2, K, kd = self.gains # Lyapunov stability condition: surface must be stable # For s = Î»1*e1 + Î»2*e2 + Ä—1 + Ä—2, we need Î»1, Î»2 &gt; 0 # Reaching condition: K must overcome uncertainties # Conservative estimate: K &gt; max(k1, k2) for robustness min_K = max(k1, k2) if K &lt; min_K: print(f&quot;Warning: K={K} &lt; max(k1,k2)={min_K}, may not satisfy reaching condition&quot;) # Chattering bound: K should not be excessively large if K &gt; 10 * min_K: print(f&quot;Warning: K={K} &gt;&gt; max(k1,k2)={min_K}, expect significant chattering&quot;)</span>
<span class="err">```</span> <span class="c1">#### Adaptive SMC Configuration ```python</span>
<span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false @dataclass(frozen=True)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AdaptiveSMCConfig</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Type-safe configuration for Adaptive SMC controller.&quot;&quot;&quot;</span> <span class="c1"># Required parameters gains: List[float] = field() # [k1, k2, Î»1, Î»2, Î³] max_force: float = field() # Control saturation limit dt: float = field() # Control timestep # Adaptive parameters leak_rate: float = field(default=0.01) # Ïƒ-modification leak rate dead_zone: float = field(default=0.05) # Adaptation dead zone adapt_rate_limit: float = field(default=10.0) # Maximum adaptation rate K_min: float = field(default=0.1) # Minimum adaptive gain K_max: float = field(default=100.0) # Maximum adaptive gain K_init: float = field(default=10.0) # Initial adaptive gain alpha: float = field(default=0.5) # Adaptation smoothing boundary_layer: float = field(default=0.01) # Chattering reduction smooth_switch: bool = field(default=True) # Smooth switching # Optional dynamics model dynamics_model: Optional[object] = field(default=None, compare=False) def __post_init__(self): &quot;&quot;&quot;Validate adaptive SMC configuration.&quot;&quot;&quot; self._validate_gains() self._validate_adaptive_parameters() self._validate_adaptation_stability() def _validate_gains(self): &quot;&quot;&quot;Validate gain array for adaptive SMC.&quot;&quot;&quot; if len(self.gains) != 5: raise ValueError(&quot;Adaptive SMC requires exactly 5 gains: [k1, k2, Î»1, Î»2, Î³]&quot;) if not all(g &gt; 0 for g in self.gains): raise ValueError(&quot;All gains must be positive&quot;) k1, k2, lam1, lam2, gamma = self.gains # Adaptation rate constraints if gamma &lt;= 0: raise ValueError(&quot;Adaptation rate Î³ must be positive&quot;) if gamma &gt; 50: raise ValueError(&quot;Adaptation rate Î³ &gt; 50 may cause instability&quot;) # Surface stability if lam1 &lt;= 0 or lam2 &lt;= 0: raise ValueError(&quot;Surface coefficients must be positive&quot;) def _validate_adaptive_parameters(self): &quot;&quot;&quot;Validate adaptation-specific parameters.&quot;&quot;&quot; if not 0 &lt; self.leak_rate &lt; 1: raise ValueError(&quot;leak_rate must be in (0, 1)&quot;) if self.dead_zone &lt;= 0: raise ValueError(&quot;dead_zone must be positive&quot;) if self.adapt_rate_limit &lt;= 0: raise ValueError(&quot;adapt_rate_limit must be positive&quot;) if not 0 &lt; self.K_min &lt; self.K_max: raise ValueError(&quot;Must have 0 &lt; K_min &lt; K_max&quot;) if not self.K_min &lt;= self.K_init &lt;= self.K_max: raise ValueError(&quot;K_init must be in [K_min, K_max]&quot;) def _validate_adaptation_stability(self): &quot;&quot;&quot;Validate adaptation stability requirements.&quot;&quot;&quot; k1, k2, lam1, lam2, gamma = self.gains # Ensure adaptation is not too aggressive relative to surface dynamics surface_time_constant = min(1/lam1, 1/lam2) adaptation_time_constant = 1/gamma if adaptation_time_constant &lt; 0.1 * surface_time_constant: print(f&quot;Warning: Fast adaptation (Ï„_adapt={adaptation_time_constant:.3f}) &quot; f&quot;relative to surface dynamics (Ï„_surface={surface_time_constant:.3f})&quot;)</span>
<span class="err">```</span> <span class="c1">#### Super-Twisting SMC Configuration ```python</span>
<span class="c1"># example-metadata:</span>

<span class="c1"># runnable: false @dataclass(frozen=True)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SuperTwistingSMCConfig</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Type-safe configuration for Super-Twisting SMC controller.&quot;&quot;&quot;</span> <span class="c1"># Required parameters gains: List[float] = field() # [K1, K2, k1, k2, Î»1, Î»2] max_force: float = field() # Control saturation limit dt: float = field() # Control timestep # Super-twisting specific parameters power_exponent: float = field(default=0.5) # Fractional power (0 &lt; Î± &lt; 1) regularization: float = field(default=1e-6) # Singularity avoidance boundary_layer: float = field(default=0.01) # Chattering reduction switch_method: Literal[&quot;tanh&quot;, &quot;linear&quot;, &quot;sign&quot;] = field(default=&quot;tanh&quot;) damping_gain: float = field(default=0.0) # Additional damping # Optional dynamics model dynamics_model: Optional[object] = field(default=None, compare=False) def __post_init__(self): &quot;&quot;&quot;Validate super-twisting configuration.&quot;&quot;&quot; self._validate_gains() self._validate_twisting_parameters() self._validate_convergence_conditions() def _validate_gains(self): &quot;&quot;&quot;Validate gain array for super-twisting SMC.&quot;&quot;&quot; if len(self.gains) != 6: raise ValueError(&quot;Super-twisting SMC requires 6 gains: [K1, K2, k1, k2, Î»1, Î»2]&quot;) if not all(g &gt; 0 for g in self.gains): raise ValueError(&quot;All gains must be positive&quot;) K1, K2, k1, k2, lam1, lam2 = self.gains # Super-twisting stability conditions if K1 &lt;= 0 or K2 &lt;= 0: raise ValueError(&quot;Algorithmic gains K1, K2 must be positive&quot;) # Surface gains if lam1 &lt;= 0 or lam2 &lt;= 0: raise ValueError(&quot;Surface coefficients must be positive&quot;) def _validate_twisting_parameters(self): &quot;&quot;&quot;Validate super-twisting specific parameters.&quot;&quot;&quot; if not 0 &lt; self.power_exponent &lt; 1: raise ValueError(&quot;Power exponent must be in (0, 1) for finite-time convergence&quot;) if self.regularization &lt;= 0: raise ValueError(&quot;Regularization must be positive&quot;) if self.boundary_layer &lt;= 0: raise ValueError(&quot;Boundary layer must be positive&quot;) if self.damping_gain &lt; 0: raise ValueError(&quot;Damping gain must be non-negative&quot;) def _validate_convergence_conditions(self): &quot;&quot;&quot;Validate finite-time convergence conditions.&quot;&quot;&quot; K1, K2, k1, k2, lam1, lam2 = self.gains # Super-twisting convergence requires specific gain relationships # Sufficient condition: K1 &gt; âˆš(2)*uncertainty_bound # and K2 &gt; uncertainty_bound for some uncertainty bound # Check gain ratios for practical convergence if K2 &gt; 2 * K1: print(f&quot;Warning: K2={K2} &gt; 2*K1={2*K1}, may cause oscillations&quot;) if K1 &lt; max(k1, k2): print(f&quot;Warning: K1={K1} &lt; max(k1,k2), may not achieve finite-time convergence&quot;)</span>
</pre></div>
</div>
<hr class="docutils" />
<section id="configuration-resolution-patterns-multi-source-parameter-resolution-the-factory-implements-sophisticated-parameter-resolution-to-handle-multiple-configuration-sources-python">
<h2>Configuration Resolution Patterns ### Multi-Source Parameter Resolution The factory implements sophisticated parameter resolution to handle multiple configuration sources: ```python<a class="headerlink" href="#configuration-resolution-patterns-multi-source-parameter-resolution-the-factory-implements-sophisticated-parameter-resolution-to-handle-multiple-configuration-sources-python" title="Link to this heading">Â¶</a></h2>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>example-metadata:<a class="headerlink" href="#id1" title="Link to this heading">Â¶</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="runnable-false-def-resolve-controller-gains-gains-optional-union-list-float-np-ndarray-config-optional-any-controller-type-str-controller-info-dict-str-any">
<h1>runnable: false def _resolve_controller_gains( gains: Optional[Union[List[float], np.ndarray]], config: Optional[Any], controller_type: str, controller_info: Dict[str, Any]<a class="headerlink" href="#runnable-false-def-resolve-controller-gains-gains-optional-union-list-float-np-ndarray-config-optional-any-controller-type-str-controller-info-dict-str-any" title="Link to this heading">Â¶</a></h1>
<p>) -&gt; List[float]: â€œâ€â€Resolve controller gains from multiple sources with priority.â€â€â€ # Priority 1: Explicit gains parameter if gains is not None: if isinstance(gains, np.ndarray): gains = gains.tolist() return gains # Priority 2: Configuration object extraction if config is not None: extracted_gains = _extract_gains_from_config(config, controller_type) if extracted_gains is not None: return extracted_gains # Priority 3: Registry defaults return controller_info[â€˜default_gainsâ€™] def _extract_gains_from_config(config: Any, controller_type: str) -&gt; Optional[List[float]]: â€œâ€â€Extract gains from configuration object using multiple patterns.â€â€â€ extraction_patterns = [ # Pattern 1: config.controllers.controller_type.gains lambda: getattr(getattr(config.controllers, controller_type, None), â€˜gainsâ€™, None), # Pattern 2: config.controllers[controller_type][â€˜gainsâ€™] lambda: config.controllers[controller_type][â€˜gainsâ€™] if isinstance(config.controllers, dict) else None, # Pattern 3: config.controller_defaults.controller_type.gains lambda: getattr(getattr(config.controller_defaults, controller_type, None), â€˜gainsâ€™, None), # Pattern 4: config.controller_defaults[controller_type][â€˜gainsâ€™] lambda: config.controller_defaults[controller_type][â€˜gainsâ€™] if isinstance(config.controller_defaults, dict) else None, ] for pattern in extraction_patterns: try: gains = pattern() if gains is not None and isinstance(gains, (list, tuple)) and len(gains) &gt; 0: return list(gains) except (AttributeError, KeyError, TypeError): continue return None
<code class="docutils literal notranslate"><span class="pre">###</span> <span class="pre">Configuration</span> <span class="pre">Pattern</span> <span class="pre">Examples</span> <span class="pre">####</span> <span class="pre">Pattern</span> <span class="pre">1:</span> <span class="pre">Pydantic</span> <span class="pre">Model</span> <span class="pre">Configuration</span></code>python</p>
<p>from pydantic import BaseModel
from typing import Dict, Any class ControllerConfig(BaseModel): gains: List[float] max_force: float boundary_layer: float dt: float class ProjectConfig(BaseModel): controllers: Dict[str, ControllerConfig] physics: Dict[str, float] simulation: Dict[str, Any] # Usage
config_data = { â€˜controllersâ€™: { â€˜classical_smcâ€™: { â€˜gainsâ€™: [20, 15, 12, 8, 35, 5], â€˜max_forceâ€™: 150.0, â€˜boundary_layerâ€™: 0.02, â€˜dtâ€™: 0.001 } }, â€˜physicsâ€™: {â€˜m1â€™: 0.5, â€˜m2â€™: 0.5, â€˜Mâ€™: 2.0}, â€˜simulationâ€™: {â€˜durationâ€™: 5.0, â€˜dtâ€™: 0.001}
} config = ProjectConfig(**config_data)
controller = create_controller(â€˜classical_smcâ€™, config=config)
<code class="docutils literal notranslate"><span class="pre">####</span> <span class="pre">Pattern</span> <span class="pre">2:</span> <span class="pre">Nested</span> <span class="pre">Dictionary</span> <span class="pre">Configuration</span></code>python</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="id2">
<h1>example-metadata:<a class="headerlink" href="#id2" title="Link to this heading">Â¶</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="runnable-false-nested-dictionary-configuration">
<h1>runnable: false # Nested dictionary configuration<a class="headerlink" href="#runnable-false-nested-dictionary-configuration" title="Link to this heading">Â¶</a></h1>
<p>config = { â€˜controllersâ€™: { â€˜classical_smcâ€™: { â€˜gainsâ€™: [18, 12, 10, 6, 30, 4], â€˜max_forceâ€™: 120.0, â€˜boundary_layerâ€™: 0.015, â€˜dtâ€™: 0.001 }, â€˜adaptive_smcâ€™: { â€˜gainsâ€™: [22, 16, 12, 8, 3.5], â€˜max_forceâ€™: 140.0, â€˜dtâ€™: 0.001, â€˜leak_rateâ€™: 0.015 } }
} # Use with factory
controller = create_controller(â€˜classical_smcâ€™, config=config)
<code class="docutils literal notranslate"><span class="pre">####</span> <span class="pre">Pattern</span> <span class="pre">3:</span> <span class="pre">Attribute-Based</span> <span class="pre">Configuration</span></code>python</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="id3">
<h1>example-metadata:<a class="headerlink" href="#id3" title="Link to this heading">Â¶</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="runnable-false-class-attributeconfig-configuration-using-attributes-def-init-self-create-controller-configurations-as-attributes-self-classical-smc-type-config-gains-25-20-15-10-40-6-max-force-160-0-boundary-layer-0-025-dt-0-001-self-adaptive-smc-type-config-gains-30-22-18-12-5-0-max-force-160-0-dt-0-001-leak-rate-0-02-initialize-controllers-namespace">
<h1>runnable: false class AttributeConfig: â€œâ€â€Configuration using attributes.â€â€â€ def <strong>init</strong>(self): # Create controller configurations as attributes self.classical_smc = type(â€˜Configâ€™, (), { â€˜gainsâ€™: [25, 20, 15, 10, 40, 6], â€˜max_forceâ€™: 160.0, â€˜boundary_layerâ€™: 0.025, â€˜dtâ€™: 0.001 })() self.adaptive_smc = type(â€˜Configâ€™, (), { â€˜gainsâ€™: [30, 22, 18, 12, 5.0], â€˜max_forceâ€™: 160.0, â€˜dtâ€™: 0.001, â€˜leak_rateâ€™: 0.02 })() # Initialize controllers namespace<a class="headerlink" href="#runnable-false-class-attributeconfig-configuration-using-attributes-def-init-self-create-controller-configurations-as-attributes-self-classical-smc-type-config-gains-25-20-15-10-40-6-max-force-160-0-boundary-layer-0-025-dt-0-001-self-adaptive-smc-type-config-gains-30-22-18-12-5-0-max-force-160-0-dt-0-001-leak-rate-0-02-initialize-controllers-namespace" title="Link to this heading">Â¶</a></h1>
<p>config = type(â€˜Configâ€™, (), {})()
config.controllers = AttributeConfig() controller = create_controller(â€˜classical_smcâ€™, config=config)
<code class="docutils literal notranslate"><span class="pre">###</span> <span class="pre">Dynamic</span> <span class="pre">Configuration</span> <span class="pre">Updates</span></code>python
class DynamicConfigurationManager: â€œâ€â€Manage dynamic configuration updates.â€â€â€ def <strong>init</strong>(self, config_file=â€config.yamlâ€): self.config_file = config_file self.config = self._load_config() self.controller_cache = {} self.observers = [] def _load_config(self): â€œâ€â€Load configuration from file.â€â€â€ from src.config import load_config return load_config(self.config_file) def update_controller_config(self, controller_type: str, **updates): â€œâ€â€Update controller configuration dynamically.â€â€â€ # Update configuration if controller_type not in self.config.controllers: self.config.controllers[controller_type] = {} for key, value in updates.items(): self.config.controllers[controller_type][key] = value # Invalidate cached controllers if controller_type in self.controller_cache: del self.controller_cache[controller_type] # Notify observers self._notify_observers(controller_type, updates) def get_controller(self, controller_type: str): â€œâ€â€Get controller with current configuration.â€â€â€ if controller_type not in self.controller_cache: # Create controller with current config controller = create_controller(controller_type, config=self.config) self.controller_cache[controller_type] = controller return self.controller_cache[controller_type] def register_observer(self, callback): â€œâ€â€Register configuration change observer.â€â€â€ self.observers.append(callback) def _notify_observers(self, controller_type: str, updates: Dict[str, Any]): â€œâ€â€Notify observers of configuration changes.â€â€â€ for observer in self.observers: try: observer(controller_type, updates) except Exception as e: print(fâ€Observer notification failed: {e}â€) def save_config(self): â€œâ€â€Save current configuration to file.â€â€â€ import yaml # Convert config to dictionary config_dict = self.config.model_dump() if hasattr(self.config, â€˜model_dumpâ€™) else vars(self.config) with open(self.config_file, â€˜wâ€™) as f: yaml.dump(config_dict, f, default_flow_style=False) # Usage
config_manager = DynamicConfigurationManager() # Update configuration
config_manager.update_controller_config( â€˜classical_smcâ€™, gains=[22, 16, 14, 9, 38, 5.5], max_force=160.0
) # Get updated controller
controller = config_manager.get_controller(â€˜classical_smcâ€™) # Register change observer
def config_change_handler(controller_type, updates): print(fâ€Configuration updated for {controller_type}: {updates}â€) config_manager.register_observer(config_change_handler)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="o">---</span>

<span class="c1">## Validation and Error Handling ### Configuration Validation ```python</span>

<span class="c1"># example-metadata:</span>

<span class="c1"># runnable: false class ConfigurationValidator: &quot;&quot;&quot;configuration validation system.&quot;&quot;&quot; def __init__(self): self.validation_rules = self._initialize_validation_rules() self.validation_errors = [] self.validation_warnings = [] def _initialize_validation_rules(self): &quot;&quot;&quot;Initialize controller-specific validation rules.&quot;&quot;&quot; return { &#39;classical_smc&#39;: self._validate_classical_smc, &#39;adaptive_smc&#39;: self._validate_adaptive_smc, &#39;sta_smc&#39;: self._validate_sta_smc, &#39;hybrid_adaptive_sta_smc&#39;: self._validate_hybrid_smc, &#39;mpc_controller&#39;: self._validate_mpc } def validate_configuration(self, controller_type: str, config: Dict[str, Any]) -&gt; bool: &quot;&quot;&quot;Validate configuration for specific controller type.&quot;&quot;&quot; self.validation_errors.clear() self.validation_warnings.clear() try: # Basic validation self._validate_basic_structure(config) # Controller-specific validation if controller_type in self.validation_rules: self.validation_rules[controller_type](config) else: self.validation_warnings.append(f&quot;No specific validation rules for {controller_type}&quot;) # Cross-parameter validation self._validate_cross_parameters(config) return len(self.validation_errors) == 0 except Exception as e: self.validation_errors.append(f&quot;Validation failed: {e}&quot;) return False def _validate_basic_structure(self, config: Dict[str, Any]): &quot;&quot;&quot;Validate basic configuration structure.&quot;&quot;&quot; required_fields = [&#39;gains&#39;, &#39;max_force&#39;, &#39;dt&#39;] for field in required_fields: if field not in config: self.validation_errors.append(f&quot;Missing required field: {field}&quot;) def _validate_classical_smc(self, config: Dict[str, Any]): &quot;&quot;&quot;Validate Classical SMC configuration.&quot;&quot;&quot; gains = config.get(&#39;gains&#39;, []) # Gain count validation if len(gains) != 6: self.validation_errors.append(&quot;Classical SMC requires 6 gains&quot;) return k1, k2, lam1, lam2, K, kd = gains # Positivity constraints if not all(g &gt; 0 for g in gains): self.validation_errors.append(&quot;All gains must be positive&quot;) # Stability constraints if lam1 &lt;= 0 or lam2 &lt;= 0: self.validation_errors.append(&quot;Surface coefficients Î»1, Î»2 must be positive&quot;) # Practical constraints if K &gt; 200: self.validation_warnings.append(&quot;High switching gain K may cause chattering&quot;) if lam1/k1 &gt; 50 or lam2/k2 &gt; 50: self.validation_warnings.append(&quot;High surface coefficient ratios&quot;) # Boundary layer validation boundary_layer = config.get(&#39;boundary_layer&#39;, 0) if boundary_layer &lt;= 0: self.validation_errors.append(&quot;Boundary layer must be positive&quot;) if boundary_layer &gt; 0.1: self.validation_warnings.append(&quot;Large boundary layer may reduce tracking accuracy&quot;) def _validate_adaptive_smc(self, config: Dict[str, Any]): &quot;&quot;&quot;Validate Adaptive SMC configuration.&quot;&quot;&quot; gains = config.get(&#39;gains&#39;, []) # Gain count validation if len(gains) != 5: self.validation_errors.append(&quot;Adaptive SMC requires 5 gains&quot;) return k1, k2, lam1, lam2, gamma = gains # Adaptation rate validation if gamma &lt;= 0: self.validation_errors.append(&quot;Adaptation rate Î³ must be positive&quot;) if gamma &gt; 50: self.validation_warnings.append(&quot;High adaptation rate may cause instability&quot;) # Leak rate validation leak_rate = config.get(&#39;leak_rate&#39;, 0.01) if not 0 &lt; leak_rate &lt; 1: self.validation_errors.append(&quot;Leak rate must be in (0, 1)&quot;) # Dead zone validation dead_zone = config.get(&#39;dead_zone&#39;, 0.05) if dead_zone &lt;= 0: self.validation_errors.append(&quot;Dead zone must be positive&quot;) # Adaptive gain bounds K_min = config.get(&#39;K_min&#39;, 0.1) K_max = config.get(&#39;K_max&#39;, 100.0) K_init = config.get(&#39;K_init&#39;, 10.0) if not 0 &lt; K_min &lt; K_max: self.validation_errors.append(&quot;Must have 0 &lt; K_min &lt; K_max&quot;) if not K_min &lt;= K_init &lt;= K_max: self.validation_errors.append(&quot;K_init must be in [K_min, K_max]&quot;) def _validate_sta_smc(self, config: Dict[str, Any]): &quot;&quot;&quot;Validate Super-Twisting SMC configuration.&quot;&quot;&quot; gains = config.get(&#39;gains&#39;, []) if len(gains) != 6: self.validation_errors.append(&quot;Super-twisting SMC requires 6 gains&quot;) return K1, K2, k1, k2, lam1, lam2 = gains # Algorithmic gains if K1 &lt;= 0 or K2 &lt;= 0: self.validation_errors.append(&quot;Algorithmic gains K1, K2 must be positive&quot;) # Convergence conditions if K2 &gt; 2 * K1: self.validation_warnings.append(&quot;K2 &gt; 2*K1 may cause oscillations&quot;) if K1 &lt; max(k1, k2): self.validation_warnings.append(&quot;K1 &lt; max(k1,k2) may not achieve finite-time convergence&quot;) # Power exponent power_exponent = config.get(&#39;power_exponent&#39;, 0.5) if not 0 &lt; power_exponent &lt; 1: self.validation_errors.append(&quot;Power exponent must be in (0, 1)&quot;) def _validate_hybrid_smc(self, config: Dict[str, Any]): &quot;&quot;&quot;Validate Hybrid SMC configuration.&quot;&quot;&quot; gains = config.get(&#39;gains&#39;, []) if len(gains) != 4: self.validation_errors.append(&quot;Hybrid SMC requires 4 gains&quot;) # Check sub-configurations classical_config = config.get(&#39;classical_config&#39;) adaptive_config = config.get(&#39;adaptive_config&#39;) if classical_config is None: self.validation_errors.append(&quot;Missing classical_config for hybrid controller&quot;) else: self._validate_classical_smc(classical_config) if adaptive_config is None: self.validation_errors.append(&quot;Missing adaptive_config for hybrid controller&quot;) else: self._validate_adaptive_smc(adaptive_config) # Hybrid mode validation hybrid_mode = config.get(&#39;hybrid_mode&#39;, &#39;classical_adaptive&#39;) valid_modes = [&#39;classical_adaptive&#39;, &#39;sta_adaptive&#39;, &#39;dynamic_switching&#39;] if hybrid_mode not in valid_modes: self.validation_errors.append(f&quot;Invalid hybrid_mode: {hybrid_mode}&quot;) def _validate_mpc(self, config: Dict[str, Any]): &quot;&quot;&quot;Validate MPC configuration.&quot;&quot;&quot; # Horizon validation horizon = config.get(&#39;horizon&#39;, 10) if not isinstance(horizon, int) or horizon &lt; 1: self.validation_errors.append(&quot;Horizon must be positive integer&quot;) if horizon &gt; 50: self.validation_warnings.append(&quot;Large horizon may cause computational issues&quot;) # Weight validation weights = [&#39;q_x&#39;, &#39;q_theta&#39;, &#39;r_u&#39;] for weight in weights: value = config.get(weight, 1.0) if not isinstance(value, (int, float)) or value &lt; 0: self.validation_errors.append(f&quot;{weight} must be non-negative number&quot;) def _validate_cross_parameters(self, config: Dict[str, Any]): &quot;&quot;&quot;Validate relationships between parameters.&quot;&quot;&quot; max_force = config.get(&#39;max_force&#39;, 150.0) dt = config.get(&#39;dt&#39;, 0.001) # Timestep validation if dt &gt; 0.01: self.validation_warnings.append(&quot;Large timestep (&gt;0.01s) may cause numerical issues&quot;) if dt &lt; 1e-5: self.validation_warnings.append(&quot;Very small timestep may be computationally expensive&quot;) # Force limits if max_force &gt; 500: self.validation_warnings.append(&quot;Very high force limit may be unrealistic&quot;) if max_force &lt; 10: self.validation_warnings.append(&quot;Low force limit may prevent effective control&quot;) def get_validation_report(self) -&gt; Dict[str, Any]: &quot;&quot;&quot;Get validation report.&quot;&quot;&quot; return { &#39;valid&#39;: len(self.validation_errors) == 0, &#39;errors&#39;: self.validation_errors.copy(), &#39;warnings&#39;: self.validation_warnings.copy(), &#39;error_count&#39;: len(self.validation_errors), &#39;warning_count&#39;: len(self.validation_warnings) } # Usage</span>

<span class="n">validator</span> <span class="o">=</span> <span class="n">ConfigurationValidator</span><span class="p">()</span> <span class="c1"># Validate configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;gains&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="s1">&#39;max_force&#39;</span><span class="p">:</span> <span class="mf">150.0</span><span class="p">,</span> <span class="s1">&#39;boundary_layer&#39;</span><span class="p">:</span> <span class="mf">0.02</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">:</span> <span class="mf">0.001</span>
<span class="p">}</span> <span class="n">is_valid</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">validate_configuration</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="n">get_validation_report</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Configuration validation failed:&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">report</span><span class="p">[</span><span class="s1">&#39;errors&#39;</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; âŒ </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">report</span><span class="p">[</span><span class="s1">&#39;warnings&#39;</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Configuration warnings:&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">warning</span> <span class="ow">in</span> <span class="n">report</span><span class="p">[</span><span class="s1">&#39;warnings&#39;</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; âš ï¸ </span><span class="si">{</span><span class="n">warning</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
<section id="advanced-configuration-scenarios-environment-based-configuration-python">
<h2>Advanced Configuration Scenarios ### Environment-Based Configuration ```python<a class="headerlink" href="#advanced-configuration-scenarios-environment-based-configuration-python" title="Link to this heading">Â¶</a></h2>
<p>import os
from typing import Dict, Any, Optional class EnvironmentConfigurationManager: â€œâ€â€Manage environment-based configuration overrides.â€â€â€ def <strong>init</strong>(self, base_config_file: str = â€œconfig.yamlâ€): self.base_config = self._load_base_config(base_config_file) self.environment = os.getenv(â€˜DIP_ENVâ€™, â€˜developmentâ€™) self.env_overrides = self._load_environment_overrides() def _load_base_config(self, config_file: str): â€œâ€â€Load base configuration.â€â€â€ from src.config import load_config return load_config(config_file) def _load_environment_overrides(self) -&gt; Dict[str, Any]: â€œâ€â€Load environment-specific overrides.â€â€â€ env_configs = { â€˜developmentâ€™: { â€˜simulationâ€™: {â€˜durationâ€™: 2.0}, # Shorter for testing â€˜loggingâ€™: {â€˜levelâ€™: â€˜DEBUGâ€™}, â€˜psoâ€™: {â€˜n_particlesâ€™: 10, â€˜max_iterâ€™: 20} # Faster optimization }, â€˜testingâ€™: { â€˜simulationâ€™: {â€˜durationâ€™: 1.0, â€˜dtâ€™: 0.01}, # Fast testing â€˜loggingâ€™: {â€˜levelâ€™: â€˜WARNINGâ€™}, â€˜controllersâ€™: { â€˜classical_smcâ€™: {â€˜gainsâ€™: [10, 8, 6, 4, 20, 2]} # Conservative gains } }, â€˜productionâ€™: { â€˜loggingâ€™: {â€˜levelâ€™: â€˜INFOâ€™}, â€˜monitoringâ€™: {â€˜performance_trackingâ€™: True}, â€˜psoâ€™: {â€˜n_particlesâ€™: 50, â€˜max_iterâ€™: 200} # Thorough optimization }, â€˜hilâ€™: { â€˜hilâ€™: {â€˜enabledâ€™: True}, â€˜simulationâ€™: {â€˜dtâ€™: 0.001}, # High precision for HIL â€˜controllersâ€™: { â€˜classical_smcâ€™: {â€˜dtâ€™: 0.001} # Match simulation timestep } } } return env_configs.get(self.environment, {}) def get_merged_config(self) -&gt; Any: â€œâ€â€Get configuration with environment overrides applied.â€â€â€ merged_config = self._deep_merge( self._config_to_dict(self.base_config), self.env_overrides ) # Apply environment variable overrides env_var_overrides = self._extract_env_var_overrides() if env_var_overrides: merged_config = self.<em>deep_merge(merged_config, env_var_overrides) # Convert back to config object return self.<em>dict_to_config(merged_config) def <em>extract_env_var_overrides(self) -&gt; Dict[str, Any]: â€œâ€â€Extract configuration overrides from environment variables.â€â€â€ overrides = {} # Environment variable patterns: # DIP_CONTROLLER_CLASSICAL_GAINS=20,15,12,8,35,5 # DIP_SIMULATION_DURATION=5.0 # DIP_PSO_N_PARTICLES=30 for key, value in os.environ.items(): if key.startswith(â€˜DIP</em>â€™): # Parse nested key: DIP_CONTROLLER_CLASSICAL_GAINS -&gt; controllers.classical_smc.gains parts = key[4:].lower().split(â€™</em>â€™) # Remove â€˜DIP</em>â€™ prefix if len(parts) &gt;= 2: config_dict = overrides # Navigate/create nested structure for part in parts[:-1]: if part not in config_dict: config_dict[part] = {} config_dict = config_dict[part] # Set value with type conversion final_key = parts[-1] config_dict[final_key] = self._convert_env_value(value) return overrides def _convert_env_value(self, value: str) -&gt; Any: â€œâ€â€Convert environment variable string to appropriate type.â€â€â€ # Boolean conversion if value.lower() in (â€˜trueâ€™, â€˜falseâ€™): return value.lower() == â€˜trueâ€™ # List conversion (comma-separated) if â€˜,â€™ in value: try: return [float(x.strip()) for x in value.split(â€˜,â€™)] except ValueError: return [x.strip() for x in value.split(â€˜,â€™)] # Numeric conversion try: if â€˜.â€™ in value: return float(value) else: return int(value) except ValueError: pass # String value return value def _deep_merge(self, base: Dict[str, Any], override: Dict[str, Any]) -&gt; Dict[str, Any]: â€œâ€â€Deep merge two dictionaries.â€â€â€ result = base.copy() for key, value in override.items(): if key in result and isinstance(result[key], dict) and isinstance(value, dict): result[key] = self._deep_merge(result[key], value) else: result[key] = value return result def _config_to_dict(self, config: Any) -&gt; Dict[str, Any]: â€œâ€â€Convert configuration object to dictionary.â€â€â€ if hasattr(config, â€˜model_dumpâ€™): return config.model_dump() elif hasattr(config, â€˜<strong>dict</strong>â€™): return vars(config) else: return config def _dict_to_config(self, config_dict: Dict[str, Any]) -&gt; Any: â€œâ€â€Convert dictionary back to configuration object.â€â€â€ # Create a simple namespace object class ConfigNamespace: def <strong>init</strong>(self, **kwargs): for key, value in kwargs.items(): if isinstance(value, dict): setattr(self, key, ConfigNamespace(**value)) else: setattr(self, key, value) return ConfigNamespace(**config_dict) # Usage
env_manager = EnvironmentConfigurationManager() # Set environment
os.environ[â€˜DIP_ENVâ€™] = â€˜productionâ€™
os.environ[â€˜DIP_PSO_N_PARTICLESâ€™] = â€˜40â€™
os.environ[â€˜DIP_CONTROLLER_CLASSICAL_GAINSâ€™] = â€˜22,16,14,9,38,5.5â€™ # Get merged configuration
config = env_manager.get_merged_config() # Use with factory
controller = create_controller(â€˜classical_smcâ€™, config=config)
<code class="docutils literal notranslate"><span class="pre">###</span> <span class="pre">Configuration</span> <span class="pre">Templating</span> <span class="pre">System</span></code>python</p>
<p>from jinja2 import Template
import yaml
from typing import Dict, Any class ConfigurationTemplateManager: â€œâ€â€Manage configuration templates with parameter substitution.â€â€â€ def <strong>init</strong>(self): self.templates = self._load_templates() self.parameter_sets = self._load_parameter_sets() def _load_templates(self) -&gt; Dict[str, Template]: â€œâ€â€Load configuration templates.â€â€â€ templates = {} # Base controller template templates[â€˜controller_templateâ€™] = Template(â€œâ€â€
controllers: {{ controller_type }}: gains: {{ gains }} max_force: {{ max_force | default(150.0) }} dt: {{ dt | default(0.001) }} {% if controller_type == â€˜classical_smcâ€™ %} boundary_layer: {{ boundary_layer | default(0.02) }} switch_method: â€œ{{ switch_method | default(â€˜tanhâ€™) }}â€ {% elif controller_type == â€˜adaptive_smcâ€™ %} leak_rate: {{ leak_rate | default(0.01) }} dead_zone: {{ dead_zone | default(0.05) }} K_min: {{ K_min | default(0.1) }} K_max: {{ K_max | default(100.0) }} {% elif controller_type == â€˜sta_smcâ€™ %} power_exponent: {{ power_exponent | default(0.5) }} regularization: {{ regularization | default(1e-6) }} {% endif %} â€œâ€â€) # PSO template templates[â€˜pso_templateâ€™] = Template(â€œâ€â€
pso: n_particles: {{ n_particles | default(30) }} max_iter: {{ max_iter | default(100) }} w: {{ inertia_weight | default(0.9) }} c1: {{ cognitive_coeff | default(2.0) }} c2: {{ social_coeff | default(2.0) }} bounds: {{ controller_type }}: lower: {{ lower_bounds }} upper: {{ upper_bounds }} â€œâ€â€) # Complete system template templates[â€˜system_templateâ€™] = Template(â€œâ€â€</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="generated-configuration-for-system-name">
<h1>Generated configuration for {{ system_name }}<a class="headerlink" href="#generated-configuration-for-system-name" title="Link to this heading">Â¶</a></h1>
<p>global_seed: {{ seed | default(42) }} physics: m1: {{ physics.m1 | default(0.5) }} m2: {{ physics.m2 | default(0.5) }} M: {{ physics.M | default(2.0) }} l1: {{ physics.l1 | default(0.5) }} l2: {{ physics.l2 | default(0.5) }} b1: {{ physics.b1 | default(0.1) }} b2: {{ physics.b2 | default(0.1) }} I1: {{ physics.I1 | default(0.1) }} I2: {{ physics.I2 | default(0.1) }} simulation: duration: {{ simulation.duration | default(5.0) }} dt: {{ simulation.dt | default(0.001) }} initial_state: {{ simulation.initial_state | default([0.1, 0.05, 0.0, 0.0, 0.0, 0.0]) }} use_full_dynamics: {{ simulation.use_full_dynamics | default(false) }} {{ controller_config }} {{ pso_config }} cost_function: weights: ise: {{ cost_weights.ise | default(0.4) }} control_effort: {{ cost_weights.control_effort | default(0.3) }} settling_time: {{ cost_weights.settling_time | default(0.2) }} overshoot: {{ cost_weights.overshoot | default(0.1) }} â€œâ€â€) return templates def _load_parameter_sets(self) -&gt; Dict[str, Dict[str, Any]]: â€œâ€â€Load predefined parameter sets.â€â€â€ return { â€˜conservativeâ€™: { â€˜gainsâ€™: { â€˜classical_smcâ€™: [15, 10, 8, 5, 25, 3], â€˜adaptive_smcâ€™: [18, 12, 10, 6, 2.5], â€˜sta_smcâ€™: [20, 12, 15, 8, 6, 4] }, â€˜max_forceâ€™: 100.0, â€˜boundary_layerâ€™: 0.03, â€˜psoâ€™: {â€˜n_particlesâ€™: 20, â€˜max_iterâ€™: 50} }, â€˜aggressiveâ€™: { â€˜gainsâ€™: { â€˜classical_smcâ€™: [30, 25, 20, 15, 60, 8], â€˜adaptive_smcâ€™: [35, 28, 22, 18, 8.0], â€˜sta_smcâ€™: [40, 25, 30, 20, 15, 10] }, â€˜max_forceâ€™: 200.0, â€˜boundary_layerâ€™: 0.01, â€˜psoâ€™: {â€˜n_particlesâ€™: 50, â€˜max_iterâ€™: 150} }, â€˜researchâ€™: { â€˜gainsâ€™: { â€˜classical_smcâ€™: [20, 15, 12, 8, 35, 5], â€˜adaptive_smcâ€™: [25, 18, 15, 10, 4], â€˜sta_smcâ€™: [25, 15, 20, 12, 8, 6] }, â€˜max_forceâ€™: 150.0, â€˜boundary_layerâ€™: 0.02, â€˜psoâ€™: {â€˜n_particlesâ€™: 40, â€˜max_iterâ€™: 100} } } def generate_configuration(self, controller_type: str, parameter_set: str = â€˜researchâ€™, custom_params: Optional[Dict[str, Any]] = None, output_file: Optional[str] = None) -&gt; str: â€œâ€â€Generate configuration from template.â€â€â€ # Get base parameters base_params = self.parameter_sets.get(parameter_set, self.parameter_sets[â€˜researchâ€™]) # Merge with custom parameters if custom_params: params = self._deep_merge(base_params, custom_params) else: params = base_params # Get controller-specific gains controller_gains = params[â€˜gainsâ€™].get(controller_type, [20, 15, 12, 8, 35, 5]) # Generate controller configuration controller_template_params = { â€˜controller_typeâ€™: controller_type, â€˜gainsâ€™: controller_gains, â€˜max_forceâ€™: params.get(â€˜max_forceâ€™, 150.0), â€˜boundary_layerâ€™: params.get(â€˜boundary_layerâ€™, 0.02) } controller_config = self.templates[â€˜controller_templateâ€™].render(**controller_template_params) # Generate PSO configuration from src.controllers.factory import get_gain_bounds_for_pso, SMCType try: smc_type = getattr(SMCType, controller_type.upper().replace(â€˜_SMCâ€™, â€˜â€™)) lower_bounds, upper_bounds = get_gain_bounds_for_pso(smc_type) except: lower_bounds = [1.0] * len(controller_gains) upper_bounds = [50.0] * len(controller_gains) pso_template_params = { â€˜controller_typeâ€™: controller_type, â€˜n_particlesâ€™: params.get(â€˜psoâ€™, {}).get(â€˜n_particlesâ€™, 30), â€˜max_iterâ€™: params.get(â€˜psoâ€™, {}).get(â€˜max_iterâ€™, 100), â€˜lower_boundsâ€™: lower_bounds, â€˜upper_boundsâ€™: upper_bounds } pso_config = self.templates[â€˜pso_templateâ€™].render(**pso_template_params) # Generate complete system configuration system_template_params = { â€˜system_nameâ€™: fâ€{controller_type.upper()} Control Systemâ€, â€˜controller_configâ€™: controller_config, â€˜pso_configâ€™: pso_config, â€˜physicsâ€™: params.get(â€˜physicsâ€™, {}), â€˜simulationâ€™: params.get(â€˜simulationâ€™, {}), â€˜cost_weightsâ€™: params.get(â€˜cost_weightsâ€™, {}) } system_config = self.templates[â€˜system_templateâ€™].render(**system_template_params) # Save to file if requested if output_file: with open(output_file, â€˜wâ€™) as f: f.write(system_config) return system_config def _deep_merge(self, base: Dict[str, Any], override: Dict[str, Any]) -&gt; Dict[str, Any]: â€œâ€â€Deep merge dictionaries.â€â€â€ result = base.copy() for key, value in override.items(): if key in result and isinstance(result[key], dict) and isinstance(value, dict): result[key] = self._deep_merge(result[key], value) else: result[key] = value return result # Usage
template_manager = ConfigurationTemplateManager() # Generate conservative classical SMC configuration
config_yaml = template_manager.generate_configuration( controller_type=â€™classical_smcâ€™, parameter_set=â€™conservativeâ€™, custom_params={ â€˜physicsâ€™: {â€˜m1â€™: 0.6, â€˜m2â€™: 0.4}, â€˜simulationâ€™: {â€˜durationâ€™: 3.0} }, output_file=â€™conservative_classical_config.yamlâ€™
) print(â€œGenerated configuration:â€)
print(config_yaml)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="o">---</span>

<span class="c1">## Migration and Deprecation Handling ### Automatic Parameter Migration ```python</span>
<span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false class ConfigurationMigrationManager: &quot;&quot;&quot;Handle configuration parameter migrations and deprecations.&quot;&quot;&quot; def __init__(self): self.migration_rules = self._initialize_migration_rules() self.deprecation_warnings = [] def _initialize_migration_rules(self) -&gt; Dict[str, Dict[str, Any]]: &quot;&quot;&quot;Initialize parameter migration rules.&quot;&quot;&quot; return { # Version 1.0 -&gt; 2.0 migrations &#39;v1_to_v2&#39;: { &#39;parameter_mappings&#39;: { &#39;use_equivalent&#39;: &#39;enable_equivalent_control&#39;, &#39;k_gain&#39;: &#39;switching_gain&#39;, &#39;lambda_gains&#39;: &#39;surface_gains&#39;, &#39;sat_limit&#39;: &#39;max_force&#39;, &#39;dt_control&#39;: &#39;dt&#39;, &#39;boundary_thickness&#39;: &#39;boundary_layer&#39; }, &#39;structure_changes&#39;: { &#39;controllers&#39;: { &#39;old_path&#39;: &#39;smc_configs&#39;, &#39;new_path&#39;: &#39;controllers&#39; } }, &#39;value_transformations&#39;: { &#39;switching_gain&#39;: lambda x: max(x, 5.0), # Ensure minimum value &#39;boundary_layer&#39;: lambda x: min(x, 0.1) # Ensure maximum value } }, # Version 2.0 -&gt; 3.0 migrations &#39;v2_to_v3&#39;: { &#39;parameter_mappings&#39;: { &#39;smc_classical&#39;: &#39;classical_smc&#39;, &#39;smc_adaptive&#39;: &#39;adaptive_smc&#39;, &#39;smc_sta&#39;: &#39;sta_smc&#39; }, &#39;new_required_parameters&#39;: { &#39;classical_smc&#39;: { &#39;switch_method&#39;: &#39;tanh&#39;, &#39;regularization&#39;: 1e-10 }, &#39;adaptive_smc&#39;: { &#39;smooth_switch&#39;: True, &#39;alpha&#39;: 0.5 } } } } def migrate_configuration(self, config: Dict[str, Any], from_version: str = &#39;v1&#39;, to_version: str = &#39;v3&#39;) -&gt; Dict[str, Any]: &quot;&quot;&quot;Migrate configuration between versions.&quot;&quot;&quot; self.deprecation_warnings.clear() migrated_config = config.copy() # Apply migrations in sequence if from_version == &#39;v1&#39; and to_version in [&#39;v2&#39;, &#39;v3&#39;]: migrated_config = self._apply_migration(migrated_config, &#39;v1_to_v2&#39;) if (from_version in [&#39;v1&#39;, &#39;v2&#39;]) and to_version == &#39;v3&#39;: migrated_config = self._apply_migration(migrated_config, &#39;v2_to_v3&#39;) return migrated_config def _apply_migration(self, config: Dict[str, Any], migration_key: str) -&gt; Dict[str, Any]: &quot;&quot;&quot;Apply specific migration rules.&quot;&quot;&quot; rules = self.migration_rules[migration_key] migrated = config.copy() # Apply parameter mappings if &#39;parameter_mappings&#39; in rules: migrated = self._apply_parameter_mappings(migrated, rules[&#39;parameter_mappings&#39;]) # Apply structure changes if &#39;structure_changes&#39; in rules: migrated = self._apply_structure_changes(migrated, rules[&#39;structure_changes&#39;]) # Apply value transformations if &#39;value_transformations&#39; in rules: migrated = self._apply_value_transformations(migrated, rules[&#39;value_transformations&#39;]) # Add new required parameters if &#39;new_required_parameters&#39; in rules: migrated = self._add_required_parameters(migrated, rules[&#39;new_required_parameters&#39;]) return migrated def _apply_parameter_mappings(self, config: Dict[str, Any], mappings: Dict[str, str]) -&gt; Dict[str, Any]: &quot;&quot;&quot;Apply parameter name mappings.&quot;&quot;&quot; migrated = config.copy() def migrate_nested(obj, path=&quot;&quot;): if isinstance(obj, dict): new_obj = {} for key, value in obj.items(): current_path = f&quot;{path}.{key}&quot; if path else key if key in mappings: new_key = mappings[key] new_obj[new_key] = migrate_nested(value, f&quot;{path}.{new_key}&quot; if path else new_key) self.deprecation_warnings.append( f&quot;Parameter &#39;{key}&#39; deprecated, migrated to &#39;{new_key}&#39;&quot; ) else: new_obj[key] = migrate_nested(value, current_path) return new_obj else: return obj return migrate_nested(migrated) def _apply_structure_changes(self, config: Dict[str, Any], changes: Dict[str, Dict[str, str]]) -&gt; Dict[str, Any]: &quot;&quot;&quot;Apply structural changes to configuration.&quot;&quot;&quot; migrated = config.copy() for change_name, change_rule in changes.items(): old_path = change_rule[&#39;old_path&#39;] new_path = change_rule[&#39;new_path&#39;] if old_path in migrated: # Move data from old path to new path migrated[new_path] = migrated.pop(old_path) self.deprecation_warnings.append( f&quot;Configuration section &#39;{old_path}&#39; moved to &#39;{new_path}&#39;&quot; ) return migrated def _apply_value_transformations(self, config: Dict[str, Any], transformations: Dict[str, callable]) -&gt; Dict[str, Any]: &quot;&quot;&quot;Apply value transformations.&quot;&quot;&quot; def transform_nested(obj): if isinstance(obj, dict): new_obj = {} for key, value in obj.items(): if key in transformations: try: new_obj[key] = transformations[key](value) self.deprecation_warnings.append( f&quot;Value transformation applied to &#39;{key}&#39;&quot; ) except Exception as e: new_obj[key] = value self.deprecation_warnings.append( f&quot;Value transformation failed for &#39;{key}&#39;: {e}&quot; ) else: new_obj[key] = transform_nested(value) return new_obj else: return obj return transform_nested(config) def _add_required_parameters(self, config: Dict[str, Any], required_params: Dict[str, Dict[str, Any]]) -&gt; Dict[str, Any]: &quot;&quot;&quot;Add new required parameters with default values.&quot;&quot;&quot; migrated = config.copy() # Ensure controllers section exists if &#39;controllers&#39; not in migrated: migrated[&#39;controllers&#39;] = {} for controller_type, params in required_params.items(): if controller_type not in migrated[&#39;controllers&#39;]: migrated[&#39;controllers&#39;][controller_type] = {} controller_config = migrated[&#39;controllers&#39;][controller_type] for param_name, default_value in params.items(): if param_name not in controller_config: controller_config[param_name] = default_value self.deprecation_warnings.append( f&quot;Added required parameter &#39;{param_name}&#39; to {controller_type}&quot; ) return migrated def check_deprecated_config(self, controller_type: str, params: Dict[str, Any]) -&gt; Dict[str, Any]: &quot;&quot;&quot;Check for and handle deprecated parameters.&quot;&quot;&quot; # Current deprecation mappings current_deprecations = { &#39;use_equivalent&#39;: &#39;enable_equivalent_control&#39;, &#39;k_gain&#39;: &#39;switching_gain&#39;, &#39;lambda_gains&#39;: &#39;surface_gains&#39;, &#39;sat_limit&#39;: &#39;max_force&#39;, &#39;boundary_thickness&#39;: &#39;boundary_layer&#39; } migrated_params = params.copy() for old_param, new_param in current_deprecations.items(): if old_param in migrated_params: migrated_params[new_param] = migrated_params.pop(old_param) self.deprecation_warnings.append( f&quot;Parameter &#39;{old_param}&#39; is deprecated. Use &#39;{new_param}&#39; instead.&quot; ) return migrated_params def get_deprecation_warnings(self) -&gt; List[str]: &quot;&quot;&quot;Get list of deprecation warnings.&quot;&quot;&quot; return self.deprecation_warnings.copy() # Usage</span>
<span class="n">migration_manager</span> <span class="o">=</span> <span class="n">ConfigurationMigrationManager</span><span class="p">()</span> <span class="c1"># Migrate old configuration</span>
<span class="n">old_config</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;smc_configs&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;smc_classical&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;k_gain&#39;</span><span class="p">:</span> <span class="mf">35.0</span><span class="p">,</span> <span class="s1">&#39;lambda_gains&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">12.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">],</span> <span class="s1">&#39;sat_limit&#39;</span><span class="p">:</span> <span class="mf">150.0</span><span class="p">,</span> <span class="s1">&#39;boundary_thickness&#39;</span><span class="p">:</span> <span class="mf">0.02</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span> <span class="n">migrated_config</span> <span class="o">=</span> <span class="n">migration_manager</span><span class="o">.</span><span class="n">migrate_configuration</span><span class="p">(</span> <span class="n">old_config</span><span class="p">,</span> <span class="n">from_version</span><span class="o">=</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span> <span class="n">to_version</span><span class="o">=</span><span class="s1">&#39;v3&#39;</span>
<span class="p">)</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Migrated configuration:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">migrated_config</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Deprecation warnings:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">warning</span> <span class="ow">in</span> <span class="n">migration_manager</span><span class="o">.</span><span class="n">get_deprecation_warnings</span><span class="p">():</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; âš ï¸ </span><span class="si">{</span><span class="n">warning</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
<section id="best-practices-configuration-best-practices-summary-1-type-safety-first-python-good-use-type-safe-configuration-classes-dataclass-frozen-true-class-controllerconfig-gains-list-float-max-force-float-bad-untyped-dictionary-configurations-config-gains-should-be-list-max-force-not-a-number-2-validation-at-all-levels-python-good-multi-level-validation-def-validate-config-config-1-type-validation-assert-isinstance-config-gains-list-2-domain-validation-assert-all-g-0-for-g-in-config-gains-3-physics-validation-assert-config-max-force-max-config-gains-3-clear-priority-rules-python-good-explicit-priority-handling-gains-explicit-gains-or-priority-1-config-gains-or-priority-2-registry-defaults-priority-3-4-graceful-degradation-python-good-fallback-mechanisms-try-config-create-full-config-params-except-configerror-config-create-minimal-config-essential-params-5-documentation-and-examples-yaml-good-well-documented-configuration-controllers-classical-smc-gains-k1-k2-1-2-k-kd-k1-k2-position-feedback-gains-affects-settling-time-1-2-surface-coefficients-must-be-positive-for-stability-k-switching-gain-higher-values-reduce-steady-state-error-but-increase-chattering-kd-derivative-gain-improves-damping-gains-20-0-15-0-12-0-8-0-35-0-5-0">
<h2>Best Practices ### Configuration Best Practices Summary 1. <strong>Type Safety First</strong> <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">#</span> <span class="pre">âœ…</span> <span class="pre">Good:</span> <span class="pre">Use</span> <span class="pre">type-safe</span> <span class="pre">configuration</span> <span class="pre">classes</span> <span class="pre">&#64;dataclass(frozen=True)</span> <span class="pre">class</span> <span class="pre">ControllerConfig:</span> <span class="pre">gains:</span> <span class="pre">List[float]</span> <span class="pre">max_force:</span> <span class="pre">float</span> <span class="pre">#</span> <span class="pre">âŒ</span> <span class="pre">Bad:</span> <span class="pre">Untyped</span> <span class="pre">dictionary</span> <span class="pre">configurations</span> <span class="pre">config</span> <span class="pre">=</span> <span class="pre">{'gains':</span> <span class="pre">'should</span> <span class="pre">be</span> <span class="pre">list',</span> <span class="pre">'max_force':</span> <span class="pre">'not</span> <span class="pre">a</span> <span class="pre">number'}</span> </code> 2. <strong>Validation at All Levels</strong> <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">#</span> <span class="pre">âœ…</span> <span class="pre">Good:</span> <span class="pre">Multi-level</span> <span class="pre">validation</span> <span class="pre">def</span> <span class="pre">validate_config(config):</span> <span class="pre">#</span> <span class="pre">1.</span> <span class="pre">Type</span> <span class="pre">validation</span> <span class="pre">assert</span> <span class="pre">isinstance(config.gains,</span> <span class="pre">list)</span> <span class="pre">#</span> <span class="pre">2.</span> <span class="pre">Domain</span> <span class="pre">validation</span> <span class="pre">assert</span> <span class="pre">all(g</span> <span class="pre">&gt;</span> <span class="pre">0</span> <span class="pre">for</span> <span class="pre">g</span> <span class="pre">in</span> <span class="pre">config.gains)</span> <span class="pre">#</span> <span class="pre">3.</span> <span class="pre">Physics</span> <span class="pre">validation</span> <span class="pre">assert</span> <span class="pre">config.max_force</span> <span class="pre">&gt;</span> <span class="pre">max(config.gains)</span> </code> 3. <strong>Clear Priority Rules</strong> <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">#</span> <span class="pre">âœ…</span> <span class="pre">Good:</span> <span class="pre">Explicit</span> <span class="pre">priority</span> <span class="pre">handling</span> <span class="pre">gains</span> <span class="pre">=</span> <span class="pre">(</span> <span class="pre">explicit_gains</span> <span class="pre">or</span> <span class="pre">#</span> <span class="pre">Priority</span> <span class="pre">1</span> <span class="pre">config_gains</span> <span class="pre">or</span> <span class="pre">#</span> <span class="pre">Priority</span> <span class="pre">2</span> <span class="pre">registry_defaults</span> <span class="pre">#</span> <span class="pre">Priority</span> <span class="pre">3</span> <span class="pre">)</span> </code> 4. <strong>Graceful Degradation</strong> <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">#</span> <span class="pre">âœ…</span> <span class="pre">Good:</span> <span class="pre">Fallback</span> <span class="pre">mechanisms</span> <span class="pre">try:</span> <span class="pre">config</span> <span class="pre">=</span> <span class="pre">create_full_config(**params)</span> <span class="pre">except</span> <span class="pre">ConfigError:</span> <span class="pre">config</span> <span class="pre">=</span> <span class="pre">create_minimal_config(**essential_params)</span> </code> 5. <strong>Documentation and Examples</strong> <code class="docutils literal notranslate"><span class="pre">yaml</span> <span class="pre">#</span> <span class="pre">âœ…</span> <span class="pre">Good:</span> <span class="pre">Well-documented</span> <span class="pre">configuration</span> <span class="pre">controllers:</span> <span class="pre">classical_smc:</span> <span class="pre">#</span> <span class="pre">Gains:</span> <span class="pre">[k1,</span> <span class="pre">k2,</span> <span class="pre">Î»1,</span> <span class="pre">Î»2,</span> <span class="pre">K,</span> <span class="pre">kd]</span> <span class="pre">#</span> <span class="pre">k1,</span> <span class="pre">k2:</span> <span class="pre">Position</span> <span class="pre">feedback</span> <span class="pre">gains</span> <span class="pre">(affects</span> <span class="pre">settling</span> <span class="pre">time)</span> <span class="pre">#</span> <span class="pre">Î»1,</span> <span class="pre">Î»2:</span> <span class="pre">Surface</span> <span class="pre">coefficients</span> <span class="pre">(must</span> <span class="pre">be</span> <span class="pre">positive</span> <span class="pre">for</span> <span class="pre">stability)</span> <span class="pre">#</span> <span class="pre">K:</span> <span class="pre">Switching</span> <span class="pre">gain</span> <span class="pre">(higher</span> <span class="pre">values</span> <span class="pre">reduce</span> <span class="pre">steady-state</span> <span class="pre">error</span> <span class="pre">but</span> <span class="pre">increase</span> <span class="pre">chattering)</span> <span class="pre">#</span> <span class="pre">kd:</span> <span class="pre">Derivative</span> <span class="pre">gain</span> <span class="pre">(improves</span> <span class="pre">damping)</span> <span class="pre">gains:</span> <span class="pre">[20.0,</span> <span class="pre">15.0,</span> <span class="pre">12.0,</span> <span class="pre">8.0,</span> <span class="pre">35.0,</span> <span class="pre">5.0]</span> </code><a class="headerlink" href="#best-practices-configuration-best-practices-summary-1-type-safety-first-python-good-use-type-safe-configuration-classes-dataclass-frozen-true-class-controllerconfig-gains-list-float-max-force-float-bad-untyped-dictionary-configurations-config-gains-should-be-list-max-force-not-a-number-2-validation-at-all-levels-python-good-multi-level-validation-def-validate-config-config-1-type-validation-assert-isinstance-config-gains-list-2-domain-validation-assert-all-g-0-for-g-in-config-gains-3-physics-validation-assert-config-max-force-max-config-gains-3-clear-priority-rules-python-good-explicit-priority-handling-gains-explicit-gains-or-priority-1-config-gains-or-priority-2-registry-defaults-priority-3-4-graceful-degradation-python-good-fallback-mechanisms-try-config-create-full-config-params-except-configerror-config-create-minimal-config-essential-params-5-documentation-and-examples-yaml-good-well-documented-configuration-controllers-classical-smc-gains-k1-k2-1-2-k-kd-k1-k2-position-feedback-gains-affects-settling-time-1-2-surface-coefficients-must-be-positive-for-stability-k-switching-gain-higher-values-reduce-steady-state-error-but-increase-chattering-kd-derivative-gain-improves-damping-gains-20-0-15-0-12-0-8-0-35-0-5-0" title="Link to this heading">Â¶</a></h2>
</section>
<section id="examples-and-use-cases-complete-configuration-integration-example-python">
<h2>Examples and Use Cases ### Complete Configuration Integration Example ```python<a class="headerlink" href="#examples-and-use-cases-complete-configuration-integration-example-python" title="Link to this heading">Â¶</a></h2>
<p>#!/usr/bin/env python3
â€œâ€â€Complete configuration integration example.â€â€â€ import yaml
from pathlib import Path
from typing import Dict, Any, Optional class ComprehensiveConfigurationExample: â€œâ€â€Demonstrate configuration integration.â€â€â€ def <strong>init</strong>(self): self.config_manager = self._setup_configuration_manager() def _setup_configuration_manager(self): â€œâ€â€Setup configuration management system.â€â€â€ class ConfigManager: def <strong>init</strong>(self): self.base_config = self._load_base_config() self.validator = ConfigurationValidator() self.migrator = ConfigurationMigrationManager() def _load_base_config(self): â€œâ€â€Load base configuration.â€â€â€ config_path = Path(â€œconfig.yamlâ€) if config_path.exists(): from src.config import load_config return load_config(config_path) else: return self._create_default_config() def _create_default_config(self): â€œâ€â€Create default configuration.â€â€â€ return { â€˜physicsâ€™: { â€˜m1â€™: 0.5, â€˜m2â€™: 0.5, â€˜Mâ€™: 2.0, â€˜l1â€™: 0.5, â€˜l2â€™: 0.5, â€˜b1â€™: 0.1, â€˜b2â€™: 0.1, â€˜I1â€™: 0.1, â€˜I2â€™: 0.1 }, â€˜simulationâ€™: { â€˜durationâ€™: 5.0, â€˜dtâ€™: 0.001, â€˜initial_stateâ€™: [0.1, 0.05, 0.0, 0.0, 0.0, 0.0] }, â€˜controllersâ€™: { â€˜classical_smcâ€™: { â€˜gainsâ€™: [20.0, 15.0, 12.0, 8.0, 35.0, 5.0], â€˜max_forceâ€™: 150.0, â€˜boundary_layerâ€™: 0.02, â€˜dtâ€™: 0.001 } } } def get_controller_config(self, controller_type: str, **overrides) -&gt; Dict[str, Any]: â€œâ€â€Get validated controller configuration.â€â€â€ # Get base configuration base_controller_config = self.base_config[â€˜controllersâ€™].get(controller_type, {}) # Apply overrides controller_config = {**base_controller_config, **overrides} # Migrate deprecated parameters controller_config = self.migrator.check_deprecated_config( controller_type, controller_config ) # Validate configuration if not self.validator.validate_configuration(controller_type, controller_config): report = self.validator.get_validation_report() raise ValueError(fâ€Configuration validation failed: {report[â€˜errorsâ€™]}â€) return controller_config return ConfigManager() def demonstration_1_basic_usage(self): â€œâ€â€Demonstrate basic configuration usage.â€â€â€ print(â€œ=== Demonstration 1: Basic Configuration Usage ===â€) # Get configuration for different controllers for controller_type in [â€˜classical_smcâ€™, â€˜adaptive_smcâ€™, â€˜sta_smcâ€™]: try: config = self.config_manager.get_controller_config(controller_type) print(fâ€\n{controller_type.upper()} Configuration:â€) print(fâ€ Gains: {config.get(â€˜gainsâ€™, â€˜Not specifiedâ€™)}â€) print(fâ€ Max Force: {config.get(â€˜max_forceâ€™, â€˜Not specifiedâ€™)}â€) print(fâ€ Timestep: {config.get(â€˜dtâ€™, â€˜Not specifiedâ€™)}â€) # Create controller with configuration controller = create_controller(controller_type, **config) print(fâ€ âœ… Controller created successfullyâ€) except Exception as e: print(fâ€ âŒ Failed to create {controller_type}: {e}â€) def demonstration_2_parameter_override(self): â€œâ€â€Demonstrate parameter override patterns.â€â€â€ print(â€œ\n=== Demonstration 2: Parameter Override Patterns ===â€) # Original configuration print(â€œOriginal gains:â€, self.config_manager.base_config[â€˜controllersâ€™][â€˜classical_smcâ€™][â€˜gainsâ€™]) # Override with explicit parameters config = self.config_manager.get_controller_config( â€˜classical_smcâ€™, gains=[25, 20, 15, 10, 40, 6], max_force=160.0 ) print(â€œOverridden gains:â€, config[â€˜gainsâ€™]) print(â€œOverridden max_force:â€, config[â€˜max_forceâ€™]) # Create controller with overrides controller = create_controller(â€˜classical_smcâ€™, **config) print(â€âœ… Controller created with overridesâ€) def demonstration_3_validation_and_migration(self): â€œâ€â€Demonstrate validation and migration features.â€â€â€ print(â€œ\n=== Demonstration 3: Validation and Migration ===â€) # Test deprecated parameter migration old_config = { â€˜k_gainâ€™: 35.0, # Deprecated â€˜lambda_gainsâ€™: [12.0, 8.0], # Deprecated â€˜sat_limitâ€™: 150.0, # Deprecated â€˜boundary_thicknessâ€™: 0.02, # Deprecated â€˜dtâ€™: 0.001 } print(â€œOld configuration (with deprecated parameters):â€) for key, value in old_config.items(): print(fâ€ {key}: {value}â€) # Apply migration migrated_config = self.config_manager.migrator.check_deprecated_config( â€˜classical_smcâ€™, old_config ) print(â€œ\nMigrated configuration:â€) for key, value in migrated_config.items(): print(fâ€ {key}: {value}â€) print(â€œ\nMigration warnings:â€) for warning in self.config_manager.migrator.get_deprecation_warnings(): print(fâ€ âš ï¸ {warning}â€) def demonstration_4_environment_configuration(self): â€œâ€â€Demonstrate environment-based configuration.â€â€â€ print(â€œ\n=== Demonstration 4: Environment Configuration ===â€) # Simulate different environments environments = [â€˜developmentâ€™, â€˜testingâ€™, â€˜productionâ€™] for env in environments: print(fâ€\nEnvironment: {env}â€) # Environment-specific overrides env_overrides = { â€˜developmentâ€™: {â€˜gainsâ€™: [15, 10, 8, 5, 25, 3]}, # Conservative â€˜testingâ€™: {â€˜gainsâ€™: [20, 15, 12, 8, 35, 5]}, # Standard â€˜productionâ€™: {â€˜gainsâ€™: [25, 20, 15, 10, 45, 7]} # Aggressive } config = self.config_manager.get_controller_config( â€˜classical_smcâ€™, **env_overrides.get(env, {}) ) print(fâ€ Gains: {config[â€˜gainsâ€™]}â€) # Validate for specific environment validator = ConfigurationValidator() is_valid = validator.validate_configuration(â€˜classical_smcâ€™, config) if is_valid: print(fâ€ âœ… Configuration valid for {env}â€) else: print(fâ€ âŒ Configuration invalid for {env}â€) for error in validator.get_validation_report()[â€˜errorsâ€™]: print(fâ€ Error: {error}â€) def demonstration_5_pso_integration(self): â€œâ€â€Demonstrate PSO integration with configuration.â€â€â€ print(â€œ\n=== Demonstration 5: PSO Integration ===â€) # Create PSO-optimized configuration base_config = self.config_manager.get_controller_config(â€˜classical_smcâ€™) print(â€œBase configuration for PSO:â€) print(fâ€ Initial gains: {base_config[â€˜gainsâ€™]}â€) # Create PSO factory with configuration from src.controllers.factory import create_pso_controller_factory, SMCType factory = create_pso_controller_factory( SMCType.CLASSICAL, <strong>{k: v for k, v in base_config.items() if k != â€˜gainsâ€™} ) print(fâ€ PSO factory created: {factory.n_gains} gains requiredâ€) # Simulate PSO optimization import numpy as np # Generate random gain variations base_gains = np.array(base_config[â€˜gainsâ€™]) for i in range(3): # Add random variation variation = 0.1 * np.random.randn(len(base_gains)) test_gains = base_gains * (1 + variation) test_gains = np.clip(test_gains, 0.1, 100.0) # Keep positive print(fâ€\n PSO Iteration {i+1}:â€) print(fâ€ Test gains: {test_gains.tolist()}â€) try: controller = factory(test_gains) print(fâ€ âœ… Controller created successfullyâ€) # Simulate fitness evaluation fitness = np.sum(test_gains</strong>2) # Simple fitness function print(fâ€ Fitness: {fitness:.2f}â€) except Exception as e: print(fâ€ âŒ Controller creation failed: {e}â€) def run_all_demonstrations(self): â€œâ€â€Run all configuration demonstrations.â€â€â€ print(â€œConfiguration Integration Demonstrationsâ€) print(â€œ=â€ * 50) try: self.demonstration_1_basic_usage() self.demonstration_2_parameter_override() self.demonstration_3_validation_and_migration() self.demonstration_4_environment_configuration() self.demonstration_5_pso_integration() print(â€œ\nâ€ + â€œ=â€ * 50) print(â€œAll demonstrations completed successfully!â€) except Exception as e: print(fâ€\nDemonstration failed: {e}â€) import traceback traceback.print_exc() # Run demonstrations
if <strong>name</strong> == â€œ<strong>main</strong>â€: demo = ComprehensiveConfigurationExample() demo.run_all_demonstrations()</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="o">---</span>

<span class="n">This</span> <span class="n">configuration</span> <span class="n">integration</span> <span class="n">documentation</span> <span class="n">provides</span> <span class="n">complete</span> <span class="n">coverage</span> <span class="n">of</span> <span class="n">the</span> <span class="n">configuration</span> <span class="n">system</span><span class="p">,</span> <span class="kn">from</span><span class="w"> </span><span class="nn">basic</span> <span class="n">usage</span> <span class="n">patterns</span> <span class="n">to</span> <span class="n">advanced</span> <span class="n">scenarios</span> <span class="n">like</span> <span class="n">environment</span><span class="o">-</span><span class="n">based</span> <span class="n">configuration</span> <span class="ow">and</span> <span class="n">automated</span> <span class="n">migration</span><span class="o">.</span> <span class="n">The</span> <span class="n">documentation</span> <span class="n">ensures</span> <span class="n">that</span> <span class="n">developers</span> <span class="n">can</span> <span class="n">effectively</span> <span class="n">use</span> <span class="n">the</span> <span class="n">sophisticated</span> <span class="n">configuration</span> <span class="n">architecture</span> <span class="k">while</span> <span class="n">maintaining</span> <span class="nb">type</span> <span class="n">safety</span><span class="p">,</span> <span class="n">validation</span><span class="p">,</span> <span class="ow">and</span> <span class="n">backward</span> <span class="n">compatibility</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Research Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Oct 10, 2025</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=4ebf8126"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=08e7b316"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script src="_static/back-to-top.js?v=840797bb"></script>
    <script src="_static/lazy-load.js?v=dc25293c"></script>
    <script src="_static/dark-mode.js?v=bf328970"></script>
    </body>
</html>