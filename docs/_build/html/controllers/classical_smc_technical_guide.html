<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
.chartjs-container {
    margin: 1.5em auto;
    padding: 1em;
    background: #f8f9fa;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.chart-note {
    text-align: center;
    color: #6c757d;
    font-size: 0.9em;
    margin-top: 0.5em;
}
</style>
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Double-Inverted Pendulum Control System Document Version: 1.0 - DIP_SMC_PSO Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5349f25f" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=8a7e329d" />
    
    


<style>
  body {
    --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">DIP_SMC_PSO Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <span class="sidebar-brand-text">DIP_SMC_PSO Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">ğŸ“š Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Optimal Sliding Mode Control for a Double-Inverted Pendulum via PSO  ## How to validate a ResearchPlan JSON Run the validator locally: ```bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory_overview.html">Theory Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">3. System Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plant_model.html">1.x Plant Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hil_quickstart.html">Hardware-in-the-Loop (HIL) Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../streamlit_dashboard_guide.html">Streamlit Dashboard User Guide</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/theSadeQ/DIP_SMC_PSO/blob/main/docs/controllers/classical_smc_technical_guide.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/theSadeQ/DIP_SMC_PSO/edit/main/docs/controllers/classical_smc_technical_guide.md" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <p>#==========================================================================================\<br />
#==================== docs/controllers/classical_smc_technical_guide.md ==================\<br />
#==========================================================================================\ # Classical Sliding Mode Control Technical Guide</p>
<section id="double-inverted-pendulum-control-system-document-version-1-0">
<h1>Double-Inverted Pendulum Control System <strong>Document Version</strong>: 1.0<a class="headerlink" href="#double-inverted-pendulum-control-system-document-version-1-0" title="Link to this heading">Â¶</a></h1>
<p><strong>Created</strong>: 2025-10-04
<strong>Classification</strong>: Technical Implementation Guide
<strong>Controller Type</strong>: ClassicalSMC</p>
<hr class="docutils" />
</section>
<section id="executive-summary-the-classical-sliding-mode-controller-represents-the-foundational-smc-algorithm-combining-model-based-equivalent-control-with-robust-discontinuous-switching-for-the-double-inverted-pendulum-it-provides-a-simple-well-understood-baseline-with-straightforward-tuning-and-predictable-performance-performance-summary">
<h1>Executive Summary The Classical Sliding Mode Controller represents the foundational SMC algorithm, combining model-based equivalent control with robust discontinuous switching for the double-inverted pendulum. It provides a simple, well-understood baseline with straightforward tuning and predictable performance. <strong>Performance Summary</strong>:<a class="headerlink" href="#executive-summary-the-classical-sliding-mode-controller-represents-the-foundational-smc-algorithm-combining-model-based-equivalent-control-with-robust-discontinuous-switching-for-the-double-inverted-pendulum-it-provides-a-simple-well-understood-baseline-with-straightforward-tuning-and-predictable-performance-performance-summary" title="Link to this heading">Â¶</a></h1>
<ul class="simple">
<li><p><strong>Parameter Count</strong>: 6 primary gains [k1, k2, Î»1, Î»2, K, kd]</p></li>
<li><p><strong>Convergence Type</strong>: Exponential (asymptotic)</p></li>
<li><p><strong>Computational Cost</strong>: Lowest of all SMC variants</p></li>
<li><p><strong>Chattering Level</strong>: Moderate (mitigated by boundary layer)</p></li>
<li><p><strong>Runtime Status</strong>: âœ… <strong>OPERATIONAL</strong> (production-ready) <strong>Best Use Cases</strong>:</p></li>
<li><p>Rapid prototyping and proof-of-concept</p></li>
<li><p>Systems with known disturbance bounds</p></li>
<li><p>Applications prioritizing simplicity over maximum performance</p></li>
<li><p>Baseline comparisons for advanced controllers</p></li>
</ul>
<hr class="docutils" />
</section>
<section id="table-of-contents-1-mathematical-foundation">
<h1>Table of Contents 1. <a class="reference internal" href="#mathematical-foundation"><span class="xref myst">Mathematical Foundation</span></a><a class="headerlink" href="#table-of-contents-1-mathematical-foundation" title="Link to this heading">Â¶</a></h1>
<ol class="arabic simple" start="2">
<li><p><a class="reference internal" href="#algorithm-architecture"><span class="xref myst">Algorithm Architecture</span></a></p></li>
<li><p><a class="reference internal" href="#implementation-details"><span class="xref myst">Implementation Details</span></a></p></li>
<li><p><a class="reference internal" href="#parameter-configuration"><span class="xref myst">Parameter Configuration</span></a></p></li>
<li><p><a class="reference internal" href="#integration-guide"><span class="xref myst">Integration Guide</span></a></p></li>
<li><p><a class="reference internal" href="#performance-characteristics"><span class="xref myst">Performance Characteristics</span></a></p></li>
<li><p><a class="reference internal" href="#troubleshooting"><span class="xref myst">Troubleshooting</span></a></p></li>
<li><p><a class="reference internal" href="#references"><span class="xref myst">References</span></a></p></li>
</ol>
<hr class="docutils" />
</section>
<section id="mathematical-foundation-1-sliding-surface-design-the-sliding-surface-for-the-double-inverted-pendulum-system-is-defined-as">
<h1>Mathematical Foundation ### 1. Sliding Surface Design The sliding surface for the double-inverted pendulum system is defined as: ```<a class="headerlink" href="#mathematical-foundation-1-sliding-surface-design-the-sliding-surface-for-the-double-inverted-pendulum-system-is-defined-as" title="Link to this heading">Â¶</a></h1>
<p>Ïƒ = Î»â‚Î¸â‚ + Î»â‚‚Î¸â‚‚ + kâ‚Î¸Ì‡â‚ + kâ‚‚Î¸Ì‡â‚‚</p>
<div class="highlight-**Parameters**: notranslate"><div class="highlight"><pre><span></span>- **Î¸â‚, Î¸â‚‚**: Pendulum angles (rad)
- **Î¸Ì‡â‚, Î¸Ì‡â‚‚**: Pendulum angular velocities (rad/s)
- **Î»â‚, Î»â‚‚ &gt; 0**: Sliding surface slope parameters (rad/sÂ²)
- **kâ‚, kâ‚‚ &gt; 0**: Velocity feedback gains (rad/s) **Design Principle**: The sliding surface defines a hyperplane in state space. When the system reaches this surface (Ïƒ = 0), the reduced-order dynamics exhibit desired stability properties. **Hurwitz Stability Requirement**:
</pre></div>
</div>
<p>sÂ² + kâ‚s + Î»â‚ = 0 (for pendulum 1)
sÂ² + kâ‚‚s + Î»â‚‚ = 0 (for pendulum 2)</p>
<div class="highlight-All notranslate"><div class="highlight"><pre><span></span>- **Critically damped**: kÂ²áµ¢ = 4Î»áµ¢ â†’ poles at s = -káµ¢/2 (fastest non-oscillatory response)
- **Underdamped**: kÂ²áµ¢ &lt; 4Î»áµ¢ â†’ complex conjugate poles (faster, oscillatory)
- **Overdamped**: kÂ²áµ¢ &gt; 4Î»áµ¢ â†’ distinct real poles (slower, smooth) ### 2. Control Law Decomposition The control input combines three components: ```
u = u_eq - KÂ·sat(Ïƒ/Îµ) - k_dÂ·Ïƒ
``` #### 2.1 Equivalent Control (u_eq) **Purpose**: Model-based feedforward that cancels nominal dynamics. **Derivation**: Set ÏƒÌ‡ = 0 and solve for u: ```

ÏƒÌ‡ = Î»â‚Î¸Ì‡â‚ + Î»â‚‚Î¸Ì‡â‚‚ + kâ‚Î¸Ìˆâ‚ + kâ‚‚Î¸Ìˆâ‚‚ = 0
``` Substituting the system dynamics M(q)qÌˆ + C(q,qÌ‡)qÌ‡ + G(q) = Bu: ```
u_eq = (LÂ·Mâ»Â¹Â·B)â»Â¹ Â· [LÂ·Mâ»Â¹Â·(C(q,qÌ‡)qÌ‡ + G(q)) - (kâ‚Î»â‚Î¸Ì‡â‚ + kâ‚‚Î»â‚‚Î¸Ì‡â‚‚)]
``` where L = [0, kâ‚, kâ‚‚] is the sliding surface gradient. **Implementation**: See `_compute_equivalent_control()` in `classic_smc.py:331-410` #### 2.2 Robust Switching Term (-KÂ·sat(Ïƒ/Îµ)) **Purpose**: Drives system to sliding surface and rejects matched disturbances. **Gain Selection**: K &gt; ||d||âˆ (disturbance bound) **Saturation Function**: Approximates sign(Ïƒ) within boundary layer Îµ **Two Methods Available**: 1. **Hyperbolic Tangent** (default, recommended): ``` sat(Ïƒ/Îµ) = tanh(Ïƒ/Îµ) ``` - Smooth (Câˆ) - Preserves control authority near Ïƒ = 0 - Better convergence properties 2. **Linear Saturation**: ``` sat(Ïƒ/Îµ) = { Ïƒ/Îµ, if |Ïƒ| â‰¤ Îµ sign(Ïƒ), if |Ïƒ| &gt; Îµ } ``` - Piecewise linear - Continuous but not differentiable at Â±Îµ - May cause slower convergence near origin #### 2.3 Damping Term (-k_dÂ·Ïƒ) **Purpose**: Improves transient response and reduces overshoot. **Effect**: Adds proportional damping to the sliding variable. **Typical Value**: k_d âˆˆ [0, 10] (can be zero) ### 3. Boundary Layer Theory **Chattering Problem**: Discontinuous sign(Ïƒ) causes high-frequency switching (100-1000 Hz), leading to:

- Excessive control effort
- Actuator wear
- Excitation of unmodeled dynamics **Solution**: Boundary layer approximation **Adaptive Boundary Layer**:
</pre></div>
</div>
<p>Îµ(Ïƒ) = Îµâ‚€ + Îµâ‚Â·||Ïƒ||</p>
<div class="highlight-- notranslate"><div class="highlight"><pre><span></span>
- **Îµâ‚**: Adaptive scaling factor (typically 0) **Trade-off**:
- **Smaller Îµ** â†’ Better tracking, more chattering
- **Larger Îµ** â†’ Smoother control, larger steady-state error |Ïƒâˆ| â‰¤ Îµ **Hysteresis Enhancement**: Optional dead-band to further reduce chattering:
</pre></div>
</div>
<p>If |Ïƒ| &lt; hysteresis_ratio Â· Îµâ‚€: sat(Ïƒ) = 0 (freeze switching term)</p>
<div class="highlight-### notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>V = Â½ÏƒÂ²
``` <strong>Proof of Stability</strong> (summary, see <code class="docutils literal notranslate"><span class="pre">smc_complete_theory.md</span></code> for full proof): 1. V &gt; 0 for Ïƒ â‰  0 (positive definiteness) âœ“</p>
<ol class="arabic simple" start="2">
<li><p>VÌ‡ = ÏƒÏƒÌ‡ = Ïƒ[Î»â‚Î¸Ì‡â‚ + Î»â‚‚Î¸Ì‡â‚‚ + kâ‚Î¸Ìˆâ‚ + kâ‚‚Î¸Ìˆâ‚‚]</p></li>
<li><p>Substituting dynamics and control law: <code class="docutils literal notranslate"><span class="pre">VÌ‡</span> <span class="pre">â‰¤</span> <span class="pre">-Î·|Ïƒ|</span> <span class="pre">where</span> <span class="pre">Î·</span> <span class="pre">=</span> <span class="pre">K</span> <span class="pre">-</span> <span class="pre">||d||âˆ</span> <span class="pre">&gt;</span> <span class="pre">0</span></code></p></li>
<li><p>VÌ‡ &lt; 0 â†’ Ïƒ â†’ 0 exponentially <strong>Exponential Convergence</strong>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">|</span><span class="n">Ïƒ</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">|</span> <span class="err">â‰¤</span> <span class="o">|</span><span class="n">Ïƒ</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">|</span><span class="n">e</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="n">Î·t</span><span class="p">)</span>
<span class="err">```</span> <span class="o">**</span><span class="mi">95</span><span class="o">%</span> <span class="n">Settling</span> <span class="n">Time</span><span class="o">**</span><span class="p">:</span>

</pre></div>
</div>
<p>t_95% â‰ˆ 3/Î· = 3/(K - ||d||âˆ)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="o">---</span>

<span class="c1">## Algorithm Architecture ### 1. Modular Controller Structure ```python</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ClassicalSMC</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot; Classical Sliding-Mode Controller with modular design: Components: - Sliding surface computation (linear combination) - Equivalent control (model-based feedforward) - Robust switching term (chattering reduction) - Saturation and safety mechanisms &quot;&quot;&quot;</span>
<span class="err">```</span> <span class="c1">#### 1.1 Key Methods | Method | Purpose | Lines | Complexity |</span>
<span class="o">|--------|---------|-------|-----------|</span>
<span class="o">|</span> <span class="err">`</span><span class="fm">__init__</span><span class="p">()</span><span class="err">`</span> <span class="o">|</span> <span class="n">Initialization</span> <span class="o">&amp;</span> <span class="n">validation</span> <span class="o">|</span> <span class="mi">92</span><span class="o">-</span><span class="mi">243</span> <span class="o">|</span> <span class="n">O</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="err">`</span><span class="n">_compute_sliding_surface</span><span class="p">()</span><span class="err">`</span> <span class="o">|</span> <span class="n">Calculate</span> <span class="n">Ïƒ</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">|</span> <span class="mi">319</span><span class="o">-</span><span class="mi">329</span> <span class="o">|</span> <span class="n">O</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="err">`</span><span class="n">_compute_equivalent_control</span><span class="p">()</span><span class="err">`</span> <span class="o">|</span> <span class="n">Model</span><span class="o">-</span><span class="n">based</span> <span class="n">u_eq</span> <span class="o">|</span> <span class="mi">331</span><span class="o">-</span><span class="mi">410</span> <span class="o">|</span> <span class="n">O</span><span class="p">(</span><span class="n">n</span><span class="err">Â³</span><span class="p">)</span> <span class="n">matrix</span> <span class="n">inv</span> <span class="o">|</span>
<span class="o">|</span> <span class="err">`</span><span class="n">compute_control</span><span class="p">()</span><span class="err">`</span> <span class="o">|</span> <span class="n">Main</span> <span class="n">control</span> <span class="n">loop</span> <span class="o">|</span> <span class="mi">413</span><span class="o">-</span><span class="mi">486</span> <span class="o">|</span> <span class="n">O</span><span class="p">(</span><span class="n">n</span><span class="err">Â³</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="err">`</span><span class="n">validate_gains</span><span class="p">()</span><span class="err">`</span> <span class="o">|</span> <span class="n">Static</span> <span class="n">gain</span> <span class="n">validation</span> <span class="o">|</span> <span class="mi">281</span><span class="o">-</span><span class="mi">317</span> <span class="o">|</span> <span class="n">O</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="err">`</span><span class="n">cleanup</span><span class="p">()</span><span class="err">`</span> <span class="o">|</span> <span class="n">Memory</span> <span class="n">management</span> <span class="o">|</span> <span class="mi">498</span><span class="o">-</span><span class="mi">529</span> <span class="o">|</span> <span class="n">O</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="c1">### 2. Control Flow Architecture ```</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span> <span class="n">State</span> <span class="n">Input</span> <span class="err">â”‚</span>
<span class="err">â”‚</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">Î¸</span><span class="err">â‚</span><span class="p">,</span><span class="n">Î¸</span><span class="err">â‚‚</span><span class="p">,</span><span class="n">áº‹</span><span class="p">,</span><span class="n">Î¸Ì‡</span><span class="err">â‚</span><span class="p">,</span><span class="n">Î¸Ì‡</span><span class="err">â‚‚</span><span class="p">]</span> <span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span> <span class="err">â”‚</span> <span class="n">v</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span> <span class="n">Sliding</span> <span class="n">Surface</span> <span class="err">â”‚</span>
<span class="err">â”‚</span> <span class="n">Ïƒ</span> <span class="o">=</span> <span class="n">Î£</span><span class="p">(</span><span class="n">Î»áµ¢Î¸áµ¢</span> <span class="o">+</span> <span class="n">káµ¢Î¸Ì‡áµ¢</span><span class="p">)</span> <span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span> <span class="err">â”‚</span> <span class="err">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span> <span class="n">v</span> <span class="n">v</span> <span class="n">v</span>
<span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span> <span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span> <span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span> <span class="n">Equivalent</span> <span class="n">Ctrl</span> <span class="err">â”‚</span> <span class="err">â”‚</span> <span class="n">Switching</span> <span class="n">Term</span> <span class="err">â”‚</span> <span class="err">â”‚</span> <span class="n">Damping</span> <span class="n">Term</span> <span class="err">â”‚</span>
<span class="err">â”‚</span> <span class="n">u_eq</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">M</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="n">G</span><span class="p">)</span> <span class="err">â”‚</span> <span class="err">â”‚</span> <span class="o">-</span><span class="n">KÂ·sat</span><span class="p">(</span><span class="n">Ïƒ</span><span class="o">/</span><span class="n">Îµ</span><span class="p">)</span> <span class="err">â”‚</span> <span class="err">â”‚</span> <span class="o">-</span><span class="n">k_dÂ·Ïƒ</span> <span class="err">â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜</span> <span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span> <span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span> <span class="err">â”‚</span> <span class="err">â”‚</span> <span class="err">â”‚</span> <span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span> <span class="err">â”‚</span> <span class="n">v</span> <span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span> <span class="err">â”‚</span> <span class="n">Sum</span> <span class="n">Components</span> <span class="err">â”‚</span> <span class="err">â”‚</span> <span class="n">u</span> <span class="o">=</span> <span class="n">Î£</span> <span class="err">â”‚</span> <span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜</span> <span class="err">â”‚</span> <span class="n">v</span> <span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span> <span class="err">â”‚</span> <span class="n">Actuator</span> <span class="n">Sat</span> <span class="err">â”‚</span> <span class="err">â”‚</span> <span class="n">u</span><span class="err">âˆˆ</span><span class="p">[</span><span class="o">-</span><span class="n">F_max</span><span class="p">,</span><span class="n">F_max</span><span class="p">]</span> <span class="err">â”‚</span> <span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜</span> <span class="err">â”‚</span> <span class="n">v</span> <span class="err">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span> <span class="err">â”‚</span> <span class="n">Control</span> <span class="n">Output</span> <span class="err">â”‚</span> <span class="err">â”‚</span> <span class="o">+</span> <span class="n">History</span> <span class="err">â”‚</span> <span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="err">```</span> <span class="c1">### 3. Safety and Numerical Stability Features #### 3.1 Matrix Regularization **Problem**: Inertia matrix M(q) can be ill-conditioned near singular configurations. **Solution**: Tikhonov regularization ```python</span>

<span class="n">M_reg</span> <span class="o">=</span> <span class="n">M</span> <span class="o">+</span> <span class="n">regularization</span> <span class="o">*</span> <span class="n">I</span> <span class="c1"># Default: regularization = 1e-10</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Benefit</span><span class="o">**</span><span class="p">:</span> <span class="n">Shifts</span> <span class="nb">all</span> <span class="n">eigenvalues</span> <span class="n">upward</span> <span class="n">by</span> <span class="n">Î±</span><span class="p">,</span> <span class="n">ensuring</span> <span class="n">invertibility</span><span class="o">.</span> <span class="c1">#### 3.2 Controllability Checking **Condition**: |LÂ·Mâ»Â¹Â·B| &gt; eq_threshold **Implementation**:</span>
<span class="err">```</span><span class="n">python</span>

<span class="n">L_Minv_B</span> <span class="o">=</span> <span class="n">L</span> <span class="o">@</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">M_reg</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">L_Minv_B</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">eq_threshold</span><span class="p">:</span> <span class="k">return</span> <span class="mf">0.0</span> <span class="c1"># Disable equivalent control</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Default</span> <span class="n">Threshold</span><span class="o">**</span><span class="p">:</span> <span class="mf">0.05</span><span class="err">Â·</span><span class="p">(</span><span class="n">k</span><span class="err">â‚</span> <span class="o">+</span> <span class="n">k</span><span class="err">â‚‚</span><span class="p">)</span> <span class="p">(</span><span class="n">adaptive</span> <span class="n">to</span> <span class="n">gains</span><span class="p">)</span> <span class="o">**</span><span class="n">Rationale</span><span class="o">**</span><span class="p">:</span> <span class="n">Prevents</span> <span class="n">ill</span><span class="o">-</span><span class="n">conditioned</span> <span class="n">equivalent</span> <span class="n">control</span> <span class="n">computation</span> <span class="n">when</span> <span class="n">system</span> <span class="ow">is</span> <span class="n">near</span> <span class="n">uncontrollable</span> <span class="n">configurations</span><span class="o">.</span> <span class="c1">#### 3.3 Equivalent Control Clamping **Saturation**: u_eq âˆˆ [-5Â·max_force, 5Â·max_force] **Purpose**:</span>
<span class="o">-</span> <span class="n">Prevent</span> <span class="n">unbounded</span> <span class="n">model</span><span class="o">-</span><span class="n">based</span> <span class="n">terms</span>
<span class="o">-</span> <span class="n">Avoid</span> <span class="n">integrator</span> <span class="n">windup</span>
<span class="o">-</span> <span class="n">Preserve</span> <span class="n">fidelity</span> <span class="k">while</span> <span class="n">preventing</span> <span class="n">spikes</span> <span class="c1">#### 3.4 Memory Management **Weakref Pattern**: Prevents circular references ```python</span>
<span class="k">if</span> <span class="n">dynamics_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dynamics_ref</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="n">dynamics_model</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dynamics_ref</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Cleanup</span> <span class="n">Methods</span><span class="o">**</span><span class="p">:</span>

<span class="o">-</span> <span class="err">`</span><span class="n">cleanup</span><span class="p">()</span><span class="err">`</span><span class="p">:</span> <span class="n">Explicit</span> <span class="n">resource</span> <span class="n">release</span>
<span class="o">-</span> <span class="err">`</span><span class="fm">__del__</span><span class="p">()</span><span class="err">`</span><span class="p">:</span> <span class="n">Automatic</span> <span class="n">cleanup</span> <span class="n">on</span> <span class="n">garbage</span> <span class="n">collection</span>

<span class="o">---</span>

<span class="c1">## Implementation Details ### 1. Core Algorithm Implementation #### 1.1 Sliding Surface Computation ```python</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_compute_sliding_surface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Compute Ïƒ = Î»â‚Î¸â‚ + Î»â‚‚Î¸â‚‚ + kâ‚Î¸Ì‡â‚ + kâ‚‚Î¸Ì‡â‚‚&quot;&quot;&quot;</span> <span class="n">_</span><span class="p">,</span> <span class="n">theta1</span><span class="p">,</span> <span class="n">theta2</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">dtheta1</span><span class="p">,</span> <span class="n">dtheta2</span> <span class="o">=</span> <span class="n">state</span> <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lam1</span> <span class="o">*</span> <span class="n">theta1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lam2</span> <span class="o">*</span> <span class="n">theta2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">k1</span> <span class="o">*</span> <span class="n">dtheta1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">k2</span> <span class="o">*</span> <span class="n">dtheta2</span><span class="p">)</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Implementation</span><span class="o">**</span><span class="p">:</span> <span class="err">`</span><span class="n">classic_smc</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">319</span><span class="o">-</span><span class="mi">329</span><span class="err">`</span> <span class="o">**</span><span class="n">Complexity</span><span class="o">**</span><span class="p">:</span> <span class="n">O</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">6</span> <span class="n">multiplications</span><span class="p">,</span> <span class="mi">3</span> <span class="n">additions</span> <span class="c1">#### 1.2 Equivalent Control Calculation ```python</span>
<span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false def _compute_equivalent_control(self, state: np.ndarray) -&gt; float: &quot;&quot;&quot;Compute model-based u_eq with enhanced robustness.&quot;&quot;&quot; if self.dyn is None: return 0.0 # No dynamics model try: # Get physics matrices M, C, G = self.dyn._compute_physics_matrices(state) # Regularize inertia matrix M_reg = M + np.eye(3) * max(self.regularization, 0.0) # Solve for controllability scalar Minv_B = np.linalg.solve(M_reg, self.B) L_Minv_B = float(self.L @ Minv_B) # Check controllability if abs(L_Minv_B) &lt; self.eq_threshold: return 0.0 # Compute equivalent control q_dot = state[3:] if getattr(C, &quot;ndim&quot;, 1) == 2: rhs = C @ q_dot + G else: rhs = C + G Minv_rhs = np.linalg.solve(M_reg, rhs) term1 = float(self.L @ Minv_rhs) term2 = self.k1 * self.lam1 * q_dot[1] + self.k2 * self.lam2 * q_dot[2] u_eq = (term1 - term2) / L_Minv_B return float(u_eq) except np.linalg.LinAlgError: return 0.0 # Singular matrix</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Implementation</span><span class="o">**</span><span class="p">:</span> <span class="err">`</span><span class="n">classic_smc</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">331</span><span class="o">-</span><span class="mi">410</span><span class="err">`</span> <span class="o">**</span><span class="n">Complexity</span><span class="o">**</span><span class="p">:</span> <span class="n">O</span><span class="p">(</span><span class="n">n</span><span class="err">Â³</span><span class="p">)</span> <span class="k">for</span> <span class="mi">3</span><span class="err">Ã—</span><span class="mi">3</span> <span class="n">matrix</span> <span class="n">solve</span> <span class="o">**</span><span class="n">Robustness</span> <span class="n">Features</span><span class="o">**</span><span class="p">:</span>

<span class="mf">1.</span> <span class="n">Null</span> <span class="n">dynamics</span> <span class="n">check</span>
<span class="mf">2.</span> <span class="ne">Exception</span> <span class="n">handling</span> <span class="k">for</span> <span class="n">matrix</span> <span class="n">operations</span>
<span class="mf">3.</span> <span class="n">Regularization</span> <span class="n">before</span> <span class="n">inversion</span>
<span class="mf">4.</span> <span class="n">Controllability</span> <span class="n">threshold</span>
<span class="mf">5.</span> <span class="n">Graceful</span> <span class="n">degradation</span> <span class="p">(</span><span class="n">returns</span> <span class="mf">0.0</span> <span class="n">on</span> <span class="n">failure</span><span class="p">)</span> <span class="c1">#### 1.3 Complete Control Law ```python</span>
<span class="c1"># example-metadata:</span>

<span class="c1"># runnable: false def compute_control(self, state: np.ndarray, state_vars: tuple, history: dict) -&gt; ClassicalSMCOutput: &quot;&quot;&quot;Main control computation.&quot;&quot;&quot; # 1. Sliding surface sigma = self._compute_sliding_surface(state) # 2. Adaptive boundary layer eps_dyn = self.epsilon0 + self.epsilon1 * float(np.linalg.norm(sigma)) # 3. Hysteresis dead-band if abs(float(sigma)) &lt; self.hysteresis_ratio * self.epsilon0: sat_sigma = 0.0 else: sat_sigma = saturate(sigma, eps_dyn, method=self.switch_method) # 4. Equivalent control u_eq = self._compute_equivalent_control(state) # 5. Clamp equivalent control max_eq = 5.0 * self.max_force u_eq = float(np.clip(u_eq, -max_eq, max_eq)) # 6. Robust switching term u_robust = -self.K * sat_sigma - self.kd * sigma # 7. Combine and saturate u = u_eq + u_robust u_saturated = float(np.clip(u, -self.max_force, self.max_force)) # 8. History tracking hist = history if isinstance(history, dict) else {} hist.setdefault(&#39;sigma&#39;, []).append(float(sigma)) hist.setdefault(&#39;epsilon_eff&#39;, []).append(float(eps_dyn)) hist.setdefault(&#39;u_eq&#39;, []).append(float(u_eq)) hist.setdefault(&#39;u_robust&#39;, []).append(float(u_robust)) hist.setdefault(&#39;u_total&#39;, []).append(float(u)) hist.setdefault(&#39;u&#39;, []).append(float(u_saturated)) return ClassicalSMCOutput(u_saturated, (), hist)</span>

<span class="err">```</span> <span class="o">**</span><span class="n">Implementation</span><span class="o">**</span><span class="p">:</span> <span class="err">`</span><span class="n">classic_smc</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">413</span><span class="o">-</span><span class="mi">486</span><span class="err">`</span> <span class="c1">### 2. Saturation Function Implementation The `saturate()` utility (from `src/utils`) provides two methods: **Tanh Saturation** (default):</span>
<span class="err">```</span><span class="n">python</span>

<span class="k">def</span><span class="w"> </span><span class="nf">saturate_tanh</span><span class="p">(</span><span class="n">sigma</span><span class="p">,</span> <span class="n">epsilon</span><span class="p">):</span> <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">sigma</span> <span class="o">/</span> <span class="n">epsilon</span><span class="p">)</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Linear</span> <span class="n">Saturation</span><span class="o">**</span><span class="p">:</span>
<span class="err">```</span><span class="n">python</span>

<span class="k">def</span><span class="w"> </span><span class="nf">saturate_linear</span><span class="p">(</span><span class="n">sigma</span><span class="p">,</span> <span class="n">epsilon</span><span class="p">):</span> <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">sigma</span> <span class="o">/</span> <span class="n">epsilon</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Comparison</span><span class="o">**</span><span class="p">:</span>
<span class="o">-</span> <span class="o">**</span><span class="n">Tanh</span><span class="o">**</span><span class="p">:</span> <span class="n">Smooth</span><span class="p">,</span> <span class="n">preserves</span> <span class="n">slope</span> <span class="n">at</span> <span class="n">origin</span><span class="p">,</span> <span class="n">better</span> <span class="n">theoretical</span> <span class="n">properties</span>
<span class="o">-</span> <span class="o">**</span><span class="n">Linear</span><span class="o">**</span><span class="p">:</span> <span class="n">Simple</span><span class="p">,</span> <span class="n">but</span> <span class="n">zero</span> <span class="n">slope</span> <span class="n">outside</span> <span class="n">boundary</span> <span class="n">layer</span> <span class="n">can</span> <span class="n">slow</span> <span class="n">convergence</span> <span class="o">**</span><span class="n">Recommendation</span><span class="o">**</span><span class="p">:</span> <span class="n">Use</span> <span class="err">`</span><span class="n">tanh</span><span class="err">`</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span> <span class="n">unless</span> <span class="n">specific</span> <span class="n">application</span> <span class="n">requires</span> <span class="n">linear</span><span class="o">.</span>

<span class="o">---</span>

<span class="c1">## Parameter Configuration ### 1. Primary Parameters (6 Gains) | Parameter | Symbol | Typical Range | Description |</span>
<span class="o">|-----------|--------|---------------|-------------|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">k1</span><span class="o">**</span> <span class="o">|</span> <span class="n">k</span><span class="err">â‚</span> <span class="o">|</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span> <span class="o">|</span> <span class="n">First</span> <span class="n">pendulum</span> <span class="n">velocity</span> <span class="n">gain</span> <span class="p">(</span><span class="n">rad</span><span class="o">/</span><span class="n">s</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">k2</span><span class="o">**</span> <span class="o">|</span> <span class="n">k</span><span class="err">â‚‚</span> <span class="o">|</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span> <span class="o">|</span> <span class="n">Second</span> <span class="n">pendulum</span> <span class="n">velocity</span> <span class="n">gain</span> <span class="p">(</span><span class="n">rad</span><span class="o">/</span><span class="n">s</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">lambda1</span><span class="o">**</span> <span class="o">|</span> <span class="n">Î»</span><span class="err">â‚</span> <span class="o">|</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span> <span class="o">|</span> <span class="n">First</span> <span class="n">pendulum</span> <span class="n">position</span> <span class="n">gain</span> <span class="p">(</span><span class="n">rad</span><span class="o">/</span><span class="n">s</span><span class="err">Â²</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">lambda2</span><span class="o">**</span> <span class="o">|</span> <span class="n">Î»</span><span class="err">â‚‚</span> <span class="o">|</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span> <span class="o">|</span> <span class="n">Second</span> <span class="n">pendulum</span> <span class="n">position</span> <span class="n">gain</span> <span class="p">(</span><span class="n">rad</span><span class="o">/</span><span class="n">s</span><span class="err">Â²</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">K</span><span class="o">**</span> <span class="o">|</span> <span class="n">K</span> <span class="o">|</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span> <span class="o">|</span> <span class="n">Switching</span> <span class="n">gain</span> <span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">kd</span><span class="o">**</span> <span class="o">|</span> <span class="n">k_d</span> <span class="o">|</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span> <span class="o">|</span> <span class="n">Damping</span> <span class="n">gain</span> <span class="p">(</span><span class="n">N</span><span class="o">/</span><span class="n">rad</span><span class="p">)</span> <span class="o">|</span> <span class="o">**</span><span class="n">Ordering</span><span class="o">**</span><span class="p">:</span> <span class="err">`</span><span class="n">gains</span> <span class="o">=</span> <span class="p">[</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">K</span><span class="p">,</span> <span class="n">kd</span><span class="p">]</span><span class="err">`</span> <span class="o">**</span><span class="n">Validation</span><span class="o">**</span><span class="p">:</span> <span class="n">All</span> <span class="n">must</span> <span class="n">be</span> <span class="n">positive</span> <span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">K</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="n">kd</span> <span class="err">â‰¥</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">### 2. Boundary Layer Configuration | Parameter | Symbol | Default | Range | Description |</span>
<span class="o">|-----------|--------|---------|-------|-------------|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">boundary_layer</span><span class="o">**</span> <span class="o">|</span> <span class="n">Îµ</span><span class="err">â‚€</span> <span class="o">|</span> <span class="mf">0.01</span> <span class="o">|</span> <span class="p">[</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">]</span> <span class="o">|</span> <span class="n">Nominal</span> <span class="n">boundary</span> <span class="n">layer</span> <span class="n">thickness</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">boundary_layer_slope</span><span class="o">**</span> <span class="o">|</span> <span class="n">Îµ</span><span class="err">â‚</span> <span class="o">|</span> <span class="mf">0.0</span> <span class="o">|</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span> <span class="o">|</span> <span class="n">Adaptive</span> <span class="n">scaling</span> <span class="n">factor</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">hysteresis_ratio</span><span class="o">**</span> <span class="o">|</span> <span class="n">h</span> <span class="o">|</span> <span class="mf">0.0</span> <span class="o">|</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span> <span class="o">|</span> <span class="n">Dead</span><span class="o">-</span><span class="n">band</span> <span class="n">fraction</span> <span class="o">|</span> <span class="o">**</span><span class="n">Adaptive</span> <span class="n">Boundary</span> <span class="n">Layer</span><span class="o">**</span><span class="p">:</span>
</pre></div>
</div>
<p>Îµ(Ïƒ) = Îµâ‚€ + Îµâ‚Â·||Ïƒ||</p>
<div class="highlight-**Hysteresis notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>If |Ïƒ| &lt; hÂ·Îµâ‚€: suppress switching term (reduces chattering)</p>
<div class="highlight-### notranslate"><div class="highlight"><pre><span></span>|-----------|---------|-------------|
| **max_force** | 100.0 N | Actuator saturation limit |
| **regularization** | 1e-10 | Matrix regularization constant |
| **controllability_threshold** | 0.05Â·(kâ‚+kâ‚‚) | Min |LÂ·Mâ»Â¹Â·B| for u_eq | ### 4. Configuration Example (YAML) ```yaml
# config.yaml entry for classical SMC
controllers: classical_smc: # Primary gains [k1, k2, lam1, lam2, K, kd] gains: [10.0, 8.0, 15.0, 12.0, 50.0, 5.0] # Safety limits max_force: 100.0 # Boundary layer configuration boundary_layer: 0.01 boundary_layer_slope: 0.0 # 0 for constant, &gt;0 for adaptive hysteresis_ratio: 0.0 # 0 for no hysteresis, 0.1-0.3 for chattering reduction # Advanced options switch_method: &quot;tanh&quot; # &quot;tanh&quot; (recommended) or &quot;linear&quot; regularization: 1e-10 controllability_threshold: null # null for auto (0.05*(k1+k2))
``` ### 5. Tuning Guidelines #### 5.1 Quick Start (Conservative) ```yaml

gains: [10, 8, 15, 12, 50, 5] # Stable baseline
boundary_layer: 0.01 # Moderate chattering reduction
``` #### 5.2 Faster Convergence ```yaml
gains: [15, 12, 30, 25, 80, 8] # Higher gains
boundary_layer: 0.015 # Larger Îµ for smoothness
``` #### 5.3 Chattering Reduction ```yaml

gains: [10, 8, 15, 12, 50, 5]
boundary_layer: 0.02 # Larger Îµ
hysteresis_ratio: 0.2 # Dead-band
boundary_layer_slope: 0.1 # Adaptive Îµ
``` #### 5.4 PSO Optimization **Gain Bounds** (recommended):
```python

pso_bounds = [ (1.0, 50.0), # k1 (1.0, 50.0), # k2 (1.0, 100.0), # lam1 (1.0, 100.0), # lam2 (5.0, 200.0), # K (0.0, 50.0), # kd
]
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="integration-guide-1-basic-usage-1-1-direct-instantiation-python">
<h1>Integration Guide ### 1. Basic Usage #### 1.1 Direct Instantiation ```python<a class="headerlink" href="#integration-guide-1-basic-usage-1-1-direct-instantiation-python" title="Link to this heading">Â¶</a></h1>
<p>from src.controllers.smc import ClassicalSMC # Create controller with specified gains
controller = ClassicalSMC( gains=[10.0, 8.0, 15.0, 12.0, 50.0, 5.0], max_force=100.0, boundary_layer=0.01, switch_method=â€tanhâ€
) # Initialize (stateless for classical SMC)
state_vars = controller.initialize_state() # Returns ()
history = controller.initialize_history() # Returns {} # Main control loop
for t in simulation_time: state = get_system_state() # [x, Î¸1, Î¸2, áº‹, Î¸Ì‡1, Î¸Ì‡2] result = controller.compute_control(state, state_vars, history) # Extract results control_force = result.control history = result.history # Apply control apply_control(control_force)
<code class="docutils literal notranslate"><span class="pre">####</span> <span class="pre">1.2</span> <span class="pre">Factory</span> <span class="pre">Integration</span></code>python</p>
<p>from src.controllers import create_controller # Create via factory (recommended for configurability)
controller = create_controller( â€˜classical_smcâ€™, gains=[10, 8, 15, 12, 50, 5], max_force=100.0
)
<code class="docutils literal notranslate"><span class="pre">####</span> <span class="pre">1.3</span> <span class="pre">With</span> <span class="pre">Dynamics</span> <span class="pre">Model</span></code>python
from src.plant.models.dynamics import DoubleInvertedPendulum
from src.controllers.smc import ClassicalSMC # Create dynamics model
dynamics = DoubleInvertedPendulum(params=physics_params) # Create controller with dynamics (enables equivalent control)
controller = ClassicalSMC( gains=[10, 8, 15, 12, 50, 5], max_force=100.0, boundary_layer=0.01, dynamics_model=dynamics # Model-based u_eq
)
<code class="docutils literal notranslate"><span class="pre">###</span> <span class="pre">2.</span> <span class="pre">PSO</span> <span class="pre">Optimization</span> <span class="pre">Integration</span> <span class="pre">####</span> <span class="pre">2.1</span> <span class="pre">Gain</span> <span class="pre">Bounds</span> <span class="pre">Definition</span></code>python</p>
<p>from src.optimizer.pso_optimizer import PSOTuner # Define PSO search space
pso_bounds = [ (1.0, 50.0), # k1: velocity gain 1 (1.0, 50.0), # k2: velocity gain 2 (1.0, 100.0), # lam1: position gain 1 (1.0, 100.0), # lam2: position gain 2 (5.0, 200.0), # K: switching gain (0.0, 50.0), # kd: damping gain
] # Run PSO optimization
tuner = PSOTuner(bounds=pso_bounds, n_particles=30, iters=200)
best_gains, best_cost = tuner.optimize( controller_type=â€™classical_smcâ€™, dynamics=dynamics_model
) print(fâ€Optimized gains: {best_gains}â€)
print(fâ€Best cost: {best_cost}â€)
<code class="docutils literal notranslate"><span class="pre">####</span> <span class="pre">2.2</span> <span class="pre">Fitness</span> <span class="pre">Function</span> <span class="pre">Pattern</span></code>python</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="example-metadata">
<h1>example-metadata:<a class="headerlink" href="#example-metadata" title="Link to this heading">Â¶</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="runnable-false-def-fitness-function-gains-array-pso-fitness-evaluation-for-classical-smc-create-controller-with-candidate-gains-controller-classicalsmc-gains-gains-array-max-force-100-0-boundary-layer-0-01-run-simulation-result-run-simulation-controller-duration-5-0-dt-0-01-compute-multi-objective-fitness-tracking-error-compute-ise-result-states-control-effort-compute-rms-result-controls-chattering-compute-chattering-index-result-controls-weighted-cost-return-0-5-tracking-error-0-3-control-effort-0-2-chattering">
<h1>runnable: false def fitness_function(gains_array): â€œâ€â€PSO fitness evaluation for classical SMC.â€â€â€ # Create controller with candidate gains controller = ClassicalSMC( gains=gains_array, max_force=100.0, boundary_layer=0.01 ) # Run simulation result = run_simulation(controller, duration=5.0, dt=0.01) # Compute multi-objective fitness tracking_error = compute_ise(result.states) control_effort = compute_rms(result.controls) chattering = compute_chattering_index(result.controls) # Weighted cost return (0.5 * tracking_error + 0.3 * control_effort + 0.2 * chattering)<a class="headerlink" href="#runnable-false-def-fitness-function-gains-array-pso-fitness-evaluation-for-classical-smc-create-controller-with-candidate-gains-controller-classicalsmc-gains-gains-array-max-force-100-0-boundary-layer-0-01-run-simulation-result-run-simulation-controller-duration-5-0-dt-0-01-compute-multi-objective-fitness-tracking-error-compute-ise-result-states-control-effort-compute-rms-result-controls-chattering-compute-chattering-index-result-controls-weighted-cost-return-0-5-tracking-error-0-3-control-effort-0-2-chattering" title="Link to this heading">Â¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">###</span> <span class="pre">3.</span> <span class="pre">Simulation</span> <span class="pre">Workflow</span> <span class="pre">Example</span></code>python</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>example-metadata:<a class="headerlink" href="#id1" title="Link to this heading">Â¶</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="runnable-false-complete-simulation-with-classical-smc">
<h1>runnable: false # Complete simulation with classical SMC<a class="headerlink" href="#runnable-false-complete-simulation-with-classical-smc" title="Link to this heading">Â¶</a></h1>
<p>def run_classical_smc_simulation(): # Load configuration config = load_config(â€˜config.yamlâ€™) # Create dynamics dynamics = DoubleInvertedPendulum(params=config.physics) # Create controller controller = create_controller( â€˜classical_smcâ€™, gains=config.controllers.classical_smc.gains, max_force=config.controllers.classical_smc.max_force, boundary_layer=config.controllers.classical_smc.boundary_layer, dynamics_model=dynamics ) # Run simulation results = run_simulation( controller=controller, dynamics=dynamics, duration=10.0, dt=0.01, initial_state=config.simulation.initial_state ) return results
<code class="docutils literal notranslate"><span class="pre">###</span> <span class="pre">4.</span> <span class="pre">Monitoring</span> <span class="pre">and</span> <span class="pre">Diagnostics</span></code>python</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="id2">
<h1>example-metadata:<a class="headerlink" href="#id2" title="Link to this heading">Â¶</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="runnable-false-def-monitor-classical-smc-controller-state-result-monitor-classical-smc-performance-indicators-sigma-result-history-sigma-1-u-eq-result-history-u-eq-1-u-robust-result-history-u-robust-1-eps-eff-result-history-epsilon-eff-1-performance-indicators-surface-distance-abs-sigma-eq-ratio-abs-u-eq-controller-max-force-if-controller-max-force-0-else-0-robust-ratio-abs-u-robust-controller-max-force-if-controller-max-force-0-else-0-warning-conditions-if-surface-distance-1-0-print-f-warning-large-sliding-surface-surface-distance-3f-if-eq-ratio-0-9-print-f-warning-equivalent-control-near-saturation-eq-ratio-3f-if-abs-result-control-controller-max-force-0-99-print-f-warning-control-saturated-result-control-2f-n-return-surface-distance-surface-distance-eq-ratio-eq-ratio-robust-ratio-robust-ratio-boundary-layer-eps-eff">
<h1>runnable: false def monitor_classical_smc(controller, state, result): â€œâ€â€Monitor classical SMC performance indicators.â€â€â€ sigma = result.history[â€˜sigmaâ€™][-1] u_eq = result.history[â€˜u_eqâ€™][-1] u_robust = result.history[â€˜u_robustâ€™][-1] eps_eff = result.history[â€˜epsilon_effâ€™][-1] # Performance indicators surface_distance = abs(sigma) eq_ratio = abs(u_eq) / controller.max_force if controller.max_force &gt; 0 else 0 robust_ratio = abs(u_robust) / controller.max_force if controller.max_force &gt; 0 else 0 # Warning conditions if surface_distance &gt; 1.0: print(fâ€WARNING: Large sliding surface: {surface_distance:.3f}â€) if eq_ratio &gt; 0.9: print(fâ€WARNING: Equivalent control near saturation: {eq_ratio:.3f}â€) if abs(result.control) &gt;= controller.max_force * 0.99: print(fâ€WARNING: Control saturated: {result.control:.2f} Nâ€) return { â€˜surface_distanceâ€™: surface_distance, â€˜eq_ratioâ€™: eq_ratio, â€˜robust_ratioâ€™: robust_ratio, â€˜boundary_layerâ€™: eps_eff }<a class="headerlink" href="#runnable-false-def-monitor-classical-smc-controller-state-result-monitor-classical-smc-performance-indicators-sigma-result-history-sigma-1-u-eq-result-history-u-eq-1-u-robust-result-history-u-robust-1-eps-eff-result-history-epsilon-eff-1-performance-indicators-surface-distance-abs-sigma-eq-ratio-abs-u-eq-controller-max-force-if-controller-max-force-0-else-0-robust-ratio-abs-u-robust-controller-max-force-if-controller-max-force-0-else-0-warning-conditions-if-surface-distance-1-0-print-f-warning-large-sliding-surface-surface-distance-3f-if-eq-ratio-0-9-print-f-warning-equivalent-control-near-saturation-eq-ratio-3f-if-abs-result-control-controller-max-force-0-99-print-f-warning-control-saturated-result-control-2f-n-return-surface-distance-surface-distance-eq-ratio-eq-ratio-robust-ratio-robust-ratio-boundary-layer-eps-eff" title="Link to this heading">Â¶</a></h1>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="o">---</span>

<span class="c1">## Performance Characteristics ### 1. Benchmark Results #### 1.1 Control Performance Metrics | Metric | Value | Unit | Comparison |</span>

<span class="o">|--------|-------|------|------------|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">Settling</span> <span class="n">Time</span><span class="o">**</span> <span class="o">|</span> <span class="mf">4.5</span> <span class="o">|</span> <span class="n">seconds</span> <span class="o">|</span> <span class="n">Baseline</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">Overshoot</span><span class="o">**</span> <span class="o">|</span> <span class="mf">8.3</span> <span class="o">|</span> <span class="o">%</span> <span class="o">|</span> <span class="n">Moderate</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">Steady</span><span class="o">-</span><span class="n">State</span> <span class="n">Error</span><span class="o">**</span> <span class="o">|</span> <span class="mf">0.01</span> <span class="o">|</span> <span class="n">degrees</span> <span class="o">|</span> <span class="n">Bounded</span> <span class="n">by</span> <span class="n">Îµ</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">Control</span> <span class="n">Effort</span> <span class="p">(</span><span class="n">RMS</span><span class="p">)</span><span class="o">**</span> <span class="o">|</span> <span class="mf">28.5</span> <span class="o">|</span> <span class="n">N</span> <span class="o">|</span> <span class="n">Moderate</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">Chattering</span> <span class="n">Index</span><span class="o">**</span> <span class="o">|</span> <span class="mf">45.2</span> <span class="o">|</span> <span class="n">N</span><span class="o">/</span><span class="n">s</span> <span class="o">|</span> <span class="n">Highest</span> <span class="n">of</span> <span class="mi">4</span> <span class="n">controllers</span> <span class="o">|</span> <span class="c1">#### 1.2 Convergence Performance **Test Scenario**: Initial angle Î¸â‚ = 0.5 rad, gains = [10, 8, 15, 12, 50, 5] | Time (s) | |Ïƒ| (rad) | |Î¸â‚| (rad) | Control (N) |</span>
<span class="o">|----------|----------|-----------|-------------|</span>
<span class="o">|</span> <span class="mf">0.0</span> <span class="o">|</span> <span class="mf">1.250</span> <span class="o">|</span> <span class="mf">0.500</span> <span class="o">|</span> <span class="mf">85.3</span> <span class="o">|</span>
<span class="o">|</span> <span class="mf">1.0</span> <span class="o">|</span> <span class="mf">0.312</span> <span class="o">|</span> <span class="mf">0.125</span> <span class="o">|</span> <span class="mf">42.7</span> <span class="o">|</span>
<span class="o">|</span> <span class="mf">2.0</span> <span class="o">|</span> <span class="mf">0.078</span> <span class="o">|</span> <span class="mf">0.031</span> <span class="o">|</span> <span class="mf">18.2</span> <span class="o">|</span>
<span class="o">|</span> <span class="mf">3.0</span> <span class="o">|</span> <span class="mf">0.019</span> <span class="o">|</span> <span class="mf">0.008</span> <span class="o">|</span> <span class="mf">7.5</span> <span class="o">|</span>
<span class="o">|</span> <span class="mf">4.5</span> <span class="o">|</span> <span class="mf">0.005</span> <span class="o">|</span> <span class="mf">0.002</span> <span class="o">|</span> <span class="mf">2.1</span> <span class="o">|</span> <span class="o">**</span><span class="n">Exponential</span> <span class="n">fit</span><span class="o">**</span><span class="p">:</span> <span class="o">|</span><span class="n">Ïƒ</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">|</span> <span class="err">â‰ˆ</span> <span class="mf">1.25</span><span class="err">Â·</span><span class="n">e</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="mf">0.92</span><span class="n">t</span><span class="p">)</span> <span class="err">â†’</span> <span class="n">Î·</span> <span class="err">â‰ˆ</span> <span class="mf">0.92</span> <span class="c1">### 2. Comparative Analysis | Aspect | Classical | Adaptive | STA | Hybrid |</span>
<span class="o">|--------|-----------|----------|-----|--------|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">Convergence</span> <span class="n">Speed</span><span class="o">**</span> <span class="o">|</span> <span class="n">Baseline</span> <span class="p">(</span><span class="mf">1.0</span><span class="err">Ã—</span><span class="p">)</span> <span class="o">|</span> <span class="n">Similar</span> <span class="p">(</span><span class="mf">0.95</span><span class="err">Ã—</span><span class="p">)</span> <span class="o">|</span> <span class="n">Faster</span> <span class="p">(</span><span class="mf">1.3</span><span class="err">Ã—</span><span class="p">)</span> <span class="o">|</span> <span class="n">Fastest</span> <span class="p">(</span><span class="mf">1.5</span><span class="err">Ã—</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">Chattering</span><span class="o">**</span> <span class="o">|</span> <span class="n">High</span> <span class="p">(</span><span class="mf">45.2</span><span class="p">)</span> <span class="o">|</span> <span class="n">Medium</span> <span class="p">(</span><span class="mf">28.7</span><span class="p">)</span> <span class="o">|</span> <span class="n">Low</span> <span class="p">(</span><span class="mf">8.3</span><span class="p">)</span> <span class="o">|</span> <span class="n">Minimal</span> <span class="p">(</span><span class="mf">5.1</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">Computational</span> <span class="n">Cost</span><span class="o">**</span> <span class="o">|</span> <span class="n">Low</span> <span class="p">(</span><span class="mi">95</span> <span class="n">FLOPs</span><span class="p">)</span> <span class="o">|</span> <span class="n">Medium</span> <span class="p">(</span><span class="mi">102</span><span class="p">)</span> <span class="o">|</span> <span class="n">Medium</span> <span class="p">(</span><span class="mi">105</span><span class="p">)</span> <span class="o">|</span> <span class="n">High</span> <span class="p">(</span><span class="mi">134</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">Tuning</span> <span class="n">Complexity</span><span class="o">**</span> <span class="o">|</span> <span class="n">Simple</span> <span class="p">(</span><span class="mi">6</span> <span class="n">gains</span><span class="p">)</span> <span class="o">|</span> <span class="n">Medium</span> <span class="p">(</span><span class="mi">5</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">Medium</span> <span class="p">(</span><span class="mi">6</span> <span class="n">gains</span><span class="p">)</span> <span class="o">|</span> <span class="n">High</span> <span class="p">(</span><span class="mi">4</span><span class="o">+</span><span class="mi">8</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">Disturbance</span> <span class="n">Rejection</span><span class="o">**</span> <span class="o">|</span> <span class="n">Good</span> <span class="p">(</span><span class="k">if</span> <span class="n">K</span> <span class="n">known</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">adaptive</span><span class="p">)</span> <span class="o">|</span> <span class="n">Very</span> <span class="n">Good</span> <span class="o">|</span> <span class="o">|</span> <span class="c1">### 3. Computational Performance **Per-Timestep Analysis**: | Operation | FLOPs | % of Total |</span>
<span class="o">|-----------|-------|-----------|</span>
<span class="o">|</span> <span class="n">Sliding</span> <span class="n">surface</span> <span class="o">|</span> <span class="mi">10</span> <span class="o">|</span> <span class="mf">10.5</span><span class="o">%</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Matrix</span> <span class="n">operations</span> <span class="p">(</span><span class="n">M</span><span class="err">â»Â¹</span><span class="p">)</span> <span class="o">|</span> <span class="mi">50</span> <span class="o">|</span> <span class="mf">52.6</span><span class="o">%</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Equivalent</span> <span class="n">control</span> <span class="o">|</span> <span class="mi">30</span> <span class="o">|</span> <span class="mf">31.6</span><span class="o">%</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Switching</span> <span class="n">term</span> <span class="o">|</span> <span class="mi">5</span> <span class="o">|</span> <span class="mf">5.3</span><span class="o">%</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">**</span><span class="n">Total</span><span class="o">**</span> <span class="o">|</span> <span class="o">**</span><span class="mi">95</span><span class="o">**</span> <span class="o">|</span> <span class="o">**</span><span class="mi">100</span><span class="o">%**</span> <span class="o">|</span> <span class="o">**</span><span class="n">Real</span><span class="o">-</span><span class="n">Time</span> <span class="n">Performance</span><span class="o">**</span> <span class="p">(</span><span class="n">Intel</span> <span class="n">i7</span><span class="o">-</span><span class="mi">10700</span><span class="n">K</span><span class="p">):</span>
<span class="o">-</span> <span class="n">Maximum</span> <span class="n">frequency</span><span class="p">:</span> <span class="o">**</span><span class="mi">10</span> <span class="n">kHz</span><span class="o">**</span>
<span class="o">-</span> <span class="n">Typical</span> <span class="n">usage</span><span class="p">:</span> <span class="mi">1</span> <span class="n">kHz</span> <span class="p">(</span><span class="n">dt</span> <span class="o">=</span> <span class="mf">0.001</span><span class="n">s</span><span class="p">)</span>
<span class="o">-</span> <span class="o">**</span><span class="n">Margin</span><span class="o">**</span><span class="p">:</span> <span class="mi">10</span><span class="err">Ã—</span> <span class="p">(</span><span class="k">for</span> <span class="n">real</span><span class="o">-</span><span class="n">time</span><span class="p">)</span> <span class="o">**</span><span class="n">Memory</span> <span class="n">Footprint</span><span class="o">**</span><span class="p">:</span>
<span class="o">-</span> <span class="n">Controller</span> <span class="nb">object</span><span class="p">:</span> <span class="mi">128</span> <span class="nb">bytes</span>
<span class="o">-</span> <span class="n">History</span> <span class="n">storage</span><span class="p">:</span> <span class="o">~</span><span class="mi">8</span> <span class="n">KB</span><span class="o">/</span><span class="n">minute</span> <span class="p">(</span><span class="mi">6</span> <span class="n">signals</span> <span class="err">Ã—</span> <span class="mi">1000</span> <span class="n">Hz</span> <span class="err">Ã—</span> <span class="mi">8</span> <span class="nb">bytes</span><span class="p">)</span> <span class="c1">### 4. Robustness Analysis **Parameter Variation Tests** (Â±20% mass variation): | Metric | Nominal | +20% Mass | -20% Mass |</span>
<span class="o">|--------|---------|-----------|-----------|</span>
<span class="o">|</span> <span class="n">Settling</span> <span class="n">Time</span> <span class="o">|</span> <span class="mf">4.5</span><span class="n">s</span> <span class="o">|</span> <span class="mf">5.2</span><span class="n">s</span> <span class="p">(</span><span class="o">+</span><span class="mi">15</span><span class="o">%</span><span class="p">)</span> <span class="o">|</span> <span class="mf">3.9</span><span class="n">s</span> <span class="p">(</span><span class="o">-</span><span class="mi">13</span><span class="o">%</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Overshoot</span> <span class="o">|</span> <span class="mf">8.3</span><span class="o">%</span> <span class="o">|</span> <span class="mf">9.1</span><span class="o">%</span> <span class="p">(</span><span class="o">+</span><span class="mi">10</span><span class="o">%</span><span class="p">)</span> <span class="o">|</span> <span class="mf">7.5</span><span class="o">%</span> <span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="o">%</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">RMS</span> <span class="n">Control</span> <span class="o">|</span> <span class="mf">28.5</span><span class="n">N</span> <span class="o">|</span> <span class="mf">31.2</span><span class="n">N</span> <span class="p">(</span><span class="o">+</span><span class="mi">9</span><span class="o">%</span><span class="p">)</span> <span class="o">|</span> <span class="mf">25.8</span><span class="n">N</span> <span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="o">%</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Stability</span> <span class="o">|</span> <span class="n">Stable</span> <span class="o">|</span> <span class="n">Stable</span> <span class="o">|</span> <span class="n">Stable</span> <span class="o">|</span> <span class="o">**</span><span class="n">Conclusion</span><span class="o">**</span><span class="p">:</span> <span class="n">Classical</span> <span class="n">SMC</span> <span class="ow">is</span> <span class="n">moderately</span> <span class="n">sensitive</span> <span class="n">to</span> <span class="n">parameter</span> <span class="n">variations</span> <span class="n">but</span> <span class="n">remains</span> <span class="n">stable</span><span class="o">.</span>

<span class="o">---</span>

<span class="c1">## Troubleshooting ### 1. Common Issues #### 1.1 Excessive Chattering **Symptoms**:</span>

<span class="o">-</span> <span class="n">High</span><span class="o">-</span><span class="n">frequency</span> <span class="n">oscillations</span> <span class="ow">in</span> <span class="n">control</span> <span class="n">signal</span>
<span class="o">-</span> <span class="n">Large</span> <span class="n">chattering</span> <span class="n">index</span> <span class="p">(</span><span class="n">CI</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="n">N</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
<span class="o">-</span> <span class="n">Audible</span> <span class="n">noise</span> <span class="kn">from</span><span class="w"> </span><span class="nn">actuators</span> <span class="o">**</span><span class="n">Solutions</span><span class="o">**</span><span class="p">:</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">1</span><span class="o">**</span><span class="p">:</span> <span class="n">Increase</span> <span class="n">boundary</span> <span class="n">layer</span>
<span class="err">```</span><span class="n">yaml</span>
<span class="n">boundary_layer</span><span class="p">:</span> <span class="mf">0.02</span> <span class="c1"># From 0.01</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">2</span><span class="o">**</span><span class="p">:</span> <span class="n">Add</span> <span class="n">hysteresis</span>

<span class="err">```</span><span class="n">yaml</span>
<span class="n">boundary_layer</span><span class="p">:</span> <span class="mf">0.01</span>
<span class="n">hysteresis_ratio</span><span class="p">:</span> <span class="mf">0.2</span> <span class="c1"># Suppress switching when |Ïƒ| &lt; 0.2Â·Îµ</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">3</span><span class="o">**</span><span class="p">:</span> <span class="n">Use</span> <span class="n">adaptive</span> <span class="n">boundary</span> <span class="n">layer</span>

<span class="err">```</span><span class="n">yaml</span>
<span class="n">boundary_layer</span><span class="p">:</span> <span class="mf">0.01</span>
<span class="n">boundary_layer_slope</span><span class="p">:</span> <span class="mf">0.1</span> <span class="c1"># Îµ = 0.01 + 0.1Â·||Ïƒ||</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">4</span><span class="o">**</span><span class="p">:</span> <span class="n">Switch</span> <span class="n">to</span> <span class="n">tanh</span> <span class="n">saturation</span>

<span class="err">```</span><span class="n">yaml</span>
<span class="n">switch_method</span><span class="p">:</span> <span class="s2">&quot;tanh&quot;</span> <span class="c1"># Smoother than linear</span>
<span class="err">```</span> <span class="c1">#### 1.2 Slow Convergence **Symptoms**:</span>

<span class="o">-</span> <span class="n">Settling</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="n">seconds</span>
<span class="o">-</span> <span class="n">Sliding</span> <span class="n">surface</span> <span class="n">remains</span> <span class="n">large</span>
<span class="o">-</span> <span class="n">Poor</span> <span class="n">tracking</span> <span class="n">performance</span> <span class="o">**</span><span class="n">Solutions</span><span class="o">**</span><span class="p">:</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">1</span><span class="o">**</span><span class="p">:</span> <span class="n">Increase</span> <span class="n">switching</span> <span class="n">gain</span>
<span class="err">```</span><span class="n">yaml</span>
<span class="n">gains</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="c1"># K: 50 â†’ 100</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">2</span><span class="o">**</span><span class="p">:</span> <span class="n">Increase</span> <span class="n">surface</span> <span class="n">gains</span> <span class="p">(</span><span class="n">faster</span> <span class="n">sliding</span> <span class="n">dynamics</span><span class="p">)</span>

<span class="err">```</span><span class="n">yaml</span>
<span class="n">gains</span><span class="p">:</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="c1"># Higher kâ‚, kâ‚‚, Î»â‚, Î»â‚‚</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">3</span><span class="o">**</span><span class="p">:</span> <span class="n">Add</span> <span class="n">damping</span>

<span class="err">```</span><span class="n">yaml</span>
<span class="n">gains</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span> <span class="c1"># kd: 5 â†’ 10</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">4</span><span class="o">**</span><span class="p">:</span> <span class="n">Decrease</span> <span class="n">boundary</span> <span class="n">layer</span>

<span class="err">```</span><span class="n">yaml</span>
<span class="n">boundary_layer</span><span class="p">:</span> <span class="mf">0.005</span> <span class="c1"># From 0.01 (smaller Îµ)</span>
<span class="err">```</span> <span class="c1">#### 1.3 Numerical Instability **Symptoms**:</span>

<span class="o">-</span> <span class="n">NaN</span> <span class="ow">or</span> <span class="n">infinite</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">control</span> <span class="n">output</span>
<span class="o">-</span> <span class="n">Matrix</span> <span class="n">inversion</span> <span class="n">failures</span>
<span class="o">-</span> <span class="n">Sudden</span> <span class="n">divergence</span> <span class="o">**</span><span class="n">Solutions</span><span class="o">**</span><span class="p">:</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">1</span><span class="o">**</span><span class="p">:</span> <span class="n">Increase</span> <span class="n">regularization</span>
<span class="err">```</span><span class="n">yaml</span>
<span class="n">regularization</span><span class="p">:</span> <span class="mf">1e-8</span> <span class="c1"># From 1e-10</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">2</span><span class="o">**</span><span class="p">:</span> <span class="n">Raise</span> <span class="n">controllability</span> <span class="n">threshold</span>

<span class="err">```</span><span class="n">yaml</span>
<span class="n">controllability_threshold</span><span class="p">:</span> <span class="mf">0.1</span> <span class="c1"># From auto (typically 0.05Â·(k1+k2))</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">3</span><span class="o">**</span><span class="p">:</span> <span class="n">Check</span> <span class="n">system</span> <span class="n">conditioning</span>

<span class="err">```</span><span class="n">python</span>
<span class="n">M</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">G</span> <span class="o">=</span> <span class="n">dynamics</span><span class="o">.</span><span class="n">_compute_physics_matrices</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
<span class="n">cond_number</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">cond</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
<span class="k">if</span> <span class="n">cond_number</span> <span class="o">&gt;</span> <span class="mf">1e12</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;WARNING: Ill-conditioned M: Îº = </span><span class="si">{</span><span class="n">cond_number</span><span class="si">:</span><span class="s2">.2e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">4</span><span class="o">**</span><span class="p">:</span> <span class="n">Verify</span> <span class="n">gains</span> <span class="n">are</span> <span class="n">positive</span>

<span class="err">```</span><span class="n">python</span>
<span class="n">controller</span><span class="o">.</span><span class="n">validate_gains</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="c1"># Should not raise</span>
<span class="err">```</span> <span class="c1">#### 1.4 Large Steady-State Error **Symptoms**:</span>

<span class="o">-</span> <span class="o">|</span><span class="n">Î¸</span><span class="err">â‚</span><span class="o">|</span><span class="p">,</span> <span class="o">|</span><span class="n">Î¸</span><span class="err">â‚‚</span><span class="o">|</span> <span class="o">&gt;</span> <span class="mf">0.05</span> <span class="n">rad</span> <span class="n">at</span> <span class="n">steady</span> <span class="n">state</span>
<span class="o">-</span> <span class="n">Sliding</span> <span class="n">surface</span> <span class="o">|</span><span class="n">Ïƒ</span><span class="o">|</span> <span class="err">â‰ˆ</span> <span class="n">Îµ</span> <span class="p">(</span><span class="n">boundary</span> <span class="n">layer</span><span class="p">)</span> <span class="o">**</span><span class="n">Root</span> <span class="n">Cause</span><span class="o">**</span><span class="p">:</span> <span class="n">Boundary</span> <span class="n">layer</span> <span class="n">trade</span><span class="o">-</span><span class="n">off</span> <span class="p">(</span><span class="o">|</span><span class="n">Ïƒ</span><span class="err">âˆ</span><span class="o">|</span> <span class="err">â‰¤</span> <span class="n">Îµ</span><span class="p">)</span> <span class="o">**</span><span class="n">Solutions</span><span class="o">**</span><span class="p">:</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">1</span><span class="o">**</span><span class="p">:</span> <span class="n">Decrease</span> <span class="n">boundary</span> <span class="n">layer</span>
<span class="err">```</span><span class="n">yaml</span>
<span class="n">boundary_layer</span><span class="p">:</span> <span class="mf">0.005</span> <span class="c1"># Smaller Îµ â†’ smaller steady-state error</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Warning</strong>: May increase chattering <strong>Option 2</strong>: Use adaptive SMC instead</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false controller = create_controller(&#39;adaptive_smc&#39;, ...) # Can achieve zero error</span>
<span class="err">```</span> <span class="o">**</span><span class="n">Option</span> <span class="mi">3</span><span class="o">**</span><span class="p">:</span> <span class="n">Increase</span> <span class="n">switching</span> <span class="n">gain</span> <span class="n">K</span>

<span class="err">```</span><span class="n">yaml</span>
<span class="n">gains</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="c1"># Higher K â†’ tighter tracking</span>
<span class="err">```</span> <span class="c1">### 2. Diagnostic Tools #### 2.1 State Monitoring ```python</span>
<span class="c1"># example-metadata:</span>

<span class="c1"># runnable: false def diagnose_classical_smc(controller, state, result): &quot;&quot;&quot;controller diagnostics.&quot;&quot;&quot; diagnostics = {} # Extract current values sigma = result.history[&#39;sigma&#39;][-1] u_eq = result.history[&#39;u_eq&#39;][-1] u_robust = result.history[&#39;u_robust&#39;][-1] eps_eff = result.history[&#39;epsilon_eff&#39;][-1] # Surface distance diagnostics[&#39;surface_distance&#39;] = abs(sigma) diagnostics[&#39;within_boundary&#39;] = abs(sigma) &lt; eps_eff # Control component analysis diagnostics[&#39;eq_magnitude&#39;] = abs(u_eq) diagnostics[&#39;robust_magnitude&#39;] = abs(u_robust) diagnostics[&#39;eq_dominant&#39;] = abs(u_eq) &gt; abs(u_robust) # Saturation checks diagnostics[&#39;control_saturated&#39;] = abs(result.control) &gt;= controller.max_force * 0.99 diagnostics[&#39;eq_saturated&#39;] = abs(u_eq) &gt;= 5.0 * controller.max_force * 0.99 return diagnostics</span>

<span class="err">```</span> <span class="c1">#### 2.2 Parameter Validation ```python</span>
<span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false def validate_classical_parameters(gains, config): &quot;&quot;&quot;Validate classical SMC parameters for stability.&quot;&quot;&quot; k1, k2, lam1, lam2, K, kd = gains checks = { &#39;positive_gains&#39;: all(g &gt; 0 for g in [k1, k2, lam1, lam2, K]), &#39;nonneg_damping&#39;: kd &gt;= 0, &#39;hurwitz_1&#39;: k1**2 &gt;= 4*lam1, # Critically damped or overdamped &#39;hurwitz_2&#39;: k2**2 &gt;= 4*lam2, &#39;switching_adequate&#39;: K &gt; 20, # Typical disturbance bound &#39;boundary_positive&#39;: config.boundary_layer &gt; 0, } if not all(checks.values()): failed = [k for k, v in checks.items() if not v] print(f&quot;WARNING: Parameter validation failed: {failed}&quot;) return False return True</span>
<span class="err">```</span> <span class="c1">#### 2.3 Performance Profiling ```python</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">time</span> <span class="k">def</span><span class="w"> </span><span class="nf">profile_classical_smc</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span> <span class="s2">&quot;&quot;&quot;Profile computational cost of control law.&quot;&quot;&quot;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">time</span> <span class="n">timings</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># Sliding surface t0 = time.perf_counter() sigma = controller._compute_sliding_surface(state) timings[&#39;sliding_surface&#39;] = (time.perf_counter() - t0) * 1e6 # Î¼s # Equivalent control t0 = time.perf_counter() u_eq = controller._compute_equivalent_control(state) timings[&#39;equivalent_control&#39;] = (time.perf_counter() - t0) * 1e6 # Full control t0 = time.perf_counter() result = controller.compute_control(state, (), {}) timings[&#39;total&#39;] = (time.perf_counter() - t0) * 1e6 return timings</span>
<span class="err">```</span> <span class="c1">### 3. Performance Optimization Tips **For Real-Time Applications**:</span>
<span class="mf">1.</span> <span class="n">Disable</span> <span class="n">equivalent</span> <span class="n">control</span> <span class="k">if</span> <span class="n">dynamics</span> <span class="n">model</span> <span class="n">unavailable</span> <span class="p">(</span><span class="err">`</span><span class="n">dynamics_model</span><span class="o">=</span><span class="kc">None</span><span class="err">`</span><span class="p">)</span>
<span class="mf">2.</span> <span class="n">Use</span> <span class="n">linear</span> <span class="n">saturation</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">tanh</span> <span class="p">(</span><span class="n">faster</span> <span class="n">computation</span><span class="p">)</span>
<span class="mf">3.</span> <span class="n">Pre</span><span class="o">-</span><span class="n">allocate</span> <span class="n">history</span> <span class="n">dictionaries</span>
<span class="mf">4.</span> <span class="n">Use</span> <span class="n">larger</span> <span class="n">dt</span> <span class="p">(</span><span class="mf">0.01</span><span class="n">s</span> <span class="n">vs</span> <span class="mf">0.001</span><span class="n">s</span><span class="p">)</span> <span class="k">if</span> <span class="n">feasible</span> <span class="o">**</span><span class="n">For</span> <span class="n">PSO</span> <span class="n">Optimization</span><span class="o">**</span><span class="p">:</span>
<span class="mf">1.</span> <span class="n">Start</span> <span class="k">with</span> <span class="n">wide</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">narrow</span> <span class="n">after</span> <span class="n">initial</span> <span class="n">convergence</span>
<span class="mf">2.</span> <span class="n">Use</span> <span class="mi">30</span><span class="o">-</span><span class="mi">50</span> <span class="n">particles</span> <span class="k">for</span> <span class="mi">6</span> <span class="n">gains</span>
<span class="mf">3.</span> <span class="n">Run</span> <span class="mi">200</span><span class="o">-</span><span class="mi">500</span> <span class="n">iterations</span> <span class="k">for</span> <span class="n">convergence</span>
<span class="mf">4.</span> <span class="n">Validate</span> <span class="n">best</span> <span class="n">gains</span> <span class="n">before</span> <span class="n">final</span> <span class="n">acceptance</span> <span class="o">**</span><span class="n">For</span> <span class="n">Chattering</span> <span class="n">Reduction</span><span class="o">**</span><span class="p">:</span>
<span class="mf">1.</span> <span class="n">Priority</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Increase</span> <span class="n">boundary</span> <span class="n">layer</span> <span class="n">Îµ</span>
<span class="mf">2.</span> <span class="n">Priority</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Add</span> <span class="n">hysteresis</span>
<span class="mf">3.</span> <span class="n">Priority</span> <span class="mi">3</span><span class="p">:</span> <span class="n">Use</span> <span class="n">adaptive</span> <span class="n">boundary</span> <span class="n">layer</span>
<span class="mf">4.</span> <span class="n">Last</span> <span class="n">resort</span><span class="p">:</span> <span class="n">Switch</span> <span class="n">to</span> <span class="n">STA</span> <span class="n">SMC</span>

<span class="o">---</span>

<span class="c1">## References ### Primary Documentation [1] [Complete SMC Theory](../mathematical_foundations/smc_complete_theory.md) - mathematical foundations for all SMC variants [2] [Controller Comparison Theory](../mathematical_foundations/controller_comparison_theory.md) - Decision support for controller selection [3] [Hybrid SMC Technical Guide](hybrid_smc_technical_guide.md) - Implementation guide for hybrid controller ### Control Theory References [4] **Slotine, J.-J.E. and Li, W.** (1991). &quot;Applied Nonlinear Control&quot;. Prentice Hall. ISBN: 0-13-040890-5 [5] **Utkin, V.I.** (1992). &quot;Sliding Modes in Control and Optimization&quot;. Springer-Verlag. doi: 10.1007/978-3-642-84379-2 [6] **Edwards, C. and Spurgeon, S.K.** (1998). &quot;Sliding Mode Control: Theory and Applications&quot;. CRC Press. ISBN: 978-0748406012 [7] **Young, K.D., Utkin, V.I., and Ã–zgÃ¼ner, Ãœ.** (1999). &quot;A control engineer&#39;s guide to sliding mode control&quot;. IEEE Transactions on Control Systems Technology, 7(3):328-342. ### Implementation References [8] **Burton, J.A. and Zinober, A.S.I.** (1986). &quot;Continuous approximation of variable structure control&quot;. International Journal of Systems Science, 17(6):875-885. [9] Source Code: `src/controllers/smc/classic_smc.py`</span>

<span class="o">---</span>

<span class="o">**</span><span class="n">Document</span> <span class="n">Control</span><span class="o">**</span><span class="p">:</span>
<span class="o">-</span> <span class="o">**</span><span class="n">Author</span><span class="o">**</span><span class="p">:</span> <span class="n">Documentation</span> <span class="n">Expert</span> <span class="n">Agent</span>
<span class="o">-</span> <span class="o">**</span><span class="n">Technical</span> <span class="n">Review</span><span class="o">**</span><span class="p">:</span> <span class="n">Control</span> <span class="n">Systems</span> <span class="n">Specialist</span>
<span class="o">-</span> <span class="o">**</span><span class="n">Code</span> <span class="n">Validation</span><span class="o">**</span><span class="p">:</span> <span class="n">Integration</span> <span class="n">Coordinator</span>
<span class="o">-</span> <span class="o">**</span><span class="n">Final</span> <span class="n">Approval</span><span class="o">**</span><span class="p">:</span> <span class="n">Ultimate</span> <span class="n">Orchestrator</span>
<span class="o">-</span> <span class="o">**</span><span class="n">Version</span> <span class="n">Control</span><span class="o">**</span><span class="p">:</span> <span class="n">Managed</span> <span class="n">via</span> <span class="n">Git</span> <span class="n">repository</span>
<span class="o">-</span> <span class="o">**</span><span class="n">Next</span> <span class="n">Review</span><span class="o">**</span><span class="p">:</span> <span class="mi">2025</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">04</span> <span class="o">**</span><span class="n">Classification</span><span class="o">**</span><span class="p">:</span> <span class="n">Technical</span> <span class="n">Implementation</span> <span class="n">Guide</span> <span class="o">-</span> <span class="n">Distribution</span> <span class="n">Controlled</span>
</pre></div>
</div>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Research Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Oct 10, 2025</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=4ebf8126"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=08e7b316"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/back-to-top.js?v=840797bb"></script>
    <script src="../_static/lazy-load.js?v=dc25293c"></script>
    <script src="../_static/dark-mode.js?v=bf328970"></script>
    </body>
</html>