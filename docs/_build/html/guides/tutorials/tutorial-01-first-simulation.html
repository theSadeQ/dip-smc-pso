<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
.chartjs-container {
    margin: 1.5em auto;
    padding: 1em;
    background: #f8f9fa;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.chart-note {
    text-align: center;
    color: #6c757d;
    font-size: 0.9em;
    margin-top: 0.5em;
}
</style>
<link rel="index" title="Index" href="../../genindex.html"><link rel="search" title="Search" href="../../search.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Tutorial 01: Your First Simulation Level: Beginner - DIP_SMC_PSO Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=5349f25f" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=8a7e329d" />
    
    


<style>
  body {
    --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">DIP_SMC_PSO Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <span class="sidebar-brand-text">DIP_SMC_PSO Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">📚 Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Optimal Sliding Mode Control for a Double-Inverted Pendulum via PSO  ## How to validate a ResearchPlan JSON Run the validator locally: ```bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../theory_overview.html">Theory Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture.html">3. System Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plant_model.html">1.x Plant Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hil_quickstart.html">Hardware-in-the-Loop (HIL) Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../streamlit_dashboard_guide.html">Streamlit Dashboard User Guide</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/theSadeQ/DIP_SMC_PSO/blob/main/docs/guides/tutorials/tutorial-01-first-simulation.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/theSadeQ/DIP_SMC_PSO/edit/main/docs/guides/tutorials/tutorial-01-first-simulation.md" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section class="tex2jax_ignore mathjax_ignore" id="tutorial-01-your-first-simulation-level-beginner">
<h1>Tutorial 01: Your First Simulation <strong>Level:</strong> Beginner<a class="headerlink" href="#tutorial-01-your-first-simulation-level-beginner" title="Link to this heading">¶</a></h1>
<p><strong>Duration:</strong> 30-45 minutes
<strong>Prerequisites:</strong> Completed <a class="reference internal" href="../getting-started.html"><span class="std std-doc">Getting Started Guide</span></a> ## Learning Objectives By the end of this tutorial, you will: - [ ] Understand the double-inverted pendulum (DIP) control problem</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Run simulations with the Classical SMC controller</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Interpret simulation results and performance metrics</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Modify controller parameters and observe effects</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Understand the role of initial conditions</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Gain intuition for SMC control behavior</p></li>
</ul>
<hr class="docutils" />
<section id="background-the-double-inverted-pendulum-system-description-the-double-inverted-pendulum-dip-is-a-classic-benchmark-problem-in-control-theory-it-consists-of-physical-components">
<h2>Background: The Double-Inverted Pendulum ### System Description The double-inverted pendulum (DIP) is a classic benchmark problem in control theory. It consists of: <strong>Physical Components:</strong><a class="headerlink" href="#background-the-double-inverted-pendulum-system-description-the-double-inverted-pendulum-dip-is-a-classic-benchmark-problem-in-control-theory-it-consists-of-physical-components" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Cart:</strong> Moves horizontally on a frictionless track</p></li>
<li><p><strong>First Pendulum:</strong> Attached to cart, free to rotate</p></li>
<li><p><strong>Second Pendulum:</strong> Attached to tip of first pendulum</p></li>
<li><p><strong>Actuator:</strong> Applies horizontal force to cart <strong>Control Objective:</strong>
Stabilize both pendulums in the upright position (vertical) while regulating the cart’s position, using only horizontal force on the cart. <strong>Why is this challenging?</strong> 1. <strong>Underactuated System:</strong> One control input (cart force) but three degrees of freedom (cart position + 2 pendulum angles)</p></li>
</ul>
<ol class="arabic simple" start="2">
<li><p><strong>Unstable Equilibrium:</strong> Upright position is naturally unstable (like balancing a broomstick on your hand)</p></li>
<li><p><strong>Nonlinear Dynamics:</strong> Equations of motion include sin/cos terms and coupling effects</p></li>
<li><p><strong>Coupled Motion:</strong> Moving the cart affects both pendulums; pendulum motion affects cart ### State Variables The system is described by 6 state variables: ```python
state = [x, dx, θ₁, dθ₁, θ₂, dθ₂]</p></li>
</ol>
<div class="highlight-| notranslate"><div class="highlight"><pre><span></span>|----------|-------------|-------|---------------|
| `x` | Cart position | m | ±2.0 |
| `dx` | Cart velocity | m/s | ±3.0 |
| `θ₁` | First pendulum angle from vertical | rad | ±π |
| `dθ₁` | First pendulum angular velocity | rad/s | ±10 |
| `θ₂` | Second pendulum angle from vertical | rad | ±π |
| `dθ₂` | Second pendulum angular velocity | rad/s | ±10 | **Sign Conventions:**
- Positive `x`: Cart to the right
- Positive `θ₁`, `θ₂`: Pendulums tilted to the right (clockwise from vertical)
- Vertical upright: `θ₁ = θ₂ = 0` ### Physical Parameters The default configuration uses realistic parameters: ```yaml
# config.yaml - dip_params section
m0: 1.0 # Cart mass (kg)
m1: 0.1 # First pendulum mass (kg)
m2: 0.1 # Second pendulum mass (kg)
l1: 0.5 # First pendulum length (m)
l2: 0.5 # Second pendulum length (m)
I1: 0.0083 # First pendulum inertia (kg·m²)
I2: 0.0083 # Second pendulum inertia (kg·m²)
g: 9.81 # Gravitational acceleration (m/s²)
``` **Total Height:** 1.0 m (both pendulums vertical)

**Total Mass:** 1.2 kg (cart + both pendulums) ### Classical SMC Overview Sliding Mode Control (SMC) is a nonlinear control technique that: 1. **Defines a Sliding Surface:** A function of state errors ``` s = k₁·θ₁ + k₂·dθ₁ + λ₁·θ₂ + λ₂·dθ₂ ``` 2. **Drives System to Surface:** Control law forces `s → 0` ``` u = -K·sign(s) or u = -K·tanh(s/ε) (smoothed) ``` 3. **Maintains on Surface:** Once on surface, system slides to equilibrium **Key Properties:**
- **Robustness:** Insensitive to model uncertainties and disturbances
- **Finite-Time Convergence:** Reaches sliding surface in finite time
- **Chattering:** High-frequency switching (mitigated by boundary layer ε) &gt; **📚 Deep Dive:** For detailed mathematical foundations, see:
&gt; - [DIP Dynamics Theory](../theory/dip-dynamics.md) - Lagrangian derivation and controllability
&gt; - [SMC Theory](../theory/smc-theory.md) - Lyapunov stability and sliding mode principles

---

## Step-by-Step Simulation ### Step 1: Verify Installation Before starting, ensure the framework is properly installed: ```bash

# Check you&#39;re in the project directory

pwd
# Should show: .../dip-smc-pso # Activate virtual environment (if using one)

source venv/bin/activate # Linux/Mac
venv\Scripts\activate # Windows # Verify Python and dependencies
python -c &quot;import numpy, matplotlib, yaml; print(&#39;Dependencies OK&#39;)&quot;
``` **Expected output:** `Dependencies OK` If you see errors, return to the [Getting Started Guide](../getting-started.md#installation). ### Step 2: Understand Default Configuration Print the current configuration to see what parameters will be used: ```bash
python simulate.py --print-config
``` **Key sections to review:** **Controller Defaults:**

```yaml
controller_defaults: classical_smc: gains: - 5.0 # k₁: First pendulum proportional gain - 5.0 # k₂: First pendulum derivative gain - 5.0 # λ₁: Second pendulum proportional gain - 0.5 # λ₂: Second pendulum derivative gain - 0.5 # K: Switching gain - 0.5 # ε: Boundary layer width
``` **Controller Configuration:**

```yaml
controllers: classical_smc: max_force: 150.0 # Actuator saturation limit (N) boundary_layer: 0.3 # Boundary layer for chattering reduction dt: 0.001 # Control timestep (s)
``` **Simulation Settings:**

```yaml
simulation: duration: 5.0 # Simulation time (seconds) dt: 0.001 # Integration timestep (seconds) initial_state: # Starting condition - 0.1 # x = 0.1 m (cart displaced right) - 0.0 # dx = 0 m/s - 0.0 # θ₁ = 0 rad (upright) - 0.0 # dθ₁ = 0 rad/s - 0.0 # θ₂ = 0 rad (upright) - 0.0 # dθ₂ = 0 rad/s
``` **Physics Parameters:** (see `dip_params` section) ### Step 3: Run First Simulation Execute the simulation with Classical SMC: ```bash

python simulate.py --controller classical_smc --plot
``` **What&#39;s happening:** 1. **Configuration Loading** (0.1s) - Reads `config.yaml` - Validates all parameters - Seeds random number generator (for reproducibility) 2. **Controller Creation** (0.01s) - Instantiates `ClassicalSMC` with default gains - Sets saturation limit and boundary layer 3. **Dynamics Model Initialization** (0.01s) - Creates simplified nonlinear dynamics model - Precomputes mass matrix and Coriolis terms 4. **Simulation Loop** (1-3s) - 5,000 integration steps (5.0s / 0.001s) - At each step: * Controller computes force `u` from current state * Dynamics integrates equations of motion * State updated and logged 5. **Post-Processing** (0.5s) - Computes performance metrics - Generates plots **Expected terminal output:** ```
INFO:root:Provenance configured: commit=&lt;hash&gt;, cfg_hash=&lt;hash&gt;, seed=0
D:\Projects\main\src\plant\core\state_validation.py:171: UserWarning: State vector was modified during sanitization warnings.warn(&quot;State vector was modified during sanitization&quot;, UserWarning)
``` **Note:** The simulation runs with minimal terminal output. The provenance line confirms the simulation configuration is tracked for reproducibility. The state sanitization warning is normal and indicates the simulator is ensuring numerical stability. **⏱️ Total Time:** ~10-15 seconds (includes initialization and plotting) ### Step 4: Interpret Results Two plot windows will appear. analyze each carefully. #### Plot 1: State Trajectories Six subplots showing the evolution of all state variables: **Subplot 1: Cart Position `x(t)`**

- **Initial value:** 0.1 m (displaced right)
- **Behavior:** Slight oscillation, then settles near 0.1 m
- **Why not zero?** Steady-state regulation error due to pendulum stabilization priority **Subplot 2: Cart Velocity `dx(t)`**
- **Initial value:** 0 m/s
- **Behavior:** Oscillates initially, converges to ~0 m/s
- **Peak:** ~0.3 m/s during transient **Subplot 3: First Pendulum Angle `θ₁(t)`**
- **Initial value:** 0 rad (upright)
- **Behavior:** Remains near zero (pendulums start stable)
- **Observation:** Small oscillations (~±0.02 rad) due to cart motion coupling **Subplot 4: First Pendulum Velocity `dθ₁(t)`**
- **Initial value:** 0 rad/s
- **Behavior:** Small oscillations, settles to zero
- **Peak:** ~±1.0 rad/s during transient **Subplot 5: Second Pendulum Angle `θ₂(t)`**
- **Initial value:** 0 rad (upright)
- **Behavior:** Similar to θ₁, stays near zero
- **Coupling:** Notice correlation with θ₁ motion **Subplot 6: Second Pendulum Velocity `dθ₂(t)`**
- **Initial value:** 0 rad/s
- **Behavior:** Oscillates, converges to zero
- **Peak:** ~±1.5 rad/s (higher than θ₁ due to being farther from pivot) **Key Observations:**
1. **Transient phase:** 0-2.5 seconds (oscillations)
2. **Steady state:** 2.5-5.0 seconds (stable, small residual oscillations)
3. **Coupling:** Cart motion induces pendulum oscillations
4. **Stability:** All variables bounded and converging #### Plot 2: Control Input `u(t)` Single plot showing the force applied to the cart: **Time Regions:** **0-0.5s: Initial Response**
- Large force spike: ~40 N
- Direction: Negative (pushing cart left to counter displacement)
- Purpose: Rapid correction of initial perturbation **0.5-2.5s: Active Stabilization**
- Oscillating force: ±20 N
- Frequency: ~2-3 Hz
- Purpose: Balancing pendulums while controlling cart **2.5-5.0s: Steady-State Regulation**
- Small forces: ±5 N
- Purpose: Disturbance rejection and fine regulation
- Observation: Some chattering visible (rapid small oscillations) **Saturation:**
- Max force: ~45 N
- Limit: ±150 N
- Utilization: 30% of available control authority **Chattering:**
- Visible as high-frequency oscillation (~50-100 Hz)
- Magnitude: ~±2 N in steady state
- Mitigation: Boundary layer (ε=0.3) smooths control law #### Performance Metrics Deep Dive **Settling Time: 2.45 seconds** *Definition:* Time until all state variables remain within 2% of their final values. *Computation:*
```python
# For each state variable:
final_value = x[-1]
threshold = 0.02 * abs(final_value)
settling_idx = np.where(abs(x - final_value) &gt; threshold)[0]
settling_time = t[settling_idx[-1]] if len(settling_idx) &gt; 0 else 0
``` *Interpretation:*

- 2.45s is moderate (neither fast nor slow)
- Acceptable for many applications
- Depends on: gains, initial conditions, system inertia **Max Overshoot: 3.2%** *Definition:* Maximum percentage deviation beyond final value. *Computation:*
```python
# For first pendulum angle θ₁:
final_angle = theta1[-1] # ~0 rad
peak_angle = np.max(np.abs(theta1))
overshoot = (peak_angle - abs(final_angle)) / abs(final_angle) * 100
``` *Interpretation:*

- 3.2% is (target: &lt;5%)
- Indicates good damping
- Well-tuned controller (not too aggressive) **Steady-State Error: 0.008 rad (0.46°)** *Definition:* Final tracking error after settling. *Computation:*
```python
# Average error in last 20% of simulation
steady_state_region = x[int(0.8*len(x)):]
steady_state_error = np.mean(np.abs(steady_state_region - desired_state))
``` *Interpretation:*

- 0.008 rad is very good (&lt;1°)
- Sources: friction, model mismatch, discretization
- Acceptable for most control applications **RMS Control Effort: 12.4 N** *Definition:* Root-mean-square of control input over time. *Computation:*
```python
rms_control = np.sqrt(np.mean(u**2))
``` *Interpretation:*

- 12.4 N is moderate
- Much less than saturation limit (150 N)
- Indicates energy-efficient control
- Actuator wear is low #### Expected Results Summary **Typical Performance Ranges** (Default Configuration) | Metric | Expected Range | Interpretation |
|--------|----------------|----------------|
| **Settling Time** | 2.0-3.0 seconds | Time to stabilize both pendulums |
| **Max Overshoot** | 2-5% | Peak deviation from equilibrium |
| **Steady-State Error** | 0.005-0.01 rad | Final angular error (~0.3-0.6°) |
| **Peak Control** | 40-60 N | Maximum force during transient |
| **RMS Control** | 10-15 N | Average control effort |
| **Saturation Events** | 0-2% | Percentage of time at limits | **Visual Behavior Pattern**: ```mermaid
flowchart LR subgraph &quot;Simulation Timeline (0-5 seconds)&quot; direction TB PHASE1[&quot;Phase 1: Initial Response&lt;br/&gt;0-0.5s&lt;br/&gt;⚡ Large control spike&lt;br/&gt;📊 Rapid state change&quot;] PHASE2[&quot;Phase 2: Active Stabilization&lt;br/&gt;0.5-2.5s&lt;br/&gt;🔄 Oscillating control&lt;br/&gt;📉 Decreasing amplitude&quot;] PHASE3[&quot;Phase 3: Steady State&lt;br/&gt;2.5-5.0s&lt;br/&gt;✅ Small corrections&lt;br/&gt;🎯 Near equilibrium&quot;] end PHASE1 --&gt; PHASE2 PHASE2 --&gt; PHASE3 style PHASE1 fill:#ffcccc style PHASE2 fill:#ffffcc style PHASE3 fill:#ccffcc
``` **Phase Characteristics**: - 🔴 **Phase 1** (Initial Response): Large control action, rapid state change, peak forces
- 🟡 **Phase 2** (Active Stabilization): Oscillatory behavior, gradually decreasing amplitude
- 🟢 **Phase 3** (Steady State): Minimal oscillations, small control effort, convergence achieved **Good Results Checklist**:
- ✅ All state variables bounded (no divergence)
- ✅ Control input stays within ±150 N (no saturation)
- ✅ Settling time &lt; 3 seconds
- ✅ Overshoot &lt; 5%
- ✅ Steady-state error &lt; 1°
- ✅ Smooth convergence (no instability) **Warning Signs** (Results requiring investigation):
- ❌ States diverging to ±∞
- ❌ Settling time &gt; 5 seconds
- ❌ Overshoot &gt; 20%
- ❌ Control saturated &gt; 10% of time
- ❌ Persistent high-frequency chattering

---

## Understanding Control Behavior ### The Sliding Surface The classical SMC uses a sliding surface defined by: ```
s = k₁·θ₁ + k₂·dθ₁ + λ₁·θ₂ + λ₂·dθ₂
``` With default gains: `k₁=5, k₂=5, λ₁=5, λ₂=0.5` **What does this mean?** - When `s = 0`, the system is on the sliding surface

- Controller drives system to make `s → 0`
- Once on surface, pendulum angles converge to zero **Visualize the sliding surface:**
```python
# Compute sliding surface value
s = 5.0*theta1 + 5.0*dtheta1 + 5.0*theta2 + 0.5*dtheta2 # Plot sliding surface over time
plt.plot(t, s)
plt.xlabel(&#39;Time (s)&#39;)
plt.ylabel(&#39;Sliding Surface s&#39;)
plt.title(&#39;Sliding Surface Evolution&#39;)
plt.grid(True)
plt.show()
``` **Expected behavior:**

- Initial spike: |s| ~ 2-3 (far from surface)
- Reaching phase: Exponential decay toward zero (0-1 s)
- Sliding phase: Oscillations around zero (1-5 s)
- Magnitude in steady state: |s| &lt; 0.1 ### Control Law Breakdown The control force is computed as: ```python
u = -K · tanh(s / ε)
``` Where:
- `K = 0.5`: Switching gain (control authority)
- `ε = 0.3`: Boundary layer width (chattering reduction)
- `tanh()`: Smooth approximation to sign() function **Without boundary layer (ε → 0):**
</pre></div>
</div>
<p>u = -K · sign(s) # Pure switching (causes chattering)</p>
<div class="highlight-**With notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>u = -K · tanh(s / ε) # Smooth transition (reduces chattering)</p>
<div class="highlight-**Boundary notranslate"><div class="highlight"><pre><span></span>- When |s| &gt; ε: Control ≈ ±K (full control)
- When |s| &lt; ε: Control proportional to s (smooth transition)
- Larger ε: Less chattering, but more tracking error
- Smaller ε: Better tracking, but more chattering

---

## Experiment: Modify Parameters ### Experiment 1: Change Initial Conditions Edit `config.yaml`: ```yaml
simulation: initial_state: [0.0, 0.0, 0.15, 0.0, 0.0, 0.0] # First pendulum tilted 0.15 rad (8.6°) to the right
``` Run simulation:

```bash
python simulate.py --controller classical_smc --plot
``` **Expected changes:**

- Larger pendulum oscillations
- Longer settling time (~3.0s)
- Higher control effort (~18 N RMS)
- Overshoot may increase to ~6-8% **Why?** Larger initial perturbation requires more aggressive control response. ### Experiment 2: Increase Controller Gains Edit `config.yaml`: ```yaml
controller_defaults: classical_smc: gains: - 10.0 # k₁ (was 5.0) - 10.0 # k₂ (was 5.0) - 10.0 # λ₁ (was 5.0) - 1.0 # λ₂ (was 0.5) - 1.0 # K (was 0.5) - 0.5 # ε (unchanged)
``` Run simulation:
```bash

python simulate.py --controller classical_smc --plot
``` **Expected changes:**
- ✅ Faster settling time (~1.8s)
- ❌ Higher overshoot (~8-10%)
- ❌ More chattering visible
- ❌ Higher control effort (~25 N RMS) **Trade-off:** Speed vs smoothness ### Experiment 3: Wider Boundary Layer Edit `config.yaml`: ```yaml
controllers: classical_smc: boundary_layer: 1.0 # Increased from 0.3
``` Run simulation:

```bash
python simulate.py --controller classical_smc --plot
``` **Expected changes:**

- ✅ Much less chattering (smoother control)
- ❌ Larger steady-state error (~0.02 rad)
- ≈ Similar settling time **Trade-off:** Smoothness vs accuracy ### Experiment 4: Moving Cart Initial Condition Edit `config.yaml`: ```yaml
simulation: initial_state: [0.0, 1.0, 0.05, 0.0, -0.05, 0.0] # Cart moving at 1.0 m/s, pendulums slightly perturbed
``` Run simulation:
```bash

python simulate.py --controller classical_smc --plot
``` **Expected changes:**
- Large initial cart velocity requires strong braking force
- Peak control may reach ~60-80 N
- Pendulums oscillate more due to cart deceleration
- Settling time may increase to ~3.5s **Observation:** Controller handles moving initial conditions well.

---

## Common Issues and approaches ### Issue 1: Simulation Diverges (State Variables Explode) **Symptoms:** Angles grow to ±π, velocities increase without bound **Causes:**
- Gains too low (insufficient control authority)
- Timestep too large (numerical instability)
- Initial condition too far from equilibrium **Solutions:**
1. Increase gains (try doubling all gains)
2. Decrease timestep: `dt: 0.0005`
3. Reduce initial perturbation
4. Check for typos in configuration ### Issue 2: Excessive Chattering **Symptoms:** Control input oscillates rapidly (100+ Hz), loud in plots **Causes:**
- Boundary layer too small
- Switching gain too high
- Using `sign()` instead of `tanh()` **Solutions:**
1. Increase boundary layer: `boundary_layer: 0.5` or higher
2. Reduce switching gain K
3. Verify smooth switching is enabled ### Issue 3: Slow Convergence **Symptoms:** Settling time &gt; 5 seconds, system still oscillating at t=5s **Causes:**
- Gains too low
- System heavily damped (not typical for DIP) **Solutions:**
1. Increase proportional gains (k₁, λ₁)
2. Increase derivative gains (k₂, λ₂)
3. Check physical parameters are correct ### Issue 4: High Overshoot **Symptoms:** Overshoot &gt; 20%, large oscillations **Causes:**
- Gains too high (too aggressive)
- Insufficient damping **Solutions:**
1. Reduce proportional gains slightly
2. Increase derivative gains (improve damping)
3. Follow PSO optimization (Tutorial 03)

---

## Next Steps **Congratulations!** You&#39;ve completed your first simulation tutorial. ### What You&#39;ve Learned ✅ The double-inverted pendulum control problem
✅ How to run simulations with Classical SMC
✅ Interpreting state trajectories and control inputs
✅ Understanding performance metrics
✅ Modifying parameters and observing effects
✅ Troubleshooting common issues ### Continue Learning **Next Tutorial:** [Tutorial 02: Controller Comparison](tutorial-02-controller-comparison.md)
- Compare all 4 SMC controller types side-by-side
- Quantitative performance analysis
- Learn when to use each controller **Related Guides:**
- [User Guide](../user-guide.md): workflows
- [Running Simulations How-To](../how-to/running-simulations.md): CLI, Streamlit, and API usage
- [Simulation API](../api/simulation.md): Implementation details **Theory &amp; Foundations:**
- [DIP Dynamics Theory](../theory/dip-dynamics.md): Understand the physics and mathematics
- [SMC Theory](../theory/smc-theory.md): Deep dive into sliding mode control **Advanced Topics:**
- [Tutorial 03: PSO Optimization](tutorial-03-pso-optimization.md): Automatic gain tuning
- [Tutorial 04: Custom Controllers](tutorial-04-custom-controller.md): Build your own
- [Tutorial 05: Research Workflows](tutorial-05-research-workflow.md): Publication-ready results

---

## Practice Exercises Test your understanding with these exercises: **Exercise 1: Find Optimal Gains**
Manually tune gains to achieve:
- Settling time &lt; 2.0s
- Overshoot &lt; 3%
- Steady-state error &lt; 0.01 rad **Exercise 2: Robustness Test**
Run simulations with 10 different random initial conditions:
```python
# Random initial angles: ±0.2 rad

initial_conditions = np.random.uniform( low=[0, 0, -0.2, 0, -0.2, 0], high=[0, 0, 0.2, 0, 0.2, 0], size=(10, 6)
)
</pre></div>
</div>
<p>Do all simulations succeed? <strong>Exercise 3: Saturation Analysis</strong>
What is the maximum initial perturbation before control saturates?
Try increasing initial angles until peak control reaches 150 N. <strong>Exercise 4: Settling Time vs Boundary Layer</strong>
Plot settling time as a function of boundary layer width (ε = 0.1, 0.3, 0.5, 1.0, 2.0).
Is there an optimal value?</p>
<hr class="docutils" />
<p><strong>Ready for more?</strong> Proceed to <a class="reference internal" href="tutorial-02-controller-comparison.html"><span class="std std-doc">Tutorial 02: Controller Comparison</span></a> to see how Classical SMC compares to Super-Twisting, Adaptive, and Hybrid controllers!</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Research Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Oct 10, 2025</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Tutorial 01: Your First Simulation <strong>Level:</strong> Beginner</a><ul>
<li><a class="reference internal" href="#background-the-double-inverted-pendulum-system-description-the-double-inverted-pendulum-dip-is-a-classic-benchmark-problem-in-control-theory-it-consists-of-physical-components">Background: The Double-Inverted Pendulum ### System Description The double-inverted pendulum (DIP) is a classic benchmark problem in control theory. It consists of: <strong>Physical Components:</strong></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=4ebf8126"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=08e7b316"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../_static/back-to-top.js?v=840797bb"></script>
    <script src="../../_static/lazy-load.js?v=dc25293c"></script>
    <script src="../../_static/dark-mode.js?v=bf328970"></script>
    </body>
</html>