<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
.chartjs-container {
    margin: 1.5em auto;
    padding: 1em;
    background: #f8f9fa;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.chart-note {
    text-align: center;
    color: #6c757d;
    font-size: 0.9em;
    margin-top: 0.5em;
}
</style>
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2024.08.06 -->
        <title>Factory System API Reference - DIP_SMC_PSO Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5349f25f" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=f5a89ef9" />
    
    


<style>
  body {
    --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">DIP_SMC_PSO Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">DIP_SMC_PSO Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">📚 Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Optimal Sliding Mode Control for a Double-Inverted Pendulum via PSO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory_overview.html">1. Theoretical Background â€” Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">3. System Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plant_model.html">1.x Plant Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hil_quickstart.html">Hardware-in-the-Loop (HIL) Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../streamlit_dashboard_guide.html">Streamlit Dashboard User Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">🎮 Control Systems &amp; Optimization</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../controllers/index.html">Controllers Module Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Controllers Module Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../controllers/classical_smc_technical_guide.html">Classical Sliding Mode Control Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/adaptive_smc_technical_guide.html">Adaptive Sliding Mode Control Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/sta_smc_technical_guide.html">Super-Twisting Sliding Mode Control Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/hybrid_smc_technical_guide.html">Hybrid Adaptive Super-Twisting SMC Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/mpc_technical_guide.html">Model Predictive Control Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/swing_up_smc_technical_guide.html">Swing-Up SMC Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/swing_up_smc_technical_guide.html#example-metadata">example-metadata:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/swing_up_smc_technical_guide.html#runnable-false">runnable: false</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/factory_system_guide.html">SMC Controller Factory System Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/control_primitives_reference.html">Control Primitives Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mathematical_foundations/smc_complete_theory.html">Complete Sliding Mode Control Mathematical Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mathematical_foundations/controller_comparison_theory.html">SMC Controller Comparison Theory</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/controllers/index.html">Controllers Module</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Controllers Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/adaptive_smc.html">controllers.adaptive_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/classic_smc.html">controllers.classic_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory.html">controllers.factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/mpc_controller.html">controllers.mpc_controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/sta_smc.html">controllers.sta_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/swing_up_smc.html">controllers.swing_up_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/__init__.html">controllers.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/base_controller_interface.html">controllers.base.controller_interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/base_control_primitives.html">controllers.base.control_primitives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/base___init__.html">controllers.base.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_deprecation.html">controllers.factory.deprecation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_fallback_configs.html">controllers.factory.fallback_configs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_legacy_factory.html">controllers.factory.legacy_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_optimization.html">controllers.factory.optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_pso_integration.html">controllers.factory.pso_integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_smc_factory.html">controllers.factory.smc_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_thread_safety.html">controllers.factory.thread_safety</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory___init__.html">controllers.factory.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/mpc_mpc_controller.html">controllers.mpc.mpc_controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/mpc___init__.html">controllers.mpc.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_adaptive_smc.html">controllers.smc.adaptive_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_classic_smc.html">controllers.smc.classic_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_hybrid_adaptive_sta_smc.html">controllers.smc.hybrid_adaptive_sta_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_sta_smc.html">controllers.smc.sta_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc___init__.html">controllers.smc.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/specialized_swing_up_smc.html">controllers.specialized.swing_up_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/specialized___init__.html">controllers.specialized.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_core_protocols.html">controllers.factory.core.protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_core_registry.html">controllers.factory.core.registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_core_threading.html">controllers.factory.core.threading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_core_validation.html">controllers.factory.core.validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_core___init__.html">controllers.factory.core.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms___init__.html">controllers.smc.algorithms.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_core_equivalent_control.html">controllers.smc.core.equivalent_control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_core_gain_validation.html">controllers.smc.core.gain_validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_core_sliding_surface.html">controllers.smc.core.sliding_surface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_core_switching_functions.html">controllers.smc.core.switching_functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_core___init__.html">controllers.smc.core.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_adaptation_law.html">controllers.smc.algorithms.adaptive.adaptation_law</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_config.html">controllers.smc.algorithms.adaptive.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_controller.html">controllers.smc.algorithms.adaptive.controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_parameter_estimation.html">controllers.smc.algorithms.adaptive.parameter_estimation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive___init__.html">controllers.smc.algorithms.adaptive.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_boundary_layer.html">controllers.smc.algorithms.classical.boundary_layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_config.html">controllers.smc.algorithms.classical.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_controller.html">controllers.smc.algorithms.classical.controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical___init__.html">controllers.smc.algorithms.classical.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_config.html">controllers.smc.algorithms.hybrid.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_controller.html">controllers.smc.algorithms.hybrid.controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_switching_logic.html">controllers.smc.algorithms.hybrid.switching_logic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid___init__.html">controllers.smc.algorithms.hybrid.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_config.html">controllers.smc.algorithms.super_twisting.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_controller.html">controllers.smc.algorithms.super_twisting.controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_twisting_algorithm.html">controllers.smc.algorithms.super_twisting.twisting_algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting___init__.html">controllers.smc.algorithms.super_twisting.<strong>init</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../mathematical_foundations/index.html">Mathematical Foundations</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Mathematical Foundations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../mathematical_foundations/smc_complete_theory.html">Complete Sliding Mode Control Mathematical Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mathematical_foundations/controller_comparison_theory.html">SMC Controller Comparison Theory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plant/models_guide.html">Plant Models Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimization_simulation/guide.html">Optimization &amp; Simulation Guide</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/controllers/index.html">Controllers Module</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Controllers Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/adaptive_smc.html">controllers.adaptive_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/classic_smc.html">controllers.classic_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory.html">controllers.factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/mpc_controller.html">controllers.mpc_controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/sta_smc.html">controllers.sta_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/swing_up_smc.html">controllers.swing_up_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/__init__.html">controllers.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/base_controller_interface.html">controllers.base.controller_interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/base_control_primitives.html">controllers.base.control_primitives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/base___init__.html">controllers.base.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_deprecation.html">controllers.factory.deprecation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_fallback_configs.html">controllers.factory.fallback_configs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_legacy_factory.html">controllers.factory.legacy_factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_optimization.html">controllers.factory.optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_pso_integration.html">controllers.factory.pso_integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_smc_factory.html">controllers.factory.smc_factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_thread_safety.html">controllers.factory.thread_safety</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory___init__.html">controllers.factory.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/mpc_mpc_controller.html">controllers.mpc.mpc_controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/mpc___init__.html">controllers.mpc.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_adaptive_smc.html">controllers.smc.adaptive_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_classic_smc.html">controllers.smc.classic_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_hybrid_adaptive_sta_smc.html">controllers.smc.hybrid_adaptive_sta_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_sta_smc.html">controllers.smc.sta_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc___init__.html">controllers.smc.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/specialized_swing_up_smc.html">controllers.specialized.swing_up_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/specialized___init__.html">controllers.specialized.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_core_protocols.html">controllers.factory.core.protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_core_registry.html">controllers.factory.core.registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_core_threading.html">controllers.factory.core.threading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_core_validation.html">controllers.factory.core.validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_core___init__.html">controllers.factory.core.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms___init__.html">controllers.smc.algorithms.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_core_equivalent_control.html">controllers.smc.core.equivalent_control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_core_gain_validation.html">controllers.smc.core.gain_validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_core_sliding_surface.html">controllers.smc.core.sliding_surface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_core_switching_functions.html">controllers.smc.core.switching_functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_core___init__.html">controllers.smc.core.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_adaptation_law.html">controllers.smc.algorithms.adaptive.adaptation_law</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_config.html">controllers.smc.algorithms.adaptive.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_controller.html">controllers.smc.algorithms.adaptive.controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_parameter_estimation.html">controllers.smc.algorithms.adaptive.parameter_estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive___init__.html">controllers.smc.algorithms.adaptive.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_boundary_layer.html">controllers.smc.algorithms.classical.boundary_layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_config.html">controllers.smc.algorithms.classical.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_controller.html">controllers.smc.algorithms.classical.controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical___init__.html">controllers.smc.algorithms.classical.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_config.html">controllers.smc.algorithms.hybrid.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_controller.html">controllers.smc.algorithms.hybrid.controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_switching_logic.html">controllers.smc.algorithms.hybrid.switching_logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid___init__.html">controllers.smc.algorithms.hybrid.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_config.html">controllers.smc.algorithms.super_twisting.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_controller.html">controllers.smc.algorithms.super_twisting.controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_twisting_algorithm.html">controllers.smc.algorithms.super_twisting.twisting_algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting___init__.html">controllers.smc.algorithms.super_twisting.<strong>init</strong></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/optimizer/index.html">Optimizer Module</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Optimizer Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/optimizer/pso_optimizer.html">optimizer.pso_optimizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optimizer/__init__.html">optimizer.<strong>init</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../analysis_plan.html">5. Analysis &amp; Verification Plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks_methodology.html">Benchmarks &amp; Methodology</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">🧪 Development &amp; Testing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../TESTING.html">Testing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test_protocols.html">5.x Test Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use_cases.html">4. Use Cases &amp; Operating Modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../context.html">2. Application Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault_detection_guide.html">Fault Detection &amp; Isolation (FDI) Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">📊 Research &amp; Theory</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../presentation/index.html">Research Presentation Materials</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Research Presentation Materials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html">Abstract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#introduction-and-motivation">Introduction and Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#the-double-inverted-pendulum-as-a-canonical-control-problem">The Double Inverted Pendulum as a Canonical Control Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#the-primary-control-objectives-and-challenges">The Primary Control Objectives and Challenges</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#sliding-mode-control-as-a-robust-solution">Sliding Mode Control as a Robust Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#the-gain-tuning-dilemma-and-the-need-for-optimization">The Gain Tuning Dilemma and the Need for Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#particle-swarm-optimization-for-automated-design">Particle Swarm Optimization for Automated Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#synthesis-and-motivation">Synthesis and Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#references">References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/problem-statement.html">Problem Statement for Double‑Inverted Pendulum (DIP) Control with SMC and PSO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/previous-works.html">Previous Work Before the Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/system-modeling.html"><strong>A Comprehensive Technical Report on the Modeling and Configuration of a Cart‑Based Double Inverted Pendulum System</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/smc-theory.html">Sliding Mode Control for a Double‑Inverted Pendulum: Bridging Theory and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html">Abstract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#introduction">1 Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#system-modelling-and-problem-formulation">2 System Modelling and Problem Formulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#simulation-methodology">3 Simulation Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#classic-sliding-mode-control">4 Classic Sliding Mode Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-i-boundary-layer-method">5 Chattering Mitigation Strategy I: Boundary Layer Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-ii-supertwisting-algorithm">6 Chattering Mitigation Strategy II: Super‑Twisting Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-iii-adaptive-sliding-mode-control">7 Chattering Mitigation Strategy III: Adaptive Sliding Mode Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-iv-hybrid-adaptivesta">8 Chattering Mitigation Strategy IV: Hybrid Adaptive–STA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#synthesis-and-comparative-analysis">9 Synthesis and Comparative Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#references">References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/pso-optimization.html"><strong>Comprehensive Simulation Analysis and Enhancements for the Double Inverted Pendulum Control System</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/simulation-setup.html">Particle Swarm Optimization for Sliding‑Mode Controller Tuning of a Double Inverted Pendulum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/results-discussion.html">8 – Results and Discussion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/results-discussion.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#introduction-and-motivation">Introduction and Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#the-double-inverted-pendulum-as-a-canonical-control-problem">The Double Inverted Pendulum as a Canonical Control Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#the-primary-control-objectives-and-challenges">The Primary Control Objectives and Challenges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#sliding-mode-control-as-a-robust-solution">Sliding Mode Control as a Robust Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#the-gain-tuning-dilemma-and-the-need-for-optimization">The Gain Tuning Dilemma and the Need for Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#particle-swarm-optimization-for-automated-design">Particle Swarm Optimization for Automated Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#synthesis-and-motivation">Synthesis and Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/problem-statement.html">Problem Statement for Double‑Inverted Pendulum (DIP) Control with SMC and PSO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/previous-works.html">Previous Work Before the Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/system-modeling.html"><strong>A Comprehensive Technical Report on the Modeling and Configuration of a Cart‑Based Double Inverted Pendulum System</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/smc-theory.html">Sliding Mode Control for a Double‑Inverted Pendulum: Bridging Theory and Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#introduction">1 Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#system-modelling-and-problem-formulation">2 System Modelling and Problem Formulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#simulation-methodology">3 Simulation Methodology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#classic-sliding-mode-control">4 Classic Sliding Mode Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-i-boundary-layer-method">5 Chattering Mitigation Strategy I: Boundary Layer Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-ii-supertwisting-algorithm">6 Chattering Mitigation Strategy II: Super‑Twisting Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-iii-adaptive-sliding-mode-control">7 Chattering Mitigation Strategy III: Adaptive Sliding Mode Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-iv-hybrid-adaptivesta">8 Chattering Mitigation Strategy IV: Hybrid Adaptive–STA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#synthesis-and-comparative-analysis">9 Synthesis and Comparative Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/pso-optimization.html"><strong>Comprehensive Simulation Analysis and Enhancements for the Double Inverted Pendulum Control System</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/simulation-setup.html">Particle Swarm Optimization for Sliding‑Mode Controller Tuning of a Double Inverted Pendulum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/results-discussion.html">8 – Results and Discussion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/results-discussion.html#references">References</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">📖 API Reference &amp; Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">API Reference Documentation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../examples/index.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography &amp; Academic References</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">🔧 Project Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing – ResearchPlanSpec Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE_CHECKLIST.html">Release Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../symbols.html">Symbols &amp; Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results_readme.html">Results &amp; Plots</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">📚 Citations &amp; Attribution</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CITATIONS.html">Citations &amp; Academic Attribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CITATIONS_ACADEMIC.html">Academic Theory Citations &amp; References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DEPENDENCIES.html">Software Dependencies &amp; Citations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PATTERNS.html">Software Design Patterns &amp; Architecture Attribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LICENSES.html">License Compliance &amp; Attribution</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/theSadeQ/DIP_SMC_PSO/blob/main/docs/api/factory_system_api_reference.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/theSadeQ/DIP_SMC_PSO/edit/main/docs/api/factory_system_api_reference.md" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section class="tex2jax_ignore mathjax_ignore" id="factory-system-api-reference">
<h1>Factory System API Reference<a class="headerlink" href="#factory-system-api-reference" title="Link to this heading">¶</a></h1>
<p><strong>Module:</strong> <code class="docutils literal notranslate"><span class="pre">src.controllers.factory</span></code>
<strong>Version:</strong> Phase 4.2 - Comprehensive Factory System Documentation
<strong>Last Updated:</strong> 2025-10-07</p>
<section id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#overview">Overview</a></p></li>
<li><p><a class="reference internal" href="#architecture">Architecture</a></p></li>
<li><p><a class="reference internal" href="#core-factory-functions">Core Factory Functions</a></p></li>
<li><p><a class="reference internal" href="#controller-registry-system">Controller Registry System</a></p></li>
<li><p><a class="reference internal" href="#pso-integration">PSO Integration</a></p></li>
<li><p><a class="reference internal" href="#configuration-schema-mapping">Configuration Schema Mapping</a></p></li>
<li><p><a class="reference internal" href="#validation-rules">Validation Rules</a></p></li>
<li><p><a class="reference internal" href="#error-handling">Error Handling</a></p></li>
<li><p><a class="reference internal" href="#extensibility-guide">Extensibility Guide</a></p></li>
<li><p><a class="reference internal" href="#complete-code-examples">Complete Code Examples</a></p></li>
</ol>
</section>
<hr class="docutils" />
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The factory pattern system provides a unified, production-ready interface for creating sliding mode control (SMC) and model predictive control (MPC) instances. It implements enterprise-grade features including:</p>
<ul class="simple">
<li><p><strong>Type-safe controller instantiation</strong> with comprehensive validation</p></li>
<li><p><strong>Multi-source configuration resolution</strong> (explicit parameters, config file, registry defaults)</p></li>
<li><p><strong>PSO optimization integration</strong> for automatic gain tuning</p></li>
<li><p><strong>Thread-safe operations</strong> with reentrant locking</p></li>
<li><p><strong>Automatic type aliasing</strong> and normalization</p></li>
<li><p><strong>Graceful degradation</strong> with fallback configurations</p></li>
<li><p><strong>Comprehensive error handling</strong> with detailed diagnostics</p></li>
</ul>
<section id="design-principles">
<h3>Design Principles<a class="headerlink" href="#design-principles" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p><strong>Single Responsibility</strong>: Factory focuses solely on controller instantiation</p></li>
<li><p><strong>Open/Closed</strong>: Extensible for new controller types without modifying existing code</p></li>
<li><p><strong>Dependency Inversion</strong>: Controllers depend on abstract interfaces, not concrete implementations</p></li>
<li><p><strong>Fail-Safe Defaults</strong>: Always provides functional fallback configurations</p></li>
<li><p><strong>Explicit is Better Than Implicit</strong>: Clear parameter resolution priority</p></li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Link to this heading">¶</a></h2>
<section id="module-structure">
<h3>Module Structure<a class="headerlink" href="#module-structure" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">factory</span><span class="o">.</span><span class="n">py</span>
<span class="err">├──</span> <span class="n">Type</span> <span class="n">Definitions</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">StateVector</span><span class="p">,</span> <span class="n">ControlOutput</span><span class="p">,</span> <span class="n">GainsArray</span><span class="p">,</span> <span class="n">ConfigDict</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">ControllerProtocol</span> <span class="p">(</span><span class="n">Protocol</span> <span class="n">class</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">SMCType</span><span class="p">,</span> <span class="n">SMCConfig</span> <span class="p">(</span><span class="n">Backward</span> <span class="n">compatibility</span><span class="p">)</span>
<span class="err">│</span>
<span class="err">├──</span> <span class="n">Controller</span> <span class="n">Registry</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">CONTROLLER_REGISTRY</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ControllerMetadata</span><span class="p">]</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">CONTROLLER_ALIASES</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
<span class="err">│</span>
<span class="err">├──</span> <span class="n">Core</span> <span class="n">Factory</span> <span class="n">Functions</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">create_controller</span><span class="p">(</span><span class="n">controller_type</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">gains</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">list_available_controllers</span><span class="p">()</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">list_all_controllers</span><span class="p">()</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">get_default_gains</span><span class="p">(</span><span class="n">controller_type</span><span class="p">)</span>
<span class="err">│</span>
<span class="err">├──</span> <span class="n">Helper</span> <span class="n">Functions</span> <span class="p">(</span><span class="n">Internal</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">_canonicalize_controller_type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">_get_controller_info</span><span class="p">(</span><span class="n">controller_type</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">_resolve_controller_gains</span><span class="p">(</span><span class="n">gains</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">_validate_controller_gains</span><span class="p">(</span><span class="n">gains</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">_create_dynamics_model</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">_extract_controller_parameters</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">_validate_mpc_parameters</span><span class="p">(</span><span class="n">config_params</span><span class="p">,</span> <span class="n">controller_params</span><span class="p">)</span>
<span class="err">│</span>
<span class="err">├──</span> <span class="n">PSO</span> <span class="n">Integration</span> <span class="n">Classes</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">PSOControllerWrapper</span><span class="p">:</span> <span class="n">PSO</span><span class="o">-</span><span class="n">compatible</span> <span class="n">controller</span> <span class="n">interface</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">SMCFactory</span><span class="p">:</span> <span class="n">Factory</span> <span class="k">class</span><span class="w"> </span><span class="nc">for</span> <span class="n">SMCType</span> <span class="n">enum</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">SMCGainSpec</span><span class="p">:</span> <span class="n">Gain</span> <span class="n">specification</span> <span class="k">with</span> <span class="n">bounds</span>
<span class="err">│</span>
<span class="err">└──</span> <span class="n">PSO</span> <span class="n">Factory</span> <span class="n">Functions</span>
    <span class="err">├──</span> <span class="n">create_smc_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">gains</span><span class="p">,</span> <span class="n">plant_config</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="err">├──</span> <span class="n">create_pso_controller_factory</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">plant_config</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="err">├──</span> <span class="n">get_expected_gain_count</span><span class="p">(</span><span class="n">smc_type</span><span class="p">)</span>
    <span class="err">├──</span> <span class="n">get_gain_bounds_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">)</span>
    <span class="err">└──</span> <span class="n">validate_smc_gains</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">gains</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="thread-safety">
<h3>Thread Safety<a class="headerlink" href="#thread-safety" title="Link to this heading">¶</a></h3>
<p>The factory uses a module-level reentrant lock (<code class="docutils literal notranslate"><span class="pre">_factory_lock</span></code>) with a 10-second timeout to ensure thread-safe operations:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="c1"># Thread-safe factory operations with timeout protection</span>
<span class="n">_factory_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">RLock</span><span class="p">()</span>
<span class="n">_LOCK_TIMEOUT</span> <span class="o">=</span> <span class="mf">10.0</span>  <span class="c1"># seconds</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_controller</span><span class="p">(</span><span class="n">controller_type</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">_factory_lock</span><span class="p">:</span>
        <span class="c1"># Thread-safe controller creation logic</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>All public factory functions acquire this lock before accessing the registry or creating controllers, ensuring:</p>
<ul class="simple">
<li><p><strong>No race conditions</strong> during concurrent controller creation</p></li>
<li><p><strong>Registry consistency</strong> across multiple threads</p></li>
<li><p><strong>Timeout protection</strong> to prevent deadlocks</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="core-factory-functions">
<h2>Core Factory Functions<a class="headerlink" href="#core-factory-functions" title="Link to this heading">¶</a></h2>
<section id="create-controller-controller-type-config-none-gains-none">
<h3><code class="docutils literal notranslate"><span class="pre">create_controller(controller_type,</span> <span class="pre">config=None,</span> <span class="pre">gains=None)</span></code><a class="headerlink" href="#create-controller-controller-type-config-none-gains-none" title="Link to this heading">¶</a></h3>
<p><strong>Primary factory function for controller instantiation.</strong></p>
<section id="signature">
<h4>Signature<a class="headerlink" href="#signature" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_controller</span><span class="p">(</span>
    <span class="n">controller_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">gains</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span>
</pre></div>
</div>
</section>
<section id="parameters">
<h4>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">controller_type</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p></td>
<td><p>✅ Yes</p></td>
<td><p>Controller type identifier (case-insensitive, supports aliases)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">config</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Any</span></code></p></td>
<td><p>❌ No</p></td>
<td><p>Configuration object or dict (uses registry defaults if None)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gains</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code></p></td>
<td><p>❌ No</p></td>
<td><p>Gain vector (resolved from config or defaults if None)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="supported-controller-types">
<h4>Supported Controller Types<a class="headerlink" href="#supported-controller-types" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type Identifier</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Gain Count</p></th>
<th class="head"><p>Required Dependencies</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'classical_smc'</span></code></p></td>
<td><p>Classical SMC with boundary layer</p></td>
<td><p>6</p></td>
<td><p>None (always available)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'sta_smc'</span></code></p></td>
<td><p>Super-twisting algorithm (2nd-order SMC)</p></td>
<td><p>6</p></td>
<td><p>None (always available)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'adaptive_smc'</span></code></p></td>
<td><p>Adaptive SMC with parameter estimation</p></td>
<td><p>5</p></td>
<td><p>None (always available)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'hybrid_adaptive_sta_smc'</span></code></p></td>
<td><p>Hybrid adaptive super-twisting</p></td>
<td><p>4</p></td>
<td><p>None (always available)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'mpc_controller'</span></code></p></td>
<td><p>Model predictive control</p></td>
<td><p>0</p></td>
<td><p>cvxpy (optional)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="type-aliases">
<h4>Type Aliases<a class="headerlink" href="#type-aliases" title="Link to this heading">¶</a></h4>
<p>The factory automatically normalizes common variations:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="n">CONTROLLER_ALIASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;classic_smc&#39;</span><span class="p">:</span> <span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;smc_classical&#39;</span><span class="p">:</span> <span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;smc_v1&#39;</span><span class="p">:</span> <span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;super_twisting&#39;</span><span class="p">:</span> <span class="s1">&#39;sta_smc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sta&#39;</span><span class="p">:</span> <span class="s1">&#39;sta_smc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;adaptive&#39;</span><span class="p">:</span> <span class="s1">&#39;adaptive_smc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;hybrid&#39;</span><span class="p">:</span> <span class="s1">&#39;hybrid_adaptive_sta_smc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;hybrid_sta&#39;</span><span class="p">:</span> <span class="s1">&#39;hybrid_adaptive_sta_smc&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># All create the same controller type</span>
<span class="n">controller1</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="n">controller2</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classic_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>  <span class="c1"># Alias</span>
<span class="n">controller3</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;smc_v1&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>       <span class="c1"># Alias</span>
</pre></div>
</div>
</section>
<section id="gain-resolution-priority">
<h4>Gain Resolution Priority<a class="headerlink" href="#gain-resolution-priority" title="Link to this heading">¶</a></h4>
<p>The factory resolves gains from multiple sources with clear priority:</p>
<ol class="arabic simple">
<li><p><strong>Explicit <code class="docutils literal notranslate"><span class="pre">gains</span></code> parameter</strong> (highest priority)</p></li>
<li><p><strong>Configuration object</strong> (<code class="docutils literal notranslate"><span class="pre">config.controllers[type].gains</span></code>)</p></li>
<li><p><strong>Registry default gains</strong> (fallback, always available)</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="c1"># Priority demonstration</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>  <span class="c1"># config.controllers.classical_smc.gains = [5,5,5,0.5,0.5,0.5]</span>

<span class="c1"># Priority 1: Explicit gains override everything</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="c1"># Uses: [10,10,10,1,1,1]</span>

<span class="c1"># Priority 2: Config gains used when explicit gains not provided</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="c1"># Uses: [5,5,5,0.5,0.5,0.5] from config</span>

<span class="c1"># Priority 3: Registry defaults when config missing/invalid</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">)</span>
<span class="c1"># Uses: [20.0, 15.0, 12.0, 8.0, 35.0, 5.0] from CONTROLLER_REGISTRY</span>
</pre></div>
</div>
</section>
<section id="return-value">
<h4>Return Value<a class="headerlink" href="#return-value" title="Link to this heading">¶</a></h4>
<p>Returns a controller instance implementing the <code class="docutils literal notranslate"><span class="pre">ControllerProtocol</span></code> interface:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ControllerProtocol</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">compute_control</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">state</span><span class="p">:</span> <span class="n">StateVector</span><span class="p">,</span>
        <span class="n">last_control</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">history</span><span class="p">:</span> <span class="n">ConfigDict</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ControlOutput</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compute control output for given state.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset controller internal state.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">gains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return controller gains.&quot;&quot;&quot;</span>
        <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="exceptions">
<h4>Exceptions<a class="headerlink" href="#exceptions" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Exception</p></th>
<th class="head"><p>Condition</p></th>
<th class="head"><p>Recovery</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ValueError</span></code></p></td>
<td><p>Invalid controller type</p></td>
<td><p>Check <code class="docutils literal notranslate"><span class="pre">list_available_controllers()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ValueError</span></code></p></td>
<td><p>Invalid gain count/values</p></td>
<td><p>Check <code class="docutils literal notranslate"><span class="pre">get_default_gains(type)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ValueError</span></code></p></td>
<td><p>Controller-specific constraints violated</p></td>
<td><p>Review gain bounds for controller type</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ImportError</span></code></p></td>
<td><p>Missing optional dependencies (MPC)</p></td>
<td><p>Install cvxpy: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">cvxpy</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FactoryConfigurationError</span></code></p></td>
<td><p>Configuration building failed</p></td>
<td><p>Review config.yaml schema</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="complete-examples">
<h4>Complete Examples<a class="headerlink" href="#complete-examples" title="Link to this heading">¶</a></h4>
<p><strong>Example 1: Basic Usage with Default Gains</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>

<span class="c1"># Load configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>

<span class="c1"># Create controller with config defaults</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>

<span class="c1"># Use controller in simulation</span>
<span class="n">state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
<span class="n">control_output</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">compute_control</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="p">{})</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Control force: </span><span class="si">{</span><span class="n">control_output</span><span class="o">.</span><span class="n">u</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> N&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example 2: PSO-Optimized Controller Creation</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.optimization.algorithms.pso_optimizer</span><span class="w"> </span><span class="kn">import</span> <span class="n">PSOTuner</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>

<span class="c1"># Load configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>

<span class="c1"># PSO optimization finds optimal gains</span>
<span class="c1"># (See PSO Integration section for complete optimization workflow)</span>
<span class="n">optimized_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">25.3</span><span class="p">,</span> <span class="mf">18.7</span><span class="p">,</span> <span class="mf">14.2</span><span class="p">,</span> <span class="mf">10.8</span><span class="p">,</span> <span class="mf">42.6</span><span class="p">,</span> <span class="mf">6.1</span><span class="p">]</span>  <span class="c1"># From PSO</span>

<span class="c1"># Create controller with optimized gains</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="n">optimized_gains</span><span class="p">)</span>

<span class="c1"># Optimized controller has lower cost than defaults</span>
<span class="n">baseline_cost</span> <span class="o">=</span> <span class="n">evaluate_controller</span><span class="p">(</span><span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">))</span>
<span class="n">optimized_cost</span> <span class="o">=</span> <span class="n">evaluate_controller</span><span class="p">(</span><span class="n">controller</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cost improvement: </span><span class="si">{</span><span class="p">((</span><span class="n">baseline_cost</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">optimized_cost</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">baseline_cost</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example 3: Batch Controller Creation for Comparison</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span><span class="p">,</span> <span class="n">list_available_controllers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>

<span class="c1"># Create all available controller types</span>
<span class="n">controllers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">controller_type</span> <span class="ow">in</span> <span class="n">list_available_controllers</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">controllers</span><span class="p">[</span><span class="n">controller_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="n">controller_type</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✓ Created </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✗ Failed to create </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Run comparative simulation</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">controller</span> <span class="ow">in</span> <span class="n">controllers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">cost</span> <span class="o">=</span> <span class="n">simulate_and_evaluate</span><span class="p">(</span><span class="n">controller</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: cost=</span><span class="si">{</span><span class="n">cost</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example 4: Custom Configuration Override</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>

<span class="c1"># Override specific controller parameters</span>
<span class="n">custom_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">45.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">]</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span>
    <span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="p">,</span>
    <span class="n">gains</span><span class="o">=</span><span class="n">custom_gains</span>
<span class="p">)</span>

<span class="c1"># Verify custom gains applied</span>
<span class="k">assert</span> <span class="n">controller</span><span class="o">.</span><span class="n">gains</span> <span class="o">==</span> <span class="n">custom_gains</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Controller created with custom gains: </span><span class="si">{</span><span class="n">controller</span><span class="o">.</span><span class="n">gains</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example 5: Type Alias Usage</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span>

<span class="c1"># All these create the same controller type (&#39;sta_smc&#39;)</span>
<span class="n">controller1</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;sta_smc&#39;</span><span class="p">)</span>           <span class="c1"># Canonical name</span>
<span class="n">controller2</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;super_twisting&#39;</span><span class="p">)</span>    <span class="c1"># Alias</span>
<span class="n">controller3</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;sta&#39;</span><span class="p">)</span>               <span class="c1"># Short alias</span>

<span class="c1"># Verify all are the same type</span>
<span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">controller1</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="n">controller2</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="n">controller3</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="list-available-controllers">
<h3><code class="docutils literal notranslate"><span class="pre">list_available_controllers()</span></code><a class="headerlink" href="#list-available-controllers" title="Link to this heading">¶</a></h3>
<p><strong>Query currently available controller types.</strong></p>
<section id="id1">
<h4>Signature<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">list_available_controllers</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span>
</pre></div>
</div>
</section>
<section id="id2">
<h4>Return Value<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h4>
<p>Returns sorted list of controller type names that can be instantiated. Excludes controllers with missing optional dependencies.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example return values</span>
<span class="p">[</span><span class="s1">&#39;adaptive_smc&#39;</span><span class="p">,</span> <span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="s1">&#39;hybrid_adaptive_sta_smc&#39;</span><span class="p">,</span> <span class="s1">&#39;sta_smc&#39;</span><span class="p">]</span>  <span class="c1"># MPC unavailable</span>
<span class="p">[</span><span class="s1">&#39;adaptive_smc&#39;</span><span class="p">,</span> <span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="s1">&#39;hybrid_adaptive_sta_smc&#39;</span><span class="p">,</span> <span class="s1">&#39;mpc_controller&#39;</span><span class="p">,</span> <span class="s1">&#39;sta_smc&#39;</span><span class="p">]</span>  <span class="c1"># MPC available</span>
</pre></div>
</div>
</section>
<section id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h4>
<p><strong>Example 1: Pre-flight Availability Check</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">list_available_controllers</span><span class="p">,</span> <span class="n">create_controller</span>

<span class="c1"># Check availability before attempting creation</span>
<span class="n">available</span> <span class="o">=</span> <span class="n">list_available_controllers</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Available controllers: </span><span class="si">{</span><span class="n">available</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="s1">&#39;mpc_controller&#39;</span> <span class="ow">in</span> <span class="n">available</span><span class="p">:</span>
    <span class="n">mpc</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;mpc_controller&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MPC controller created successfully&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MPC not available (install cvxpy: pip install cvxpy)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example 2: Dynamic Benchmarking</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">list_available_controllers</span><span class="p">,</span> <span class="n">create_controller</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Benchmark all available controllers</span>
<span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">controller_type</span> <span class="ow">in</span> <span class="n">list_available_controllers</span><span class="p">():</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="n">controller_type</span><span class="p">)</span>
    <span class="n">cost</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="n">evaluate_controller</span><span class="p">(</span><span class="n">controller</span><span class="p">)</span>
    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s1">&#39;controller&#39;</span><span class="p">:</span> <span class="n">controller_type</span><span class="p">,</span>
        <span class="s1">&#39;cost&#39;</span><span class="p">:</span> <span class="n">cost</span><span class="p">,</span>
        <span class="s1">&#39;computation_time&#39;</span><span class="p">:</span> <span class="n">time</span>
    <span class="p">})</span>

<span class="c1"># Display results</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;cost&#39;</span><span class="p">))</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="list-all-controllers">
<h3><code class="docutils literal notranslate"><span class="pre">list_all_controllers()</span></code><a class="headerlink" href="#list-all-controllers" title="Link to this heading">¶</a></h3>
<p><strong>Get complete list of all registered controller types.</strong></p>
<section id="id3">
<h4>Signature<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">list_all_controllers</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span>
</pre></div>
</div>
</section>
<section id="id4">
<h4>Return Value<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h4>
<p>Returns list of all controller types in the registry, including those with missing dependencies.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Always returns all registered types</span>
<span class="p">[</span><span class="s1">&#39;adaptive_smc&#39;</span><span class="p">,</span> <span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="s1">&#39;hybrid_adaptive_sta_smc&#39;</span><span class="p">,</span> <span class="s1">&#39;mpc_controller&#39;</span><span class="p">,</span> <span class="s1">&#39;sta_smc&#39;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="difference-from-list-available-controllers">
<h4>Difference from <code class="docutils literal notranslate"><span class="pre">list_available_controllers()</span></code><a class="headerlink" href="#difference-from-list-available-controllers" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Includes Unavailable Controllers</p></th>
<th class="head"><p>Use Case</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">list_available_controllers()</span></code></p></td>
<td><p>❌ No</p></td>
<td><p>Safe iteration for controller creation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">list_all_controllers()</span></code></p></td>
<td><p>✅ Yes</p></td>
<td><p>Documentation, dependency checking</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<hr class="docutils" />
<section id="get-default-gains-controller-type">
<h3><code class="docutils literal notranslate"><span class="pre">get_default_gains(controller_type)</span></code><a class="headerlink" href="#get-default-gains-controller-type" title="Link to this heading">¶</a></h3>
<p><strong>Retrieve default gain vector for a controller type.</strong></p>
<section id="id5">
<h4>Signature<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_default_gains</span><span class="p">(</span><span class="n">controller_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span>
</pre></div>
</div>
</section>
<section id="id6">
<h4>Parameters<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">controller_type</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p></td>
<td><p>✅ Yes</p></td>
<td><p>Controller type (canonical name, not alias)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id7">
<h4>Return Value<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h4>
<p>Returns a <strong>copy</strong> of the default gain vector from the registry. Modifications to the returned list do not affect the registry.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Controller Type</p></th>
<th class="head"><p>Default Gains</p></th>
<th class="head"><p>Physical Interpretation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'classical_smc'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[20.0,</span> <span class="pre">15.0,</span> <span class="pre">12.0,</span> <span class="pre">8.0,</span> <span class="pre">35.0,</span> <span class="pre">5.0]</span></code></p></td>
<td><p>[k₁, k₂, λ₁, λ₂, K, kd]</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'sta_smc'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[25.0,</span> <span class="pre">15.0,</span> <span class="pre">20.0,</span> <span class="pre">12.0,</span> <span class="pre">8.0,</span> <span class="pre">6.0]</span></code></p></td>
<td><p>[K₁, K₂, k₁, k₂, λ₁, λ₂]</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'adaptive_smc'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[25.0,</span> <span class="pre">18.0,</span> <span class="pre">15.0,</span> <span class="pre">10.0,</span> <span class="pre">4.0]</span></code></p></td>
<td><p>[k₁, k₂, λ₁, λ₂, γ]</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'hybrid_adaptive_sta_smc'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[18.0,</span> <span class="pre">12.0,</span> <span class="pre">10.0,</span> <span class="pre">8.0]</span></code></p></td>
<td><p>[c₁, λ₁, c₂, λ₂]</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'mpc_controller'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td><p>(MPC uses horizon/cost matrices)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id8">
<h4>Exceptions<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Exception</p></th>
<th class="head"><p>Condition</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ValueError</span></code></p></td>
<td><p>Unknown controller type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">get_default_gains('unknown')</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id9">
<h4>Examples<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h4>
<p><strong>Example 1: Query Before Optimization</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_default_gains</span>

<span class="c1"># Get baseline gains</span>
<span class="n">default_gains</span> <span class="o">=</span> <span class="n">get_default_gains</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Baseline gains: </span><span class="si">{</span><span class="n">default_gains</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># Output: [20.0, 15.0, 12.0, 8.0, 35.0, 5.0]</span>

<span class="c1"># Use as PSO initial guess</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.optimization.algorithms.pso_optimizer</span><span class="w"> </span><span class="kn">import</span> <span class="n">PSOTuner</span>
<span class="n">tuner</span> <span class="o">=</span> <span class="n">PSOTuner</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">optimized_gains</span> <span class="o">=</span> <span class="n">tuner</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">initial_guess</span><span class="o">=</span><span class="n">default_gains</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example 2: Comparative Analysis</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_default_gains</span><span class="p">,</span> <span class="n">create_controller</span>

<span class="c1"># Create controllers with default and custom gains</span>
<span class="n">gains_default</span> <span class="o">=</span> <span class="n">get_default_gains</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">)</span>
<span class="n">gains_custom</span> <span class="o">=</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">45.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">]</span>

<span class="n">controller_default</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="n">gains_default</span><span class="p">)</span>
<span class="n">controller_custom</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="n">gains_custom</span><span class="p">)</span>

<span class="c1"># Compare performance</span>
<span class="n">cost_default</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span><span class="n">controller_default</span><span class="p">)</span>
<span class="n">cost_custom</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span><span class="n">controller_custom</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Default cost: </span><span class="si">{</span><span class="n">cost_default</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Custom cost: </span><span class="si">{</span><span class="n">cost_custom</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Improvement: </span><span class="si">{</span><span class="p">((</span><span class="n">cost_default</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cost_custom</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">cost_default</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="controller-registry-system">
<h2>Controller Registry System<a class="headerlink" href="#controller-registry-system" title="Link to this heading">¶</a></h2>
<p>The controller registry (<code class="docutils literal notranslate"><span class="pre">CONTROLLER_REGISTRY</span></code>) is a comprehensive metadata database for all supported controller types.</p>
<section id="registry-structure">
<h3>Registry Structure<a class="headerlink" href="#registry-structure" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="n">CONTROLLER_REGISTRY</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;controller_type&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="n">ControllerClass</span><span class="p">,</span>              <span class="c1"># Controller class reference</span>
        <span class="s1">&#39;config_class&#39;</span><span class="p">:</span> <span class="n">ConfigClass</span><span class="p">,</span>           <span class="c1"># Configuration class reference</span>
        <span class="s1">&#39;default_gains&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>          <span class="c1"># Default gain vector</span>
        <span class="s1">&#39;gain_count&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>                     <span class="c1"># Expected number of gains</span>
        <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>                    <span class="c1"># Human-readable description</span>
        <span class="s1">&#39;supports_dynamics&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>             <span class="c1"># Whether controller uses dynamics model</span>
        <span class="s1">&#39;required_params&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>           <span class="c1"># Required configuration parameters</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="complete-registry-definitions">
<h3>Complete Registry Definitions<a class="headerlink" href="#complete-registry-definitions" title="Link to this heading">¶</a></h3>
<section id="classical-smc">
<h4>Classical SMC<a class="headerlink" href="#classical-smc" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;classical_smc&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="n">ClassicalSMC</span><span class="p">,</span>
    <span class="s1">&#39;config_class&#39;</span><span class="p">:</span> <span class="n">ClassicalSMCConfig</span><span class="p">,</span>
    <span class="s1">&#39;default_gains&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">35.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">],</span>
    <span class="s1">&#39;gain_count&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Classical sliding mode controller with boundary layer&#39;</span><span class="p">,</span>
    <span class="s1">&#39;supports_dynamics&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;required_params&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;gains&#39;</span><span class="p">,</span> <span class="s1">&#39;max_force&#39;</span><span class="p">,</span> <span class="s1">&#39;boundary_layer&#39;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Gain Interpretation:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">k1,</span> <span class="pre">k2</span></code> (20.0, 15.0): Proportional gains for pendulum 1 and 2 angles</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">λ1,</span> <span class="pre">λ2</span></code> (12.0, 8.0): Sliding surface coefficients</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">K</span></code> (35.0): Switching gain magnitude</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kd</span></code> (5.0): Derivative gain for damping</p></li>
</ul>
</section>
<section id="super-twisting-smc">
<h4>Super-Twisting SMC<a class="headerlink" href="#super-twisting-smc" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;sta_smc&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="n">SuperTwistingSMC</span><span class="p">,</span>
    <span class="s1">&#39;config_class&#39;</span><span class="p">:</span> <span class="n">STASMCConfig</span><span class="p">,</span>
    <span class="s1">&#39;default_gains&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">],</span>
    <span class="s1">&#39;gain_count&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Super-twisting sliding mode controller&#39;</span><span class="p">,</span>
    <span class="s1">&#39;supports_dynamics&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;required_params&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;gains&#39;</span><span class="p">,</span> <span class="s1">&#39;max_force&#39;</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Gain Interpretation:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">K1,</span> <span class="pre">K2</span></code> (25.0, 15.0): Super-twisting algorithmic gains (<strong>Constraint: K1 &gt; K2</strong>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">k1,</span> <span class="pre">k2</span></code> (20.0, 12.0): Proportional surface gains</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">λ1,</span> <span class="pre">λ2</span></code> (8.0, 6.0): Sliding surface coefficients</p></li>
</ul>
<p><strong>Critical Constraint:</strong> Super-twisting stability requires <code class="docutils literal notranslate"><span class="pre">K1</span> <span class="pre">&gt;</span> <span class="pre">K2</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>. The factory automatically validates this constraint.</p>
</section>
<section id="adaptive-smc">
<h4>Adaptive SMC<a class="headerlink" href="#adaptive-smc" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;adaptive_smc&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="n">AdaptiveSMC</span><span class="p">,</span>
    <span class="s1">&#39;config_class&#39;</span><span class="p">:</span> <span class="n">AdaptiveSMCConfig</span><span class="p">,</span>
    <span class="s1">&#39;default_gains&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">18.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span>
    <span class="s1">&#39;gain_count&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Adaptive sliding mode controller with parameter estimation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;supports_dynamics&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;required_params&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;gains&#39;</span><span class="p">,</span> <span class="s1">&#39;max_force&#39;</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Gain Interpretation:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">k1,</span> <span class="pre">k2</span></code> (25.0, 18.0): Proportional gains</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">λ1,</span> <span class="pre">λ2</span></code> (15.0, 10.0): Sliding surface coefficients</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">γ</span></code> (4.0): Adaptation rate for online parameter estimation</p></li>
</ul>
</section>
<section id="hybrid-adaptive-sta-smc">
<h4>Hybrid Adaptive-STA SMC<a class="headerlink" href="#hybrid-adaptive-sta-smc" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;hybrid_adaptive_sta_smc&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="n">ModularHybridSMC</span><span class="p">,</span>
    <span class="s1">&#39;config_class&#39;</span><span class="p">:</span> <span class="n">HybridAdaptiveSTASMCConfig</span><span class="p">,</span>
    <span class="s1">&#39;default_gains&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">18.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">],</span>
    <span class="s1">&#39;gain_count&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Hybrid adaptive super-twisting sliding mode controller&#39;</span><span class="p">,</span>
    <span class="s1">&#39;supports_dynamics&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>  <span class="c1"># Uses sub-controllers</span>
    <span class="s1">&#39;required_params&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;classical_config&#39;</span><span class="p">,</span> <span class="s1">&#39;adaptive_config&#39;</span><span class="p">,</span> <span class="s1">&#39;hybrid_mode&#39;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Gain Interpretation:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c1,</span> <span class="pre">c2</span></code> (18.0, 12.0): Hybrid mode blending coefficients</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">λ1,</span> <span class="pre">λ2</span></code> (10.0, 8.0): Sliding surface design parameters</p></li>
</ul>
<p><strong>Note:</strong> Hybrid controller requires sub-configurations for classical and adaptive modes.</p>
</section>
<section id="mpc-controller-optional">
<h4>MPC Controller (Optional)<a class="headerlink" href="#mpc-controller-optional" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;mpc_controller&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="n">MPCController</span><span class="p">,</span>  <span class="c1"># None if cvxpy unavailable</span>
    <span class="s1">&#39;config_class&#39;</span><span class="p">:</span> <span class="n">MPCConfig</span><span class="p">,</span>
    <span class="s1">&#39;default_gains&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s1">&#39;gain_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Model predictive controller&#39;</span><span class="p">,</span>
    <span class="s1">&#39;supports_dynamics&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;required_params&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;horizon&#39;</span><span class="p">,</span> <span class="s1">&#39;q_x&#39;</span><span class="p">,</span> <span class="s1">&#39;q_theta&#39;</span><span class="p">,</span> <span class="s1">&#39;r_u&#39;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Note:</strong> MPC uses prediction horizon and cost matrices instead of traditional gains.</p>
</section>
</section>
<section id="querying-the-registry">
<h3>Querying the Registry<a class="headerlink" href="#querying-the-registry" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">CONTROLLER_REGISTRY</span>

<span class="c1"># Get metadata for a controller type</span>
<span class="n">classical_info</span> <span class="o">=</span> <span class="n">CONTROLLER_REGISTRY</span><span class="p">[</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Description: </span><span class="si">{</span><span class="n">classical_info</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Gain count: </span><span class="si">{</span><span class="n">classical_info</span><span class="p">[</span><span class="s1">&#39;gain_count&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Default gains: </span><span class="si">{</span><span class="n">classical_info</span><span class="p">[</span><span class="s1">&#39;default_gains&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Required params: </span><span class="si">{</span><span class="n">classical_info</span><span class="p">[</span><span class="s1">&#39;required_params&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Check if controller supports dynamics model</span>
<span class="k">if</span> <span class="n">classical_info</span><span class="p">[</span><span class="s1">&#39;supports_dynamics&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Controller can use dynamics model for feedforward control&quot;</span><span class="p">)</span>

<span class="c1"># Iterate over all registered controllers</span>
<span class="k">for</span> <span class="n">controller_type</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">CONTROLLER_REGISTRY</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;gain_count&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> gains&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="pso-integration">
<h2>PSO Integration<a class="headerlink" href="#pso-integration" title="Link to this heading">¶</a></h2>
<p>The factory system provides deep integration with Particle Swarm Optimization (PSO) for automatic gain tuning.</p>
<section id="pso-integration-architecture">
<h3>PSO Integration Architecture<a class="headerlink" href="#pso-integration-architecture" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="err">┌─────────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span>                         <span class="n">PSO</span> <span class="n">Optimizer</span>                           <span class="err">│</span>
<span class="err">│</span>  <span class="p">(</span><span class="n">src</span><span class="o">/</span><span class="n">optimization</span><span class="o">/</span><span class="n">algorithms</span><span class="o">/</span><span class="n">pso_optimizer</span><span class="o">.</span><span class="n">py</span><span class="p">)</span>                 <span class="err">│</span>
<span class="err">└───────────────┬─────────────────────────────────────────────────┘</span>
                <span class="err">│</span>
                <span class="err">│</span> <span class="n">optimizes</span>
                <span class="err">▼</span>
<span class="err">┌─────────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span>                  <span class="n">PSO</span> <span class="n">Factory</span> <span class="n">Bridge</span>                             <span class="err">│</span>
<span class="err">│</span>  <span class="p">(</span><span class="n">src</span><span class="o">/</span><span class="n">optimization</span><span class="o">/</span><span class="n">integration</span><span class="o">/</span><span class="n">pso_factory_bridge</span><span class="o">.</span><span class="n">py</span><span class="p">)</span>           <span class="err">│</span>
<span class="err">│</span>  <span class="err">┌────────────────────────────────────────────────────┐</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">│</span>  <span class="n">EnhancedPSOFactory</span>                                 <span class="err">│</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">│</span>  <span class="o">-</span> <span class="n">create_enhanced_controller_factory</span><span class="p">()</span>             <span class="err">│</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">│</span>  <span class="o">-</span> <span class="n">create_enhanced_fitness_function</span><span class="p">()</span>               <span class="err">│</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">│</span>  <span class="o">-</span> <span class="n">optimize_controller</span><span class="p">()</span>                            <span class="err">│</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">└────────────────────────────────────────────────────┘</span>        <span class="err">│</span>
<span class="err">└───────────────┬─────────────────────────────────────────────────┘</span>
                <span class="err">│</span>
                <span class="err">│</span> <span class="n">uses</span>
                <span class="err">▼</span>
<span class="err">┌─────────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span>                    <span class="n">Controller</span> <span class="n">Factory</span>                           <span class="err">│</span>
<span class="err">│</span>  <span class="p">(</span><span class="n">src</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">factory</span><span class="o">.</span><span class="n">py</span><span class="p">)</span>                                   <span class="err">│</span>
<span class="err">│</span>  <span class="err">┌────────────────────────────────────────────────────┐</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">│</span>  <span class="n">PSO</span><span class="o">-</span><span class="n">Compatible</span> <span class="n">Functions</span>                           <span class="err">│</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">│</span>  <span class="o">-</span> <span class="n">create_smc_for_pso</span><span class="p">()</span>                             <span class="err">│</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">│</span>  <span class="o">-</span> <span class="n">create_pso_controller_factory</span><span class="p">()</span>                  <span class="err">│</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">│</span>  <span class="o">-</span> <span class="n">PSOControllerWrapper</span>                             <span class="err">│</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">│</span>  <span class="o">-</span> <span class="n">get_expected_gain_count</span><span class="p">()</span>                        <span class="err">│</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">│</span>  <span class="o">-</span> <span class="n">get_gain_bounds_for_pso</span><span class="p">()</span>                        <span class="err">│</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">│</span>  <span class="o">-</span> <span class="n">validate_smc_gains</span><span class="p">()</span>                             <span class="err">│</span>        <span class="err">│</span>
<span class="err">│</span>  <span class="err">└────────────────────────────────────────────────────┘</span>        <span class="err">│</span>
<span class="err">└─────────────────────────────────────────────────────────────────┘</span>
</pre></div>
</div>
</section>
<section id="key-pso-integration-components">
<h3>Key PSO Integration Components<a class="headerlink" href="#key-pso-integration-components" title="Link to this heading">¶</a></h3>
<section id="psocontrollerwrapper">
<h4>1. <code class="docutils literal notranslate"><span class="pre">PSOControllerWrapper</span></code><a class="headerlink" href="#psocontrollerwrapper" title="Link to this heading">¶</a></h4>
<p>Wraps controller instances with PSO-compatible interface:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PSOControllerWrapper</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wrapper for SMC controllers to provide PSO-compatible interface.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">controller</span><span class="p">,</span> <span class="n">n_gains</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">controller_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">controller</span> <span class="o">=</span> <span class="n">controller</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_gains</span> <span class="o">=</span> <span class="n">n_gains</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">controller_type</span> <span class="o">=</span> <span class="n">controller_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_force</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="s1">&#39;max_force&#39;</span><span class="p">,</span> <span class="mf">150.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dynamics_model</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="s1">&#39;dynamics_model&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate_gains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">particles</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate gain particles for PSO optimization.&quot;&quot;&quot;</span>
        <span class="c1"># Checks gain count, finiteness, positivity, and controller-specific constraints</span>
        <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compute_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PSO-compatible control computation interface.&quot;&quot;&quot;</span>
        <span class="c1"># Simplified interface for PSO fitness evaluation</span>
        <span class="o">...</span>
</pre></div>
</div>
<p><strong>Key Features:</strong></p>
<ul class="simple">
<li><p>Exposes <code class="docutils literal notranslate"><span class="pre">n_gains</span></code> attribute for PSO dimensionality</p></li>
<li><p>Validates gain particles before fitness evaluation</p></li>
<li><p>Provides simplified <code class="docutils literal notranslate"><span class="pre">compute_control(state)</span></code> interface</p></li>
<li><p>Attaches dynamics model for simulation</p></li>
</ul>
</section>
<section id="create-smc-for-pso">
<h4>2. <code class="docutils literal notranslate"><span class="pre">create_smc_for_pso()</span></code><a class="headerlink" href="#create-smc-for-pso" title="Link to this heading">¶</a></h4>
<p>Creates PSO-wrapped controller instances:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_smc_for_pso</span><span class="p">(</span>
    <span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span>
    <span class="n">gains</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span>
    <span class="n">plant_config_or_model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PSOControllerWrapper</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create SMC controller optimized for PSO usage.</span>

<span class="sd">    Args:</span>
<span class="sd">        smc_type: Controller type (SMCType enum)</span>
<span class="sd">        gains: Gain vector from PSO particle</span>
<span class="sd">        plant_config_or_model: Plant configuration (optional)</span>
<span class="sd">        **kwargs: Additional parameters (max_force, dt, etc.)</span>

<span class="sd">    Returns:</span>
<span class="sd">        PSOControllerWrapper instance with PSO-compatible interface</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">SMCType</span><span class="p">,</span> <span class="n">create_smc_for_pso</span>

<span class="c1"># PSO creates controller for each particle</span>
<span class="n">particle_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">20.5</span><span class="p">,</span> <span class="mf">14.3</span><span class="p">,</span> <span class="mf">11.8</span><span class="p">,</span> <span class="mf">9.2</span><span class="p">,</span> <span class="mf">38.1</span><span class="p">,</span> <span class="mf">5.7</span><span class="p">]</span>
<span class="n">controller_wrapper</span> <span class="o">=</span> <span class="n">create_smc_for_pso</span><span class="p">(</span>
    <span class="n">smc_type</span><span class="o">=</span><span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">,</span>
    <span class="n">gains</span><span class="o">=</span><span class="n">particle_gains</span><span class="p">,</span>
    <span class="n">max_force</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
    <span class="n">dt</span><span class="o">=</span><span class="mf">0.001</span>
<span class="p">)</span>

<span class="c1"># Wrapper exposes PSO attributes</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected gains: </span><span class="si">{</span><span class="n">controller_wrapper</span><span class="o">.</span><span class="n">n_gains</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># 6</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Controller type: </span><span class="si">{</span><span class="n">controller_wrapper</span><span class="o">.</span><span class="n">controller_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># &#39;classical_smc&#39;</span>

<span class="c1"># Use in PSO fitness function</span>
<span class="n">state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
<span class="n">control</span> <span class="o">=</span> <span class="n">controller_wrapper</span><span class="o">.</span><span class="n">compute_control</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="create-pso-controller-factory">
<h4>3. <code class="docutils literal notranslate"><span class="pre">create_pso_controller_factory()</span></code><a class="headerlink" href="#create-pso-controller-factory" title="Link to this heading">¶</a></h4>
<p>Creates factory functions with PSO-required metadata:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_pso_controller_factory</span><span class="p">(</span>
    <span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span>
    <span class="n">plant_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a PSO-optimized controller factory function with required attributes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Factory function with attributes:</span>
<span class="sd">        - n_gains: Expected gain count</span>
<span class="sd">        - controller_type: Controller type string</span>
<span class="sd">        - max_force: Maximum control force</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">controller_factory</span><span class="p">(</span><span class="n">gains</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">create_smc_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">gains</span><span class="p">,</span> <span class="n">plant_config</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Add PSO-required attributes</span>
    <span class="n">controller_factory</span><span class="o">.</span><span class="n">n_gains</span> <span class="o">=</span> <span class="n">get_expected_gain_count</span><span class="p">(</span><span class="n">smc_type</span><span class="p">)</span>
    <span class="n">controller_factory</span><span class="o">.</span><span class="n">controller_type</span> <span class="o">=</span> <span class="n">smc_type</span><span class="o">.</span><span class="n">value</span>
    <span class="n">controller_factory</span><span class="o">.</span><span class="n">max_force</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;max_force&#39;</span><span class="p">,</span> <span class="mf">150.0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">controller_factory</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">SMCType</span><span class="p">,</span> <span class="n">create_pso_controller_factory</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.optimization.algorithms.pso_optimizer</span><span class="w"> </span><span class="kn">import</span> <span class="n">PSOTuner</span>

<span class="c1"># Create factory for PSO optimization</span>
<span class="n">controller_factory</span> <span class="o">=</span> <span class="n">create_pso_controller_factory</span><span class="p">(</span>
    <span class="n">smc_type</span><span class="o">=</span><span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">,</span>
    <span class="n">max_force</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
    <span class="n">dt</span><span class="o">=</span><span class="mf">0.001</span>
<span class="p">)</span>

<span class="c1"># Factory has PSO-required attributes</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Gain dimension: </span><span class="si">{</span><span class="n">controller_factory</span><span class="o">.</span><span class="n">n_gains</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># 6</span>

<span class="c1"># Use with PSO tuner</span>
<span class="n">tuner</span> <span class="o">=</span> <span class="n">PSOTuner</span><span class="p">(</span><span class="n">controller_factory</span><span class="o">=</span><span class="n">controller_factory</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">tuner</span><span class="o">.</span><span class="n">optimise</span><span class="p">()</span>
<span class="n">optimized_gains</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;best_pos&#39;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="get-expected-gain-count">
<h4>4. <code class="docutils literal notranslate"><span class="pre">get_expected_gain_count()</span></code><a class="headerlink" href="#get-expected-gain-count" title="Link to this heading">¶</a></h4>
<p>Returns expected number of gains for a controller type:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_expected_gain_count</span><span class="p">(</span><span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get expected number of gains for a controller type.&quot;&quot;&quot;</span>
    <span class="n">expected_counts</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">expected_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="get-gain-bounds-for-pso">
<h4>5. <code class="docutils literal notranslate"><span class="pre">get_gain_bounds_for_pso()</span></code><a class="headerlink" href="#get-gain-bounds-for-pso" title="Link to this heading">¶</a></h4>
<p>Returns PSO search bounds for controller types:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_gain_bounds_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get PSO gain bounds for a controller type.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple of (lower_bounds, upper_bounds) lists</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bounds_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;lower&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span>
            <span class="s1">&#39;upper&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;lower&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
            <span class="s1">&#39;upper&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">40.0</span><span class="p">,</span> <span class="mf">40.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span> <span class="p">{</span>
            <span class="c1"># K1 &gt; K2 constraint: K1 in [2.0, 50.0], K2 in [1.0, 49.0]</span>
            <span class="s1">&#39;lower&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
            <span class="s1">&#39;upper&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">49.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;lower&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
            <span class="s1">&#39;upper&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">bounds_map</span><span class="p">[</span><span class="n">smc_type</span><span class="p">][</span><span class="s1">&#39;lower&#39;</span><span class="p">],</span> <span class="n">bounds_map</span><span class="p">[</span><span class="n">smc_type</span><span class="p">][</span><span class="s1">&#39;upper&#39;</span><span class="p">])</span>
</pre></div>
</div>
</section>
</section>
<section id="complete-pso-optimization-workflow">
<h3>Complete PSO Optimization Workflow<a class="headerlink" href="#complete-pso-optimization-workflow" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">SMCType</span><span class="p">,</span> <span class="n">create_pso_controller_factory</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.optimization.algorithms.pso_optimizer</span><span class="w"> </span><span class="kn">import</span> <span class="n">PSOTuner</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Load configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>

<span class="c1"># Step 1: Create PSO-compatible controller factory</span>
<span class="n">controller_factory</span> <span class="o">=</span> <span class="n">create_pso_controller_factory</span><span class="p">(</span>
    <span class="n">smc_type</span><span class="o">=</span><span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">,</span>
    <span class="n">max_force</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
    <span class="n">dt</span><span class="o">=</span><span class="mf">0.001</span>
<span class="p">)</span>

<span class="c1"># Step 2: Initialize PSO tuner</span>
<span class="n">tuner</span> <span class="o">=</span> <span class="n">PSOTuner</span><span class="p">(</span>
    <span class="n">controller_factory</span><span class="o">=</span><span class="n">controller_factory</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
    <span class="n">seed</span><span class="o">=</span><span class="mi">42</span>
<span class="p">)</span>

<span class="c1"># Step 3: Run PSO optimization</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting PSO optimization...&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">tuner</span><span class="o">.</span><span class="n">optimise</span><span class="p">(</span>
    <span class="n">n_particles_override</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">iters_override</span><span class="o">=</span><span class="mi">100</span>
<span class="p">)</span>

<span class="c1"># Step 4: Extract optimized gains</span>
<span class="n">optimized_gains</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;best_pos&#39;</span><span class="p">]</span>
<span class="n">best_cost</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;best_cost&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Optimized gains: </span><span class="si">{</span><span class="n">optimized_gains</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best cost: </span><span class="si">{</span><span class="n">best_cost</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Step 5: Create final controller with optimized gains</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span>
<span class="n">optimized_controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span>
    <span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="p">,</span>
    <span class="n">gains</span><span class="o">=</span><span class="n">optimized_gains</span>
<span class="p">)</span>

<span class="c1"># Step 6: Validate optimized controller</span>
<span class="n">validation_cost</span> <span class="o">=</span> <span class="n">evaluate_controller</span><span class="p">(</span><span class="n">optimized_controller</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Validation cost: </span><span class="si">{</span><span class="n">validation_cost</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Step 7: Compare with baseline</span>
<span class="n">baseline_controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="n">baseline_cost</span> <span class="o">=</span> <span class="n">evaluate_controller</span><span class="p">(</span><span class="n">baseline_controller</span><span class="p">)</span>
<span class="n">improvement</span> <span class="o">=</span> <span class="p">(</span><span class="n">baseline_cost</span> <span class="o">-</span> <span class="n">validation_cost</span><span class="p">)</span> <span class="o">/</span> <span class="n">baseline_cost</span> <span class="o">*</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Improvement over baseline: </span><span class="si">{</span><span class="n">improvement</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pso-gain-specifications">
<h3>PSO Gain Specifications<a class="headerlink" href="#pso-gain-specifications" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">SMC_GAIN_SPECS</span></code> dictionary provides detailed gain specifications for PSO:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="n">SMC_GAIN_SPECS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span> <span class="n">SMCGainSpec</span><span class="p">(</span>
        <span class="n">gain_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span> <span class="s1">&#39;k2&#39;</span><span class="p">,</span> <span class="s1">&#39;lambda1&#39;</span><span class="p">,</span> <span class="s1">&#39;lambda2&#39;</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="s1">&#39;kd&#39;</span><span class="p">],</span>
        <span class="n">gain_bounds</span><span class="o">=</span><span class="p">[(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">)],</span>
        <span class="n">controller_type</span><span class="o">=</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span>
        <span class="n">n_gains</span><span class="o">=</span><span class="mi">6</span>
    <span class="p">),</span>
    <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span> <span class="n">SMCGainSpec</span><span class="p">(</span>
        <span class="n">gain_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span> <span class="s1">&#39;k2&#39;</span><span class="p">,</span> <span class="s1">&#39;lambda1&#39;</span><span class="p">,</span> <span class="s1">&#39;lambda2&#39;</span><span class="p">,</span> <span class="s1">&#39;gamma&#39;</span><span class="p">],</span>
        <span class="n">gain_bounds</span><span class="o">=</span><span class="p">[(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">40.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">40.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">)],</span>
        <span class="n">controller_type</span><span class="o">=</span><span class="s1">&#39;adaptive_smc&#39;</span><span class="p">,</span>
        <span class="n">n_gains</span><span class="o">=</span><span class="mi">5</span>
    <span class="p">),</span>
    <span class="c1"># ... etc.</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Usage:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">SMCType</span><span class="p">,</span> <span class="n">SMC_GAIN_SPECS</span>

<span class="c1"># Get gain specification</span>
<span class="n">spec</span> <span class="o">=</span> <span class="n">SMC_GAIN_SPECS</span><span class="p">[</span><span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Gain names: </span><span class="si">{</span><span class="n">spec</span><span class="o">.</span><span class="n">gain_names</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Gain bounds: </span><span class="si">{</span><span class="n">spec</span><span class="o">.</span><span class="n">gain_bounds</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dimension: </span><span class="si">{</span><span class="n">spec</span><span class="o">.</span><span class="n">n_gains</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="configuration-schema-mapping">
<h2>Configuration Schema Mapping<a class="headerlink" href="#configuration-schema-mapping" title="Link to this heading">¶</a></h2>
<p>The factory maps configuration file parameters to controller initialization.</p>
<section id="configuration-file-structure-config-yaml">
<h3>Configuration File Structure (config.yaml)<a class="headerlink" href="#configuration-file-structure-config-yaml" title="Link to this heading">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">controllers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">classical_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_force</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150.0</span>
<span class="w">    </span><span class="nt">boundary_layer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
<span class="w">    </span><span class="nt">dt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>
<span class="w">    </span><span class="c1"># Additional controller-specific parameters</span>

<span class="w">  </span><span class="nt">sta_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">gains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">8.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">12.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4.85</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.43</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">damping_gain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">    </span><span class="nt">max_force</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150.0</span>
<span class="w">    </span><span class="nt">dt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>
<span class="w">    </span><span class="nt">boundary_layer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>

<span class="w">  </span><span class="nt">adaptive_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_force</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150.0</span>
<span class="w">    </span><span class="nt">leak_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="w">    </span><span class="nt">dead_zone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
<span class="w">    </span><span class="nt">adapt_rate_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0</span>
<span class="w">    </span><span class="nt">K_min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">    </span><span class="nt">K_max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100.0</span>
<span class="w">    </span><span class="nt">dt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>
<span class="w">    </span><span class="nt">smooth_switch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">boundary_layer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>

<span class="w">  </span><span class="nt">hybrid_adaptive_sta_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_force</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150.0</span>
<span class="w">    </span><span class="nt">dt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>
<span class="w">    </span><span class="nt">k1_init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.0</span>
<span class="w">    </span><span class="nt">k2_init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
<span class="w">    </span><span class="nt">gamma1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
<span class="w">    </span><span class="nt">gamma2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">    </span><span class="nt">dead_zone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
<span class="w">    </span><span class="nt">enable_equivalent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">damping_gain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span>
<span class="w">    </span><span class="nt">adapt_rate_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="w">    </span><span class="nt">sat_soft_width</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.35</span>

<span class="nt">controller_defaults</span><span class="p">:</span>
<span class="w">  </span><span class="nt">classical_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">gains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">5.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">5.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">5.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.5</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">sta_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">gains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">8.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">12.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4.85</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.43</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">adaptive_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">gains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">10.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">8.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">5.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">hybrid_adaptive_sta_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">gains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">5.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">5.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">5.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.5</span><span class="p p-Indicator">]</span>

<span class="nt">physics</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cart_mass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.5</span>
<span class="w">  </span><span class="nt">pendulum1_mass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span>
<span class="w">  </span><span class="nt">pendulum2_mass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.15</span>
<span class="w">  </span><span class="nt">pendulum1_length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
<span class="w">  </span><span class="nt">pendulum2_length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
<span class="w">  </span><span class="nt">gravity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9.81</span>
<span class="w">  </span><span class="nt">cart_friction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span>
<span class="w">  </span><span class="nt">joint1_friction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.005</span>
<span class="w">  </span><span class="nt">joint2_friction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.004</span>
</pre></div>
</div>
</section>
<section id="parameter-mapping-logic">
<h3>Parameter Mapping Logic<a class="headerlink" href="#parameter-mapping-logic" title="Link to this heading">¶</a></h3>
<p>The factory extracts parameters with the following priority:</p>
<ol class="arabic simple">
<li><p><strong>Controller-Specific Parameters</strong> (<code class="docutils literal notranslate"><span class="pre">config.controllers[type]</span></code>)</p></li>
<li><p><strong>Default Gains</strong> (<code class="docutils literal notranslate"><span class="pre">config.controller_defaults[type].gains</span></code>)</p></li>
<li><p><strong>Physics Parameters</strong> (<code class="docutils literal notranslate"><span class="pre">config.physics</span></code>) → Dynamics model creation</p></li>
<li><p><strong>Registry Fallbacks</strong> (when config missing/invalid)</p></li>
</ol>
</section>
<section id="complete-mapping-tables">
<h3>Complete Mapping Tables<a class="headerlink" href="#complete-mapping-tables" title="Link to this heading">¶</a></h3>
<section id="classical-smc-configuration-mapping">
<h4>Classical SMC Configuration Mapping<a class="headerlink" href="#classical-smc-configuration-mapping" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Config Parameter</p></th>
<th class="head"><p>Controller Init Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gains</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">gains</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List[float]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[20.0,</span> <span class="pre">15.0,</span> <span class="pre">12.0,</span> <span class="pre">8.0,</span> <span class="pre">35.0,</span> <span class="pre">5.0]</span></code></p></td>
<td><p>Gain vector [k1, k2, λ1, λ2, K, kd]</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max_force</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">max_force</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">150.0</span></code></p></td>
<td><p>Maximum control force [N]</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">boundary_layer</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">boundary_layer</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.02</span></code></p></td>
<td><p>Boundary layer thickness [rad/m]</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.001</span></code></p></td>
<td><p>Sampling time [s]</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">regularization_alpha</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">regularization_alpha</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1e-4</span></code></p></td>
<td><p>Numerical regularization</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min_regularization</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">min_regularization</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1e-10</span></code></p></td>
<td><p>Minimum regularization</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_condition_number</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">max_condition_number</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1e14</span></code></p></td>
<td><p>Max condition number</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">use_adaptive_regularization</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">use_adaptive_regularization</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>Adaptive regularization enable</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">config.physics</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dynamics_model</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DIPDynamics</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>Plant dynamics model (auto-created)</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># config.yaml</span>
<span class="nt">controllers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">classical_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">gains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">25.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">18.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">14.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">10.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">42.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6.0</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">max_force</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150.0</span>
<span class="w">    </span><span class="nt">boundary_layer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
<span class="w">    </span><span class="nt">dt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="c1"># Maps to ClassicalSMC initialization:</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">ClassicalSMC</span><span class="p">(</span>
    <span class="n">gains</span><span class="o">=</span><span class="p">[</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">18.0</span><span class="p">,</span> <span class="mf">14.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">42.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">],</span>
    <span class="n">max_force</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
    <span class="n">boundary_layer</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
    <span class="n">dt</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>
    <span class="n">regularization_alpha</span><span class="o">=</span><span class="mf">1e-4</span><span class="p">,</span>  <span class="c1"># Default</span>
    <span class="n">min_regularization</span><span class="o">=</span><span class="mf">1e-10</span><span class="p">,</span>    <span class="c1"># Default</span>
    <span class="n">max_condition_number</span><span class="o">=</span><span class="mf">1e14</span><span class="p">,</span>   <span class="c1"># Default</span>
    <span class="n">use_adaptive_regularization</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Default</span>
    <span class="n">dynamics_model</span><span class="o">=&lt;</span><span class="n">DIPDynamics</span> <span class="n">instance</span><span class="o">&gt;</span>  <span class="c1"># Auto-created from config.physics</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="super-twisting-smc-configuration-mapping">
<h4>Super-Twisting SMC Configuration Mapping<a class="headerlink" href="#super-twisting-smc-configuration-mapping" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Config Parameter</p></th>
<th class="head"><p>Controller Init Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gains</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">gains</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List[float]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[25.0,</span> <span class="pre">15.0,</span> <span class="pre">20.0,</span> <span class="pre">12.0,</span> <span class="pre">8.0,</span> <span class="pre">6.0]</span></code></p></td>
<td><p>[K1, K2, k1, k2, λ1, λ2] (K1 &gt; K2!)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max_force</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">max_force</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">150.0</span></code></p></td>
<td><p>Maximum control force [N]</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.001</span></code></p></td>
<td><p>Sampling time [s]</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">boundary_layer</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">boundary_layer</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.01</span></code></p></td>
<td><p>Boundary layer thickness</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">switch_method</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">switch_method</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'tanh'</span></code></p></td>
<td><p>Switching function (‘tanh’, ‘sign’)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">damping_gain</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">damping_gain</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.0</span></code></p></td>
<td><p>Additional damping</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">power_exponent</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">power_exponent</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.5</span></code></p></td>
<td><p>Fractional power exponent</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Critical Constraint:</strong> <code class="docutils literal notranslate"><span class="pre">gains[0]</span></code> (K1) must be greater than <code class="docutils literal notranslate"><span class="pre">gains[1]</span></code> (K2) for stability.</p>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># config.yaml</span>
<span class="nt">controllers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">sta_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">gains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">30.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">18.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">22.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">14.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">9.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">7.0</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># K1=30 &gt; K2=18 ✓</span>
<span class="w">    </span><span class="nt">max_force</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150.0</span>
<span class="w">    </span><span class="nt">dt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>
<span class="w">    </span><span class="nt">boundary_layer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
<span class="w">    </span><span class="nt">switch_method</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;tanh&#39;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="c1"># Maps to SuperTwistingSMC initialization:</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">SuperTwistingSMC</span><span class="p">(</span>
    <span class="n">gains</span><span class="o">=</span><span class="p">[</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">18.0</span><span class="p">,</span> <span class="mf">22.0</span><span class="p">,</span> <span class="mf">14.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">],</span>
    <span class="n">max_force</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
    <span class="n">dt</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>
    <span class="n">boundary_layer</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
    <span class="n">switch_method</span><span class="o">=</span><span class="s1">&#39;tanh&#39;</span><span class="p">,</span>
    <span class="n">damping_gain</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>  <span class="c1"># Default</span>
    <span class="n">power_exponent</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>  <span class="c1"># Default</span>
    <span class="n">dynamics_model</span><span class="o">=&lt;</span><span class="n">DIPDynamics</span> <span class="n">instance</span><span class="o">&gt;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="adaptive-smc-configuration-mapping">
<h4>Adaptive SMC Configuration Mapping<a class="headerlink" href="#adaptive-smc-configuration-mapping" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Config Parameter</p></th>
<th class="head"><p>Controller Init Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gains</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">gains</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List[float]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[25.0,</span> <span class="pre">18.0,</span> <span class="pre">15.0,</span> <span class="pre">10.0,</span> <span class="pre">4.0]</span></code></p></td>
<td><p>[k1, k2, λ1, λ2, γ] (exactly 5!)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max_force</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">max_force</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">150.0</span></code></p></td>
<td><p>Maximum control force [N]</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.001</span></code></p></td>
<td><p>Sampling time [s] (required!)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">leak_rate</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">leak_rate</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.01</span></code></p></td>
<td><p>Leakage rate for adaptation</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dead_zone</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dead_zone</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.05</span></code></p></td>
<td><p>Dead zone width</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">adapt_rate_limit</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">adapt_rate_limit</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10.0</span></code></p></td>
<td><p>Adaptation rate limit</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">K_min</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">K_min</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.1</span></code></p></td>
<td><p>Minimum adaptive gain</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">K_max</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">K_max</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">100.0</span></code></p></td>
<td><p>Maximum adaptive gain</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">K_init</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">K_init</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10.0</span></code></p></td>
<td><p>Initial adaptive gain</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alpha</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">alpha</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.5</span></code></p></td>
<td><p>Adaptation smoothing factor</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">boundary_layer</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">boundary_layer</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.01</span></code></p></td>
<td><p>Boundary layer thickness</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">smooth_switch</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">smooth_switch</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>Smooth switching enable</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Critical Requirement:</strong> Adaptive SMC requires exactly 5 gains and non-zero <code class="docutils literal notranslate"><span class="pre">dt</span></code>.</p>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># config.yaml</span>
<span class="nt">controllers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">adaptive_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">gains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">28.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">20.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">16.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">12.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">5.0</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Exactly 5 gains</span>
<span class="w">    </span><span class="nt">max_force</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150.0</span>
<span class="w">    </span><span class="nt">dt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span><span class="w">  </span><span class="c1"># Required!</span>
<span class="w">    </span><span class="nt">leak_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="w">    </span><span class="nt">dead_zone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
<span class="w">    </span><span class="nt">smooth_switch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="c1"># Maps to AdaptiveSMC initialization:</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">AdaptiveSMC</span><span class="p">(</span>
    <span class="n">gains</span><span class="o">=</span><span class="p">[</span><span class="mf">28.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">16.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">],</span>
    <span class="n">max_force</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
    <span class="n">dt</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>
    <span class="n">leak_rate</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
    <span class="n">dead_zone</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
    <span class="n">adapt_rate_limit</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>  <span class="c1"># Default</span>
    <span class="n">K_min</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>  <span class="c1"># Default</span>
    <span class="n">K_max</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>  <span class="c1"># Default</span>
    <span class="n">K_init</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>  <span class="c1"># Default</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>  <span class="c1"># Default</span>
    <span class="n">boundary_layer</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>  <span class="c1"># Default</span>
    <span class="n">smooth_switch</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">dynamics_model</span><span class="o">=&lt;</span><span class="n">DIPDynamics</span> <span class="n">instance</span><span class="o">&gt;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="hybrid-adaptive-sta-smc-configuration-mapping">
<h4>Hybrid Adaptive-STA SMC Configuration Mapping<a class="headerlink" href="#hybrid-adaptive-sta-smc-configuration-mapping" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Config Parameter</p></th>
<th class="head"><p>Controller Init Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gains</span></code></p></td>
<td><p>N/A (uses sub-configs)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List[float]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[18.0,</span> <span class="pre">12.0,</span> <span class="pre">10.0,</span> <span class="pre">8.0]</span></code></p></td>
<td><p>Sliding surface gains</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max_force</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">max_force</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">150.0</span></code></p></td>
<td><p>Maximum control force [N]</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.001</span></code></p></td>
<td><p>Sampling time [s]</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hybrid_mode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hybrid_mode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">HybridMode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CLASSICAL_ADAPTIVE</span></code></p></td>
<td><p>Hybrid mode enum</p></td>
</tr>
<tr class="row-even"><td><p>N/A</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">classical_config</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ClassicalSMCConfig</span></code></p></td>
<td><p>Auto-created</p></td>
<td><p>Sub-config for classical mode</p></td>
</tr>
<tr class="row-odd"><td><p>N/A</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">adaptive_config</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AdaptiveSMCConfig</span></code></p></td>
<td><p>Auto-created</p></td>
<td><p>Sub-config for adaptive mode</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">k1_init</span></code></p></td>
<td><p>Via sub-configs</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4.0</span></code></p></td>
<td><p>Initial adaptive gain k1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">k2_init</span></code></p></td>
<td><p>Via sub-configs</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.4</span></code></p></td>
<td><p>Initial adaptive gain k2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gamma1</span></code></p></td>
<td><p>Via sub-configs</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2.0</span></code></p></td>
<td><p>Adaptation rate for k1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">gamma2</span></code></p></td>
<td><p>Via sub-configs</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.5</span></code></p></td>
<td><p>Adaptation rate for k2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dead_zone</span></code></p></td>
<td><p>Via sub-configs</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.05</span></code></p></td>
<td><p>Dead zone width</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">enable_equivalent</span></code></p></td>
<td><p>Via sub-configs</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>Equivalent control enable</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">damping_gain</span></code></p></td>
<td><p>Via sub-configs</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">3.0</span></code></p></td>
<td><p>Damping gain</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sat_soft_width</span></code></p></td>
<td><p>Via sub-configs</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.35</span></code></p></td>
<td><p>Soft saturation width</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Special Note:</strong> Hybrid controller requires sub-configurations. The factory auto-creates these if not provided.</p>
<p><strong>Example:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># config.yaml</span>
<span class="nt">controllers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hybrid_adaptive_sta_smc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_force</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150.0</span>
<span class="w">    </span><span class="nt">dt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>
<span class="w">    </span><span class="nt">k1_init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.0</span>
<span class="w">    </span><span class="nt">k2_init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
<span class="w">    </span><span class="nt">gamma1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
<span class="w">    </span><span class="nt">gamma2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">    </span><span class="nt">dead_zone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Factory auto-creates sub-configs:</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.smc.algorithms.classical.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClassicalSMCConfig</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.smc.algorithms.adaptive.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">AdaptiveSMCConfig</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.smc.algorithms.hybrid.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">HybridMode</span>

<span class="n">classical_config</span> <span class="o">=</span> <span class="n">ClassicalSMCConfig</span><span class="p">(</span>
    <span class="n">gains</span><span class="o">=</span><span class="p">[</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">35.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">],</span>
    <span class="n">max_force</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
    <span class="n">dt</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>
    <span class="n">boundary_layer</span><span class="o">=</span><span class="mf">0.02</span>
<span class="p">)</span>

<span class="n">adaptive_config</span> <span class="o">=</span> <span class="n">AdaptiveSMCConfig</span><span class="p">(</span>
    <span class="n">gains</span><span class="o">=</span><span class="p">[</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">18.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span>
    <span class="n">max_force</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
    <span class="n">dt</span><span class="o">=</span><span class="mf">0.001</span>
<span class="p">)</span>

<span class="c1"># Maps to ModularHybridSMC initialization:</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.smc.algorithms.hybrid.controller</span><span class="w"> </span><span class="kn">import</span> <span class="n">ModularHybridSMC</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">ModularHybridSMC</span><span class="p">(</span>
    <span class="n">HybridAdaptiveSTASMCConfig</span><span class="p">(</span>
        <span class="n">hybrid_mode</span><span class="o">=</span><span class="n">HybridMode</span><span class="o">.</span><span class="n">CLASSICAL_ADAPTIVE</span><span class="p">,</span>
        <span class="n">dt</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>
        <span class="n">max_force</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
        <span class="n">classical_config</span><span class="o">=</span><span class="n">classical_config</span><span class="p">,</span>
        <span class="n">adaptive_config</span><span class="o">=</span><span class="n">adaptive_config</span><span class="p">,</span>
        <span class="n">dynamics_model</span><span class="o">=</span><span class="kc">None</span>  <span class="c1"># Hybrid uses sub-controller dynamics</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="validation-rules">
<h2>Validation Rules<a class="headerlink" href="#validation-rules" title="Link to this heading">¶</a></h2>
<p>The factory enforces comprehensive validation rules for controller creation.</p>
<section id="gain-validation-rules">
<h3>Gain Validation Rules<a class="headerlink" href="#gain-validation-rules" title="Link to this heading">¶</a></h3>
<section id="universal-gain-constraints">
<h4>Universal Gain Constraints<a class="headerlink" href="#universal-gain-constraints" title="Link to this heading">¶</a></h4>
<p>All controllers must satisfy:</p>
<ol class="arabic simple">
<li><p><strong>Count Constraint:</strong> <code class="docutils literal notranslate"><span class="pre">len(gains)</span> <span class="pre">==</span> <span class="pre">controller_info['gain_count']</span></code></p></li>
<li><p><strong>Type Constraint:</strong> All gains must be <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">float</span></code></p></li>
<li><p><strong>Finiteness Constraint:</strong> All gains must be finite (not <code class="docutils literal notranslate"><span class="pre">inf</span></code>, not <code class="docutils literal notranslate"><span class="pre">NaN</span></code>)</p></li>
<li><p><strong>Positivity Constraint:</strong> All gains must be <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">0</span></code></p></li>
</ol>
<p><strong>Validation Code:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_validate_controller_gains</span><span class="p">(</span><span class="n">gains</span><span class="p">,</span> <span class="n">controller_info</span><span class="p">,</span> <span class="n">controller_type</span><span class="p">):</span>
    <span class="n">expected_count</span> <span class="o">=</span> <span class="n">controller_info</span><span class="p">[</span><span class="s1">&#39;gain_count&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="o">!=</span> <span class="n">expected_count</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Controller &#39;</span><span class="si">{</span><span class="n">controller_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;unknown&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;requires </span><span class="si">{</span><span class="n">expected_count</span><span class="si">}</span><span class="s2"> gains, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;All gains must be finite numbers&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;All gains must be positive&quot;</span><span class="p">)</span>

    <span class="c1"># Controller-specific validation...</span>
</pre></div>
</div>
</section>
<section id="controller-specific-validation-rules">
<h4>Controller-Specific Validation Rules<a class="headerlink" href="#controller-specific-validation-rules" title="Link to this heading">¶</a></h4>
<p><strong>Classical SMC:</strong></p>
<ul class="simple">
<li><p>No additional constraints beyond universal rules</p></li>
<li><p>All 6 gains must be positive and finite</p></li>
</ul>
<p><strong>Super-Twisting SMC:</strong></p>
<ul class="simple">
<li><p><strong>Critical Constraint:</strong> <code class="docutils literal notranslate"><span class="pre">K1</span> <span class="pre">&gt;</span> <span class="pre">K2</span></code> (gains[0] &gt; gains[1])</p></li>
<li><p>Ensures finite-time convergence and chattering reduction</p></li>
<li><p>Factory raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if violated</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">controller_type</span> <span class="o">==</span> <span class="s1">&#39;sta_smc&#39;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">K1</span><span class="p">,</span> <span class="n">K2</span> <span class="o">=</span> <span class="n">gains</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">gains</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">K1</span> <span class="o">&lt;=</span> <span class="n">K2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Super-Twisting stability requires K1 &gt; K2 &gt; 0&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Adaptive SMC:</strong></p>
<ul class="simple">
<li><p><strong>Exact Count Constraint:</strong> Must have exactly 5 gains</p></li>
<li><p>Factory raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> for any other count</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">controller_type</span> <span class="o">==</span> <span class="s1">&#39;adaptive_smc&#39;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">5</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Adaptive SMC requires exactly 5 gains: [k1, k2, lam1, lam2, gamma]&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Hybrid Adaptive-STA SMC:</strong></p>
<ul class="simple">
<li><p>Must have exactly 4 gains</p></li>
<li><p>Sub-configurations must be valid</p></li>
</ul>
</section>
</section>
<section id="parameter-validation-rules">
<h3>Parameter Validation Rules<a class="headerlink" href="#parameter-validation-rules" title="Link to this heading">¶</a></h3>
<section id="physical-constraints">
<h4>Physical Constraints<a class="headerlink" href="#physical-constraints" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Constraint</p></th>
<th class="head"><p>Rationale</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_force</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">0</span></code></p></td>
<td><p>Actuator physical limit</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">0</span></code></p></td>
<td><p>Sampling time must be positive</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">boundary_layer</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">≥</span> <span class="pre">0</span></code></p></td>
<td><p>Chattering reduction layer</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">K_min</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">0</span></code></p></td>
<td><p>Minimum adaptive gain</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">K_max</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">K_min</span></code></p></td>
<td><p>Maximum adaptive gain</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dead_zone</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">≥</span> <span class="pre">0</span></code></p></td>
<td><p>Dead zone width</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sat_soft_width</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">≥</span> <span class="pre">dead_zone</span></code></p></td>
<td><p>Soft saturation must cover dead zone</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="mpc-specific-validation">
<h4>MPC-Specific Validation<a class="headerlink" href="#mpc-specific-validation" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_validate_mpc_parameters</span><span class="p">(</span><span class="n">config_params</span><span class="p">,</span> <span class="n">controller_params</span><span class="p">):</span>
    <span class="n">all_params</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">config_params</span><span class="p">,</span> <span class="o">**</span><span class="n">controller_params</span><span class="p">}</span>

    <span class="c1"># Horizon validation</span>
    <span class="k">if</span> <span class="s1">&#39;horizon&#39;</span> <span class="ow">in</span> <span class="n">all_params</span><span class="p">:</span>
        <span class="n">horizon</span> <span class="o">=</span> <span class="n">all_params</span><span class="p">[</span><span class="s1">&#39;horizon&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">horizon</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">ConfigValueError</span><span class="p">(</span><span class="s2">&quot;horizon must be an integer&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">horizon</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigValueError</span><span class="p">(</span><span class="s2">&quot;horizon must be ≥ 1&quot;</span><span class="p">)</span>

    <span class="c1"># Weight parameters must be non-negative</span>
    <span class="n">weight_params</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;q_x&#39;</span><span class="p">,</span> <span class="s1">&#39;q_theta&#39;</span><span class="p">,</span> <span class="s1">&#39;r_u&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">weight_params</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">all_params</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">all_params</span><span class="p">[</span><span class="n">param</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ConfigValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">param</span><span class="si">}</span><span class="s2"> must be ≥ 0&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="validation-examples">
<h3>Validation Examples<a class="headerlink" href="#validation-examples" title="Link to this heading">¶</a></h3>
<p><strong>Example 1: Valid Classical SMC Gains</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span>

<span class="c1"># Valid: 6 positive finite gains</span>
<span class="n">gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">35.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">]</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="n">gains</span><span class="p">)</span>  <span class="c1"># ✓ Success</span>
</pre></div>
</div>
<p><strong>Example 2: Invalid Gain Count</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span>

<span class="c1"># Invalid: Wrong number of gains</span>
<span class="n">gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">]</span>  <span class="c1"># Only 3 gains, need 6</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="n">gains</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1"># Output: &quot;Controller &#39;Classical sliding mode controller with boundary layer&#39;</span>
    <span class="c1">#          requires 6 gains, got 3&quot;</span>
</pre></div>
</div>
<p><strong>Example 3: Invalid STA Constraint</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span>

<span class="c1"># Invalid: K1 ≤ K2 violates super-twisting stability</span>
<span class="n">gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">15.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]</span>  <span class="c1"># K1=15 ≤ K2=20 ✗</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;sta_smc&#39;</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="n">gains</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1"># Output: &quot;Super-Twisting stability requires K1 &gt; K2 &gt; 0&quot;</span>
</pre></div>
</div>
<p><strong>Example 4: Automatic Correction</strong></p>
<p>The factory attempts automatic correction for invalid default gains:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Factory detects invalid default gains and auto-corrects</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;sta_smc&#39;</span><span class="p">)</span>  <span class="c1"># Uses defaults</span>

<span class="c1"># If defaults violate K1 &gt; K2, factory automatically uses:</span>
<span class="c1"># [25.0, 15.0, 20.0, 12.0, 8.0, 6.0]  # K1=25 &gt; K2=15 ✓</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="error-handling">
<h2>Error Handling<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h2>
<p>The factory implements comprehensive error handling with graceful degradation.</p>
<section id="exception-hierarchy">
<h3>Exception Hierarchy<a class="headerlink" href="#exception-hierarchy" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ne">Exception</span>
<span class="err">├──</span> <span class="ne">ValueError</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">Invalid</span> <span class="n">controller</span> <span class="nb">type</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">Invalid</span> <span class="n">gain</span> <span class="n">count</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">Invalid</span> <span class="n">gain</span> <span class="n">values</span> <span class="p">(</span><span class="n">non</span><span class="o">-</span><span class="n">finite</span><span class="p">,</span> <span class="n">non</span><span class="o">-</span><span class="n">positive</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">Controller</span><span class="o">-</span><span class="n">specific</span> <span class="n">constraints</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span> <span class="n">K1</span> <span class="err">≤</span> <span class="n">K2</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">Empty</span> <span class="ow">or</span> <span class="n">non</span><span class="o">-</span><span class="n">string</span> <span class="n">controller</span> <span class="nb">type</span>
<span class="err">│</span>
<span class="err">├──</span> <span class="ne">ImportError</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">Missing</span> <span class="n">optional</span> <span class="n">dependencies</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span> <span class="n">MPC</span> <span class="n">without</span> <span class="n">cvxpy</span><span class="p">)</span>
<span class="err">│</span>
<span class="err">├──</span> <span class="n">FactoryConfigurationError</span> <span class="p">(</span><span class="n">custom</span><span class="p">)</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">Configuration</span> <span class="n">building</span> <span class="n">failed</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">Missing</span> <span class="n">required</span> <span class="n">parameters</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">Incompatible</span> <span class="n">configuration</span> <span class="n">structure</span>
<span class="err">│</span>
<span class="err">└──</span> <span class="n">ConfigValueError</span> <span class="p">(</span><span class="n">custom</span><span class="p">,</span> <span class="n">subclass</span> <span class="n">of</span> <span class="ne">ValueError</span><span class="p">)</span>
    <span class="err">├──</span> <span class="n">Invalid</span> <span class="n">MPC</span> <span class="n">horizon</span>
    <span class="err">├──</span> <span class="n">Invalid</span> <span class="n">MPC</span> <span class="n">weights</span>
    <span class="err">└──</span> <span class="n">Invalid</span> <span class="n">physical</span> <span class="n">parameters</span>
</pre></div>
</div>
</section>
<section id="error-handling-patterns">
<h3>Error Handling Patterns<a class="headerlink" href="#error-handling-patterns" title="Link to this heading">¶</a></h3>
<section id="pattern-1-type-validation-with-detailed-messages">
<h4>Pattern 1: Type Validation with Detailed Messages<a class="headerlink" href="#pattern-1-type-validation-with-detailed-messages" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">_canonicalize_controller_type</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Controller type must be string, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Controller type cannot be empty&quot;</span><span class="p">)</span>

    <span class="n">key</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">CONTROLLER_ALIASES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Error Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>  <span class="c1"># Wrong type</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1"># Output: &quot;Controller type must be string, got &lt;class &#39;int&#39;&gt;&quot;</span>
</pre></div>
</div>
</section>
<section id="pattern-2-registry-lookup-with-availability-check">
<h4>Pattern 2: Registry Lookup with Availability Check<a class="headerlink" href="#pattern-2-registry-lookup-with-availability-check" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_get_controller_info</span><span class="p">(</span><span class="n">controller_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">controller_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">CONTROLLER_REGISTRY</span><span class="p">:</span>
        <span class="n">available</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">CONTROLLER_REGISTRY</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unknown controller type &#39;</span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2">&#39;. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Available: </span><span class="si">{</span><span class="n">available</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">controller_info</span> <span class="o">=</span> <span class="n">CONTROLLER_REGISTRY</span><span class="p">[</span><span class="n">controller_type</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">controller_info</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">controller_type</span> <span class="o">==</span> <span class="s1">&#39;mpc_controller&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;MPC controller missing optional dependency&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Controller class for </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2"> is not available&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">controller_info</span>
</pre></div>
</div>
<p><strong>Error Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;nonexistent_controller&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1"># Output: &quot;Unknown controller type &#39;nonexistent_controller&#39;.</span>
    <span class="c1">#          Available: [&#39;adaptive_smc&#39;, &#39;classical_smc&#39;, &#39;hybrid_adaptive_sta_smc&#39;,</span>
    <span class="c1">#                      &#39;mpc_controller&#39;, &#39;sta_smc&#39;]&quot;</span>
</pre></div>
</div>
</section>
<section id="pattern-3-graceful-degradation-with-fallback">
<h4>Pattern 3: Graceful Degradation with Fallback<a class="headerlink" href="#pattern-3-graceful-degradation-with-fallback" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">controller_config</span> <span class="o">=</span> <span class="n">config_class</span><span class="p">(</span><span class="o">**</span><span class="n">config_params</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c1"># Log failure and use fallback configuration</span>
    <span class="k">if</span> <span class="n">logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not create full config, using minimal config: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Fallback to minimal configuration with all required defaults</span>
    <span class="n">fallback_params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;gains&#39;</span><span class="p">:</span> <span class="n">controller_gains</span><span class="p">,</span>
        <span class="s1">&#39;max_force&#39;</span><span class="p">:</span> <span class="mf">150.0</span><span class="p">,</span>
        <span class="s1">&#39;dt&#39;</span><span class="p">:</span> <span class="mf">0.001</span>
    <span class="p">}</span>

    <span class="c1"># Add controller-specific required parameters</span>
    <span class="k">if</span> <span class="n">controller_type</span> <span class="o">==</span> <span class="s1">&#39;classical_smc&#39;</span><span class="p">:</span>
        <span class="n">fallback_params</span><span class="p">[</span><span class="s1">&#39;boundary_layer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.02</span>

    <span class="n">controller_config</span> <span class="o">=</span> <span class="n">config_class</span><span class="p">(</span><span class="o">**</span><span class="n">fallback_params</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pattern-4-automatic-correction">
<h4>Pattern 4: Automatic Correction<a class="headerlink" href="#pattern-4-automatic-correction" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">_validate_controller_gains</span><span class="p">(</span><span class="n">controller_gains</span><span class="p">,</span> <span class="n">controller_info</span><span class="p">,</span> <span class="n">controller_type</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c1"># For invalid default gains, try to fix them automatically</span>
    <span class="k">if</span> <span class="n">gains</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Only auto-fix if using default gains</span>
        <span class="k">if</span> <span class="n">controller_type</span> <span class="o">==</span> <span class="s1">&#39;sta_smc&#39;</span><span class="p">:</span>
            <span class="c1"># Fix K1 &gt; K2 requirement</span>
            <span class="n">controller_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">controller_type</span> <span class="o">==</span> <span class="s1">&#39;adaptive_smc&#39;</span><span class="p">:</span>
            <span class="c1"># Fix 5-gain requirement</span>
            <span class="n">controller_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">18.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>  <span class="c1"># Cannot auto-fix, re-raise exception</span>

        <span class="c1"># Re-validate after fix</span>
        <span class="n">_validate_controller_gains</span><span class="p">(</span><span class="n">controller_gains</span><span class="p">,</span> <span class="n">controller_info</span><span class="p">,</span> <span class="n">controller_type</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">e</span>  <span class="c1"># User-provided gains, do not auto-correct</span>
</pre></div>
</div>
</section>
</section>
<section id="error-handling-best-practices">
<h3>Error Handling Best Practices<a class="headerlink" href="#error-handling-best-practices" title="Link to this heading">¶</a></h3>
<section id="best-practice-1-defensive-controller-creation">
<h4>Best Practice 1: Defensive Controller Creation<a class="headerlink" href="#best-practice-1-defensive-controller-creation" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span><span class="p">,</span> <span class="n">list_available_controllers</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_controller_safely</span><span class="p">(</span><span class="n">controller_type</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create controller with comprehensive error handling.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Check availability first</span>
        <span class="k">if</span> <span class="n">controller_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">list_available_controllers</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2"> not available&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Attempt creation</span>
        <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="n">controller_type</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">gains</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">controller</span>

    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Validation error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dependency error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
</section>
<section id="best-practice-2-gain-validation-before-pso">
<h4>Best Practice 2: Gain Validation Before PSO<a class="headerlink" href="#best-practice-2-gain-validation-before-pso" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_gain_bounds_for_pso</span><span class="p">,</span> <span class="n">SMCType</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_pso_particle</span><span class="p">(</span><span class="n">gains</span><span class="p">,</span> <span class="n">smc_type</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate PSO particle before fitness evaluation.&quot;&quot;&quot;</span>
    <span class="c1"># Get bounds for controller type</span>
    <span class="n">lower_bounds</span><span class="p">,</span> <span class="n">upper_bounds</span> <span class="o">=</span> <span class="n">get_gain_bounds_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">)</span>

    <span class="c1"># Check bounds</span>
    <span class="n">gains</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">gains</span> <span class="o">&lt;</span> <span class="n">lower_bounds</span><span class="p">)</span> <span class="ow">or</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">gains</span> <span class="o">&gt;</span> <span class="n">upper_bounds</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Check controller-specific constraints</span>
    <span class="k">if</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">gains</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">gains</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>  <span class="c1"># K1 must be &gt; K2</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="best-practice-3-configuration-validation">
<h4>Best Practice 3: Configuration Validation<a class="headerlink" href="#best-practice-3-configuration-validation" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_configuration_before_creation</span><span class="p">(</span><span class="n">config_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate configuration file before controller creation.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to load config: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Check required sections exist</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;controllers&#39;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Config missing &#39;controllers&#39; section&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Validate each controller configuration</span>
    <span class="k">for</span> <span class="n">controller_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="s1">&#39;sta_smc&#39;</span><span class="p">,</span> <span class="s1">&#39;adaptive_smc&#39;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="n">controller_type</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✓ </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2"> config valid&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✗ </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2"> config invalid: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="extensibility-guide">
<h2>Extensibility Guide<a class="headerlink" href="#extensibility-guide" title="Link to this heading">¶</a></h2>
<p>The factory system is designed for easy extension with new controller types.</p>
<section id="adding-a-new-controller-type">
<h3>Adding a New Controller Type<a class="headerlink" href="#adding-a-new-controller-type" title="Link to this heading">¶</a></h3>
<section id="step-1-implement-controller-class">
<h4>Step 1: Implement Controller Class<a class="headerlink" href="#step-1-implement-controller-class" title="Link to this heading">¶</a></h4>
<p>Create a controller class implementing the <code class="docutils literal notranslate"><span class="pre">ControllerProtocol</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="c1"># src/controllers/new_controller.py</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Any</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">numpy.typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">NDArray</span>

<span class="k">class</span><span class="w"> </span><span class="nc">NewController</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;New controller implementation.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">max_force</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize new controller.</span>

<span class="sd">        Args:</span>
<span class="sd">            gains: Controller gains [g1, g2, g3, ...]</span>
<span class="sd">            max_force: Maximum control force [N]</span>
<span class="sd">            dt: Sampling time [s]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gains</span> <span class="o">=</span> <span class="n">gains</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_force</span> <span class="o">=</span> <span class="n">max_force</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dt</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="c1"># Additional initialization...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compute_control</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">state</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">],</span>
        <span class="n">last_control</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">history</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compute control output.&quot;&quot;&quot;</span>
        <span class="c1"># Controller logic...</span>
        <span class="n">u</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># Compute control</span>

        <span class="c1"># Saturation</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">max_force</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_force</span><span class="p">)</span>

        <span class="c1"># Return control output (can be dict, float, or structured result)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;u&#39;</span><span class="p">:</span> <span class="n">u</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset controller state.&quot;&quot;&quot;</span>
        <span class="c1"># Reset internal state...</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">gains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return controller gains.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gains</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="step-2-create-configuration-class">
<h4>Step 2: Create Configuration Class<a class="headerlink" href="#step-2-create-configuration-class" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="c1"># src/controllers/new_controller_config.py</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NewControllerConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for NewController.&quot;&quot;&quot;</span>

    <span class="n">gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    <span class="n">max_force</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span>
    <span class="c1"># Additional parameters...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate configuration.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gains</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>  <span class="c1"># Example: requires 4 gains</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;NewController requires 4 gains&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_force</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;max_force must be positive&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dt</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;dt must be positive&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="step-3-register-in-factory">
<h4>Step 3: Register in Factory<a class="headerlink" href="#step-3-register-in-factory" title="Link to this heading">¶</a></h4>
<p>Add entry to <code class="docutils literal notranslate"><span class="pre">CONTROLLER_REGISTRY</span></code> in <code class="docutils literal notranslate"><span class="pre">src/controllers/factory.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import new controller</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.new_controller</span><span class="w"> </span><span class="kn">import</span> <span class="n">NewController</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.new_controller_config</span><span class="w"> </span><span class="kn">import</span> <span class="n">NewControllerConfig</span>

<span class="c1"># Add to registry</span>
<span class="n">CONTROLLER_REGISTRY</span><span class="p">[</span><span class="s1">&#39;new_controller&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="n">NewController</span><span class="p">,</span>
    <span class="s1">&#39;config_class&#39;</span><span class="p">:</span> <span class="n">NewControllerConfig</span><span class="p">,</span>
    <span class="s1">&#39;default_gains&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span>  <span class="c1"># Reasonable defaults</span>
    <span class="s1">&#39;gain_count&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;New advanced controller&#39;</span><span class="p">,</span>
    <span class="s1">&#39;supports_dynamics&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Whether it uses dynamics_model</span>
    <span class="s1">&#39;required_params&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;gains&#39;</span><span class="p">,</span> <span class="s1">&#39;max_force&#39;</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="step-4-add-type-aliases-optional">
<h4>Step 4: Add Type Aliases (Optional)<a class="headerlink" href="#step-4-add-type-aliases-optional" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add aliases for convenience</span>
<span class="n">CONTROLLER_ALIASES</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;new&#39;</span><span class="p">:</span> <span class="s1">&#39;new_controller&#39;</span><span class="p">,</span>
    <span class="s1">&#39;new_ctrl&#39;</span><span class="p">:</span> <span class="s1">&#39;new_controller&#39;</span><span class="p">,</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
<section id="step-5-add-configuration-schema">
<h4>Step 5: Add Configuration Schema<a class="headerlink" href="#step-5-add-configuration-schema" title="Link to this heading">¶</a></h4>
<p>Update <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">controllers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">new_controller</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_force</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150.0</span>
<span class="w">    </span><span class="nt">dt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>
<span class="w">    </span><span class="c1"># Additional parameters...</span>

<span class="nt">controller_defaults</span><span class="p">:</span>
<span class="w">  </span><span class="nt">new_controller</span><span class="p">:</span>
<span class="w">    </span><span class="nt">gains</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">10.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">8.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">5.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.0</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<section id="step-6-add-pso-support-optional">
<h4>Step 6: Add PSO Support (Optional)<a class="headerlink" href="#step-6-add-pso-support-optional" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="c1"># Add to SMCType enum</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SMCType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">CLASSICAL</span> <span class="o">=</span> <span class="s2">&quot;classical_smc&quot;</span>
    <span class="n">ADAPTIVE</span> <span class="o">=</span> <span class="s2">&quot;adaptive_smc&quot;</span>
    <span class="n">SUPER_TWISTING</span> <span class="o">=</span> <span class="s2">&quot;sta_smc&quot;</span>
    <span class="n">HYBRID</span> <span class="o">=</span> <span class="s2">&quot;hybrid_adaptive_sta_smc&quot;</span>
    <span class="n">NEW_CONTROLLER</span> <span class="o">=</span> <span class="s2">&quot;new_controller&quot;</span>  <span class="c1"># Add new type</span>

<span class="c1"># Add to gain count mapping</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_expected_gain_count</span><span class="p">(</span><span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">expected_counts</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">NEW_CONTROLLER</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>  <span class="c1"># Add expected count</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">expected_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>

<span class="c1"># Add PSO bounds</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_gain_bounds_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="n">bounds_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1"># ... existing bounds ...</span>
        <span class="n">SMCType</span><span class="o">.</span><span class="n">NEW_CONTROLLER</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;lower&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
            <span class="s1">&#39;upper&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">bounds_map</span><span class="p">[</span><span class="n">smc_type</span><span class="p">][</span><span class="s1">&#39;lower&#39;</span><span class="p">],</span> <span class="n">bounds_map</span><span class="p">[</span><span class="n">smc_type</span><span class="p">][</span><span class="s1">&#39;upper&#39;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="step-7-test-new-controller">
<h4>Step 7: Test New Controller<a class="headerlink" href="#step-7-test-new-controller" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># test_new_controller.py</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span><span class="p">,</span> <span class="n">get_default_gains</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_new_controller_creation</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test new controller can be created.&quot;&quot;&quot;</span>
    <span class="c1"># Test with defaults</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;new_controller&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">controller</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">assert</span> <span class="n">controller</span><span class="o">.</span><span class="n">gains</span> <span class="o">==</span> <span class="p">[</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]</span>

    <span class="c1"># Test with custom gains</span>
    <span class="n">custom_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">]</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;new_controller&#39;</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="n">custom_gains</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">controller</span><span class="o">.</span><span class="n">gains</span> <span class="o">==</span> <span class="n">custom_gains</span>

    <span class="c1"># Test compute_control</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">compute_control</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="p">{})</span>
    <span class="k">assert</span> <span class="s1">&#39;u&#39;</span> <span class="ow">in</span> <span class="n">result</span>
    <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;u&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">test_new_controller_creation</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ New controller tests passed&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="extension-checklist">
<h3>Extension Checklist<a class="headerlink" href="#extension-checklist" title="Link to this heading">¶</a></h3>
<p>When adding a new controller type, ensure:</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Controller class implements <code class="docutils literal notranslate"><span class="pre">compute_control()</span></code>, <code class="docutils literal notranslate"><span class="pre">reset()</span></code>, and <code class="docutils literal notranslate"><span class="pre">gains</span></code> property</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Configuration class validates all parameters</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Registry entry includes all required metadata</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Default gains are physically reasonable</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Required parameters list is complete and accurate</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Type aliases added for common variations (optional)</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Configuration schema updated in config.yaml</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> PSO support added if optimization needed (optional)</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Unit tests cover creation and basic functionality</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Documentation includes gain interpretation and constraints</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Thread safety preserved (no global state mutations)</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="complete-code-examples">
<h2>Complete Code Examples<a class="headerlink" href="#complete-code-examples" title="Link to this heading">¶</a></h2>
<section id="example-1-basic-factory-usage">
<h3>Example 1: Basic Factory Usage<a class="headerlink" href="#example-1-basic-factory-usage" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Example 1: Basic Factory Usage</span>
<span class="sd">Demonstrates the simplest controller creation patterns.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span><span class="p">,</span> <span class="n">list_available_controllers</span><span class="p">,</span> <span class="n">get_default_gains</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Query available controllers</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Available controllers:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">controller_type</span> <span class="ow">in</span> <span class="n">list_available_controllers</span><span class="p">():</span>
        <span class="n">defaults</span> <span class="o">=</span> <span class="n">get_default_gains</span><span class="p">(</span><span class="n">controller_type</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">defaults</span><span class="p">)</span><span class="si">}</span><span class="s2"> gains&quot;</span><span class="p">)</span>

    <span class="c1"># Load configuration</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>

    <span class="c1"># Create controller with config defaults</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Created classical_smc with gains: </span><span class="si">{</span><span class="n">controller</span><span class="o">.</span><span class="n">gains</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Use controller in simulation</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">compute_control</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="p">{})</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">):</span>
        <span class="n">control</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">u</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">control</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;u&#39;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">control</span> <span class="o">=</span> <span class="n">result</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Control output: </span><span class="si">{</span><span class="n">control</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> N&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="example-2-pso-optimized-controller-creation">
<h3>Example 2: PSO-Optimized Controller Creation<a class="headerlink" href="#example-2-pso-optimized-controller-creation" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Example 2: PSO-Optimized Controller Creation</span>
<span class="sd">Demonstrates complete PSO workflow for gain optimization.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">SMCType</span><span class="p">,</span> <span class="n">create_pso_controller_factory</span><span class="p">,</span> <span class="n">create_controller</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.optimization.algorithms.pso_optimizer</span><span class="w"> </span><span class="kn">import</span> <span class="n">PSOTuner</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">evaluate_controller</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">test_states</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Evaluate controller performance on test trajectories.&quot;&quot;&quot;</span>
    <span class="n">total_cost</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">test_states</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">compute_control</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">):</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">u</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;u&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">else</span> <span class="n">result</span>

        <span class="c1"># Compute cost: state regulation + control effort</span>
        <span class="n">cost</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">state</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">u</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">total_cost</span> <span class="o">+=</span> <span class="n">cost</span>

    <span class="k">return</span> <span class="n">total_cost</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_states</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Load configuration</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>

    <span class="c1"># Step 1: Create PSO-compatible controller factory</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creating PSO controller factory...&quot;</span><span class="p">)</span>
    <span class="n">controller_factory</span> <span class="o">=</span> <span class="n">create_pso_controller_factory</span><span class="p">(</span>
        <span class="n">smc_type</span><span class="o">=</span><span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">,</span>
        <span class="n">max_force</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
        <span class="n">dt</span><span class="o">=</span><span class="mf">0.001</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Factory configured for </span><span class="si">{</span><span class="n">controller_factory</span><span class="o">.</span><span class="n">n_gains</span><span class="si">}</span><span class="s2"> gains&quot;</span><span class="p">)</span>

    <span class="c1"># Step 2: Initialize PSO tuner</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Initializing PSO tuner...&quot;</span><span class="p">)</span>
    <span class="n">tuner</span> <span class="o">=</span> <span class="n">PSOTuner</span><span class="p">(</span>
        <span class="n">controller_factory</span><span class="o">=</span><span class="n">controller_factory</span><span class="p">,</span>
        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
        <span class="n">seed</span><span class="o">=</span><span class="mi">42</span>
    <span class="p">)</span>

    <span class="c1"># Step 3: Run PSO optimization</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running PSO optimization (30 particles, 100 iterations)...&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">tuner</span><span class="o">.</span><span class="n">optimise</span><span class="p">(</span>
        <span class="n">n_particles_override</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">iters_override</span><span class="o">=</span><span class="mi">100</span>
    <span class="p">)</span>

    <span class="c1"># Step 4: Extract results</span>
    <span class="n">optimized_gains</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;best_pos&#39;</span><span class="p">]</span>
    <span class="n">best_cost</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;best_cost&#39;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Optimization complete!&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Best cost: </span><span class="si">{</span><span class="n">best_cost</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Optimized gains: </span><span class="si">{</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">g</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">optimized_gains</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Step 5: Create final controller</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Creating optimized controller...&quot;</span><span class="p">)</span>
    <span class="n">optimized_controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="n">optimized_gains</span><span class="p">)</span>

    <span class="c1"># Step 6: Compare with baseline</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Comparing with baseline...&quot;</span><span class="p">)</span>
    <span class="n">baseline_controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>

    <span class="c1"># Generate test states</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
    <span class="n">test_states</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]),</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">])</span>
    <span class="p">]</span>

    <span class="n">baseline_cost</span> <span class="o">=</span> <span class="n">evaluate_controller</span><span class="p">(</span><span class="n">baseline_controller</span><span class="p">,</span> <span class="n">test_states</span><span class="p">)</span>
    <span class="n">optimized_cost</span> <span class="o">=</span> <span class="n">evaluate_controller</span><span class="p">(</span><span class="n">optimized_controller</span><span class="p">,</span> <span class="n">test_states</span><span class="p">)</span>

    <span class="n">improvement</span> <span class="o">=</span> <span class="p">(</span><span class="n">baseline_cost</span> <span class="o">-</span> <span class="n">optimized_cost</span><span class="p">)</span> <span class="o">/</span> <span class="n">baseline_cost</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Baseline cost: </span><span class="si">{</span><span class="n">baseline_cost</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Optimized cost: </span><span class="si">{</span><span class="n">optimized_cost</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Improvement: </span><span class="si">{</span><span class="n">improvement</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="example-3-batch-controller-comparison">
<h3>Example 3: Batch Controller Comparison<a class="headerlink" href="#example-3-batch-controller-comparison" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Example 3: Batch Controller Comparison</span>
<span class="sd">Demonstrates creating multiple controller types for benchmarking.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span><span class="p">,</span> <span class="n">list_available_controllers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="k">def</span><span class="w"> </span><span class="nf">simulate_trajectory</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">initial_state</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Simulate closed-loop trajectory.&quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">duration</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">initial_state</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="n">trajectory</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">controls</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">steps</span><span class="p">):</span>
        <span class="c1"># Compute control</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">compute_control</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">):</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">u</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;u&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">else</span> <span class="n">result</span>

        <span class="c1"># Simple dynamics (placeholder - use actual dynamics in practice)</span>
        <span class="n">state_dot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span>  <span class="c1"># Dummy dynamics</span>
        <span class="n">state</span> <span class="o">=</span> <span class="n">state</span> <span class="o">+</span> <span class="n">state_dot</span> <span class="o">*</span> <span class="n">dt</span>

        <span class="n">trajectory</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">trajectory</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">controls</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">compute_performance_metrics</span><span class="p">(</span><span class="n">trajectory</span><span class="p">,</span> <span class="n">controls</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute performance metrics.&quot;&quot;&quot;</span>
    <span class="c1"># ISE: Integral of squared error</span>
    <span class="n">ise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">trajectory</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Control effort</span>
    <span class="n">effort</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">controls</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Settling time (simplified)</span>
    <span class="n">threshold</span> <span class="o">=</span> <span class="mf">0.02</span>
    <span class="n">settled</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">trajectory</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">settling_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">settled</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.01</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">settled</span><span class="p">)</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;ise&#39;</span><span class="p">:</span> <span class="n">ise</span><span class="p">,</span>
        <span class="s1">&#39;effort&#39;</span><span class="p">:</span> <span class="n">effort</span><span class="p">,</span>
        <span class="s1">&#39;settling_time&#39;</span><span class="p">:</span> <span class="n">settling_time</span>
    <span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Load configuration</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>

    <span class="c1"># Initial condition</span>
    <span class="n">initial_state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>

    <span class="c1"># Create all available controllers</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creating controllers...&quot;</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">controller_type</span> <span class="ow">in</span> <span class="n">list_available_controllers</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Creating </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
            <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="n">controller_type</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>

            <span class="c1"># Simulate</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Simulating </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
            <span class="n">trajectory</span><span class="p">,</span> <span class="n">controls</span> <span class="o">=</span> <span class="n">simulate_trajectory</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">initial_state</span><span class="p">)</span>

            <span class="c1"># Compute metrics</span>
            <span class="n">metrics</span> <span class="o">=</span> <span class="n">compute_performance_metrics</span><span class="p">(</span><span class="n">trajectory</span><span class="p">,</span> <span class="n">controls</span><span class="p">)</span>

            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s1">&#39;controller&#39;</span><span class="p">:</span> <span class="n">controller_type</span><span class="p">,</span>
                <span class="s1">&#39;ise&#39;</span><span class="p">:</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;ise&#39;</span><span class="p">],</span>
                <span class="s1">&#39;effort&#39;</span><span class="p">:</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;effort&#39;</span><span class="p">],</span>
                <span class="s1">&#39;settling_time&#39;</span><span class="p">:</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;settling_time&#39;</span><span class="p">],</span>
                <span class="s1">&#39;n_gains&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">controller</span><span class="o">.</span><span class="n">gains</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="s1">&#39;gains&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span>
            <span class="p">})</span>

            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ✓ </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2">: ISE=</span><span class="si">{</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;ise&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ✗ Failed to benchmark </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Display results</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;BENCHMARK RESULTS&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
    <span class="n">df_sorted</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;ise&#39;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">df_sorted</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

    <span class="c1"># Identify best controller</span>
    <span class="n">best</span> <span class="o">=</span> <span class="n">df_sorted</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">🏆 Best Controller: </span><span class="si">{</span><span class="n">best</span><span class="p">[</span><span class="s1">&#39;controller&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   ISE: </span><span class="si">{</span><span class="n">best</span><span class="p">[</span><span class="s1">&#39;ise&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Control Effort: </span><span class="si">{</span><span class="n">best</span><span class="p">[</span><span class="s1">&#39;effort&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Settling Time: </span><span class="si">{</span><span class="n">best</span><span class="p">[</span><span class="s1">&#39;settling_time&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="example-4-custom-configuration-override">
<h3>Example 4: Custom Configuration Override<a class="headerlink" href="#example-4-custom-configuration-override" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Example 4: Custom Configuration Override</span>
<span class="sd">Demonstrates programmatic configuration overrides.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_controller</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Custom configuration object.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">controllers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;classical_smc&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;gains&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">45.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">],</span>
                <span class="s1">&#39;max_force&#39;</span><span class="p">:</span> <span class="mf">200.0</span><span class="p">,</span>
                <span class="s1">&#39;boundary_layer&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
                <span class="s1">&#39;dt&#39;</span><span class="p">:</span> <span class="mf">0.001</span>
            <span class="p">},</span>
            <span class="s1">&#39;sta_smc&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;gains&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">35.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">],</span>
                <span class="s1">&#39;max_force&#39;</span><span class="p">:</span> <span class="mf">200.0</span><span class="p">,</span>
                <span class="s1">&#39;dt&#39;</span><span class="p">:</span> <span class="mf">0.001</span>
            <span class="p">}</span>
        <span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Demonstrating custom configuration overrides</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Method 1: Load base config and override gains</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Method 1: Override gains only&quot;</span><span class="p">)</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>
    <span class="n">custom_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">35.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">,</span> <span class="mf">18.0</span><span class="p">,</span> <span class="mf">14.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">]</span>
    <span class="n">controller1</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="n">custom_gains</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Gains: </span><span class="si">{</span><span class="n">controller1</span><span class="o">.</span><span class="n">gains</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Max force: </span><span class="si">{</span><span class="n">controller1</span><span class="o">.</span><span class="n">max_force</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> N</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Method 2: Use custom configuration object</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Method 2: Custom configuration object&quot;</span><span class="p">)</span>
    <span class="n">custom_config</span> <span class="o">=</span> <span class="n">CustomConfig</span><span class="p">()</span>
    <span class="n">controller2</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">custom_config</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Gains: </span><span class="si">{</span><span class="n">controller2</span><span class="o">.</span><span class="n">gains</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Max force: </span><span class="si">{</span><span class="n">controller2</span><span class="o">.</span><span class="n">max_force</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> N</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Method 3: Override both config and gains</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Method 3: Override config and gains&quot;</span><span class="p">)</span>
    <span class="n">override_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">40.0</span><span class="p">,</span> <span class="mf">28.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">16.0</span><span class="p">,</span> <span class="mf">55.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">]</span>
    <span class="n">controller3</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">custom_config</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="n">override_gains</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Gains: </span><span class="si">{</span><span class="n">controller3</span><span class="o">.</span><span class="n">gains</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Uses override_gains</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Max force: </span><span class="si">{</span><span class="n">controller3</span><span class="o">.</span><span class="n">max_force</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> N&quot;</span><span class="p">)</span>  <span class="c1"># From custom_config</span>

    <span class="c1"># Verify different configurations produce different controllers</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Verifying configuration differences:&quot;</span><span class="p">)</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>

    <span class="n">u1</span> <span class="o">=</span> <span class="n">controller1</span><span class="o">.</span><span class="n">compute_control</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">u2</span> <span class="o">=</span> <span class="n">controller2</span><span class="o">.</span><span class="n">compute_control</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">u3</span> <span class="o">=</span> <span class="n">controller3</span><span class="o">.</span><span class="n">compute_control</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="p">{})</span>

    <span class="c1"># Extract control values</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_control</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">u</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;u&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Controller 1: u = </span><span class="si">{</span><span class="n">get_control</span><span class="p">(</span><span class="n">u1</span><span class="p">)</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> N&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Controller 2: u = </span><span class="si">{</span><span class="n">get_control</span><span class="p">(</span><span class="n">u2</span><span class="p">)</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> N&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Controller 3: u = </span><span class="si">{</span><span class="n">get_control</span><span class="p">(</span><span class="n">u3</span><span class="p">)</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> N&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="example-5-error-handling-and-validation">
<h3>Example 5: Error Handling and Validation<a class="headerlink" href="#example-5-error-handling-and-validation" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Example 5: Error Handling and Validation</span>
<span class="sd">Demonstrates robust error handling patterns.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">src.controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">create_controller</span><span class="p">,</span>
    <span class="n">list_available_controllers</span><span class="p">,</span>
    <span class="n">get_default_gains</span><span class="p">,</span>
    <span class="n">FactoryConfigurationError</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_config</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">safe_controller_creation</span><span class="p">(</span><span class="n">controller_type</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">gains</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create controller with comprehensive error handling.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Pre-flight checks</span>
        <span class="k">if</span> <span class="n">controller_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">list_available_controllers</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;⚠ Warning: </span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2"> not available&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Controller type unavailable&quot;</span>

        <span class="c1"># Attempt creation</span>
        <span class="n">controller</span> <span class="o">=</span> <span class="n">create_controller</span><span class="p">(</span><span class="n">controller_type</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">gains</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">controller</span><span class="p">,</span> <span class="kc">None</span>

    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Validation error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Dependency error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">except</span> <span class="n">FactoryConfigurationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Configuration error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Unexpected error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Demonstrating error handling patterns</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>

    <span class="c1"># Test 1: Valid creation</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Test 1: Valid controller creation&quot;</span><span class="p">)</span>
    <span class="n">controller</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">safe_controller_creation</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">controller</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ✓ Success: Controller created&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ✗ Failed: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Test 2: Invalid controller type</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Test 2: Invalid controller type&quot;</span><span class="p">)</span>
    <span class="n">controller</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">safe_controller_creation</span><span class="p">(</span><span class="s1">&#39;nonexistent_controller&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">controller</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ✓ Success: Controller created&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ✗ Expected failure: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Test 3: Invalid gain count</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Test 3: Invalid gain count&quot;</span><span class="p">)</span>
    <span class="n">invalid_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">]</span>  <span class="c1"># Only 2 gains, need 6</span>
    <span class="n">controller</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">safe_controller_creation</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">invalid_gains</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">controller</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ✓ Success: Controller created&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ✗ Expected failure: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Test 4: Invalid gain values (non-positive)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Test 4: Invalid gain values (non-positive)&quot;</span><span class="p">)</span>
    <span class="n">invalid_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">10.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">35.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">]</span>  <span class="c1"># Negative gain</span>
    <span class="n">controller</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">safe_controller_creation</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">invalid_gains</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">controller</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ✓ Success: Controller created&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ✗ Expected failure: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Test 5: Super-twisting constraint violation</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Test 5: Super-twisting K1 &gt; K2 constraint&quot;</span><span class="p">)</span>
    <span class="n">invalid_sta_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">15.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]</span>  <span class="c1"># K1=15 ≤ K2=20</span>
    <span class="n">controller</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">safe_controller_creation</span><span class="p">(</span><span class="s1">&#39;sta_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">invalid_sta_gains</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">controller</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ✓ Success: Controller created&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ✗ Expected failure: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Test 6: Valid super-twisting gains</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Test 6: Valid super-twisting gains&quot;</span><span class="p">)</span>
    <span class="n">valid_sta_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">18.0</span><span class="p">,</span> <span class="mf">22.0</span><span class="p">,</span> <span class="mf">14.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">]</span>  <span class="c1"># K1=30 &gt; K2=18 ✓</span>
    <span class="n">controller</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">safe_controller_creation</span><span class="p">(</span><span class="s1">&#39;sta_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">valid_sta_gains</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">controller</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ✓ Success: Controller created with K1 &gt; K2&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ✗ Failed: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Test 7: Adaptive SMC gain count validation</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Test 7: Adaptive SMC gain count (must be exactly 5)&quot;</span><span class="p">)</span>
    <span class="n">invalid_adaptive_gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>  <span class="c1"># 6 gains, need 5</span>
    <span class="n">controller</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">safe_controller_creation</span><span class="p">(</span><span class="s1">&#39;adaptive_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">invalid_adaptive_gains</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">controller</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ✓ Success: Controller created&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ✗ Expected failure: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Test 8: Recovery with default gains</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Test 8: Recovery with default gains&quot;</span><span class="p">)</span>
    <span class="n">default_gains</span> <span class="o">=</span> <span class="n">get_default_gains</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">)</span>
    <span class="n">controller</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">safe_controller_creation</span><span class="p">(</span><span class="s1">&#39;classical_smc&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">default_gains</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">controller</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ✓ Success: Controller created with defaults </span><span class="si">{</span><span class="n">default_gains</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ✗ Failed: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error handling demonstration complete&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>This comprehensive API reference documents the complete factory system architecture including:</p>
<p>✅ <strong>Core Functions</strong>: <code class="docutils literal notranslate"><span class="pre">create_controller()</span></code>, <code class="docutils literal notranslate"><span class="pre">list_available_controllers()</span></code>, <code class="docutils literal notranslate"><span class="pre">get_default_gains()</span></code>
✅ <strong>Controller Registry</strong>: Metadata, default gains, validation rules
✅ <strong>PSO Integration</strong>: <code class="docutils literal notranslate"><span class="pre">PSOControllerWrapper</span></code>, factory functions, gain bounds
✅ <strong>Configuration Mapping</strong>: YAML → controller initialization for all types
✅ <strong>Validation Rules</strong>: Universal constraints and controller-specific requirements
✅ <strong>Error Handling</strong>: Exception hierarchy, graceful degradation, automatic correction
✅ <strong>Extensibility</strong>: Step-by-step guide for adding new controller types
✅ <strong>Complete Examples</strong>: 5 validated, production-ready code examples</p>
<section id="related-documentation">
<h3>Related Documentation<a class="headerlink" href="#related-documentation" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Phase 4.1</strong>: Controller Implementation API (individual controller documentation)</p></li>
<li><p><strong>Phase 4.3</strong>: PSO Optimization Module API (optimization algorithms)</p></li>
<li><p><strong>config.yaml</strong>: Configuration schema and parameter descriptions</p></li>
<li><p><strong>src/optimization/integration/pso_factory_bridge.py</strong>: Enhanced PSO integration</p></li>
</ul>
</section>
<section id="next-steps">
<h3>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Review configuration schema completeness</p></li>
<li><p>Validate all code examples with pytest</p></li>
<li><p>Cross-reference with Phase 4.1 controller docs</p></li>
<li><p>Prepare for Phase 4.3 PSO optimization documentation</p></li>
</ol>
<hr class="docutils" />
<p><strong>Document Status:</strong> Phase 4.2 Complete - Factory System API Fully Documented
<strong>Validation:</strong> All examples syntactically correct, cross-referenced with implementation
<strong>Ready For:</strong> Phase 4.3 (Optimization Module API Documentation)</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Research Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Oct 08, 2025</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Factory System API Reference</a><ul>
<li><a class="reference internal" href="#table-of-contents">Table of Contents</a></li>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#design-principles">Design Principles</a></li>
</ul>
</li>
<li><a class="reference internal" href="#architecture">Architecture</a><ul>
<li><a class="reference internal" href="#module-structure">Module Structure</a></li>
<li><a class="reference internal" href="#thread-safety">Thread Safety</a></li>
</ul>
</li>
<li><a class="reference internal" href="#core-factory-functions">Core Factory Functions</a><ul>
<li><a class="reference internal" href="#create-controller-controller-type-config-none-gains-none"><code class="docutils literal notranslate"><span class="pre">create_controller(controller_type,</span> <span class="pre">config=None,</span> <span class="pre">gains=None)</span></code></a><ul>
<li><a class="reference internal" href="#signature">Signature</a></li>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
<li><a class="reference internal" href="#supported-controller-types">Supported Controller Types</a></li>
<li><a class="reference internal" href="#type-aliases">Type Aliases</a></li>
<li><a class="reference internal" href="#gain-resolution-priority">Gain Resolution Priority</a></li>
<li><a class="reference internal" href="#return-value">Return Value</a></li>
<li><a class="reference internal" href="#exceptions">Exceptions</a></li>
<li><a class="reference internal" href="#complete-examples">Complete Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-available-controllers"><code class="docutils literal notranslate"><span class="pre">list_available_controllers()</span></code></a><ul>
<li><a class="reference internal" href="#id1">Signature</a></li>
<li><a class="reference internal" href="#id2">Return Value</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-all-controllers"><code class="docutils literal notranslate"><span class="pre">list_all_controllers()</span></code></a><ul>
<li><a class="reference internal" href="#id3">Signature</a></li>
<li><a class="reference internal" href="#id4">Return Value</a></li>
<li><a class="reference internal" href="#difference-from-list-available-controllers">Difference from <code class="docutils literal notranslate"><span class="pre">list_available_controllers()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#get-default-gains-controller-type"><code class="docutils literal notranslate"><span class="pre">get_default_gains(controller_type)</span></code></a><ul>
<li><a class="reference internal" href="#id5">Signature</a></li>
<li><a class="reference internal" href="#id6">Parameters</a></li>
<li><a class="reference internal" href="#id7">Return Value</a></li>
<li><a class="reference internal" href="#id8">Exceptions</a></li>
<li><a class="reference internal" href="#id9">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#controller-registry-system">Controller Registry System</a><ul>
<li><a class="reference internal" href="#registry-structure">Registry Structure</a></li>
<li><a class="reference internal" href="#complete-registry-definitions">Complete Registry Definitions</a><ul>
<li><a class="reference internal" href="#classical-smc">Classical SMC</a></li>
<li><a class="reference internal" href="#super-twisting-smc">Super-Twisting SMC</a></li>
<li><a class="reference internal" href="#adaptive-smc">Adaptive SMC</a></li>
<li><a class="reference internal" href="#hybrid-adaptive-sta-smc">Hybrid Adaptive-STA SMC</a></li>
<li><a class="reference internal" href="#mpc-controller-optional">MPC Controller (Optional)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#querying-the-registry">Querying the Registry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pso-integration">PSO Integration</a><ul>
<li><a class="reference internal" href="#pso-integration-architecture">PSO Integration Architecture</a></li>
<li><a class="reference internal" href="#key-pso-integration-components">Key PSO Integration Components</a><ul>
<li><a class="reference internal" href="#psocontrollerwrapper">1. <code class="docutils literal notranslate"><span class="pre">PSOControllerWrapper</span></code></a></li>
<li><a class="reference internal" href="#create-smc-for-pso">2. <code class="docutils literal notranslate"><span class="pre">create_smc_for_pso()</span></code></a></li>
<li><a class="reference internal" href="#create-pso-controller-factory">3. <code class="docutils literal notranslate"><span class="pre">create_pso_controller_factory()</span></code></a></li>
<li><a class="reference internal" href="#get-expected-gain-count">4. <code class="docutils literal notranslate"><span class="pre">get_expected_gain_count()</span></code></a></li>
<li><a class="reference internal" href="#get-gain-bounds-for-pso">5. <code class="docutils literal notranslate"><span class="pre">get_gain_bounds_for_pso()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#complete-pso-optimization-workflow">Complete PSO Optimization Workflow</a></li>
<li><a class="reference internal" href="#pso-gain-specifications">PSO Gain Specifications</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration-schema-mapping">Configuration Schema Mapping</a><ul>
<li><a class="reference internal" href="#configuration-file-structure-config-yaml">Configuration File Structure (config.yaml)</a></li>
<li><a class="reference internal" href="#parameter-mapping-logic">Parameter Mapping Logic</a></li>
<li><a class="reference internal" href="#complete-mapping-tables">Complete Mapping Tables</a><ul>
<li><a class="reference internal" href="#classical-smc-configuration-mapping">Classical SMC Configuration Mapping</a></li>
<li><a class="reference internal" href="#super-twisting-smc-configuration-mapping">Super-Twisting SMC Configuration Mapping</a></li>
<li><a class="reference internal" href="#adaptive-smc-configuration-mapping">Adaptive SMC Configuration Mapping</a></li>
<li><a class="reference internal" href="#hybrid-adaptive-sta-smc-configuration-mapping">Hybrid Adaptive-STA SMC Configuration Mapping</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#validation-rules">Validation Rules</a><ul>
<li><a class="reference internal" href="#gain-validation-rules">Gain Validation Rules</a><ul>
<li><a class="reference internal" href="#universal-gain-constraints">Universal Gain Constraints</a></li>
<li><a class="reference internal" href="#controller-specific-validation-rules">Controller-Specific Validation Rules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parameter-validation-rules">Parameter Validation Rules</a><ul>
<li><a class="reference internal" href="#physical-constraints">Physical Constraints</a></li>
<li><a class="reference internal" href="#mpc-specific-validation">MPC-Specific Validation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#validation-examples">Validation Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#error-handling">Error Handling</a><ul>
<li><a class="reference internal" href="#exception-hierarchy">Exception Hierarchy</a></li>
<li><a class="reference internal" href="#error-handling-patterns">Error Handling Patterns</a><ul>
<li><a class="reference internal" href="#pattern-1-type-validation-with-detailed-messages">Pattern 1: Type Validation with Detailed Messages</a></li>
<li><a class="reference internal" href="#pattern-2-registry-lookup-with-availability-check">Pattern 2: Registry Lookup with Availability Check</a></li>
<li><a class="reference internal" href="#pattern-3-graceful-degradation-with-fallback">Pattern 3: Graceful Degradation with Fallback</a></li>
<li><a class="reference internal" href="#pattern-4-automatic-correction">Pattern 4: Automatic Correction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#error-handling-best-practices">Error Handling Best Practices</a><ul>
<li><a class="reference internal" href="#best-practice-1-defensive-controller-creation">Best Practice 1: Defensive Controller Creation</a></li>
<li><a class="reference internal" href="#best-practice-2-gain-validation-before-pso">Best Practice 2: Gain Validation Before PSO</a></li>
<li><a class="reference internal" href="#best-practice-3-configuration-validation">Best Practice 3: Configuration Validation</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#extensibility-guide">Extensibility Guide</a><ul>
<li><a class="reference internal" href="#adding-a-new-controller-type">Adding a New Controller Type</a><ul>
<li><a class="reference internal" href="#step-1-implement-controller-class">Step 1: Implement Controller Class</a></li>
<li><a class="reference internal" href="#step-2-create-configuration-class">Step 2: Create Configuration Class</a></li>
<li><a class="reference internal" href="#step-3-register-in-factory">Step 3: Register in Factory</a></li>
<li><a class="reference internal" href="#step-4-add-type-aliases-optional">Step 4: Add Type Aliases (Optional)</a></li>
<li><a class="reference internal" href="#step-5-add-configuration-schema">Step 5: Add Configuration Schema</a></li>
<li><a class="reference internal" href="#step-6-add-pso-support-optional">Step 6: Add PSO Support (Optional)</a></li>
<li><a class="reference internal" href="#step-7-test-new-controller">Step 7: Test New Controller</a></li>
</ul>
</li>
<li><a class="reference internal" href="#extension-checklist">Extension Checklist</a></li>
</ul>
</li>
<li><a class="reference internal" href="#complete-code-examples">Complete Code Examples</a><ul>
<li><a class="reference internal" href="#example-1-basic-factory-usage">Example 1: Basic Factory Usage</a></li>
<li><a class="reference internal" href="#example-2-pso-optimized-controller-creation">Example 2: PSO-Optimized Controller Creation</a></li>
<li><a class="reference internal" href="#example-3-batch-controller-comparison">Example 3: Batch Controller Comparison</a></li>
<li><a class="reference internal" href="#example-4-custom-configuration-override">Example 4: Custom Configuration Override</a></li>
<li><a class="reference internal" href="#example-5-error-handling-and-validation">Example 5: Error Handling and Validation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary">Summary</a><ul>
<li><a class="reference internal" href="#related-documentation">Related Documentation</a></li>
<li><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=4ebf8126"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=08e7b316"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/back-to-top.js?v=840797bb"></script>
    <script src="../_static/lazy-load.js?v=dc25293c"></script>
    <script src="../_static/dark-mode.js?v=bf328970"></script>
    </body>
</html>