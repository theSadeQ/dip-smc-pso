<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
.chartjs-container {
    margin: 1.5em auto;
    padding: 1em;
    background: #f8f9fa;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.chart-note {
    text-align: center;
    color: #6c757d;
    font-size: 0.9em;
    margin-top: 0.5em;
}
</style>
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2024.08.06 -->
        <title>PSO Factory Integration API Reference - DIP_SMC_PSO Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5349f25f" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=f5a89ef9" />
    
    


<style>
  body {
    --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">DIP_SMC_PSO Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">DIP_SMC_PSO Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">📚 Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Optimal Sliding Mode Control for a Double-Inverted Pendulum via PSO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory_overview.html">1. Theoretical Background â€” Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">3. System Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plant_model.html">1.x Plant Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hil_quickstart.html">Hardware-in-the-Loop (HIL) Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../streamlit_dashboard_guide.html">Streamlit Dashboard User Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">🎮 Control Systems &amp; Optimization</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../controllers/index.html">Controllers Module Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Controllers Module Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../controllers/classical_smc_technical_guide.html">Classical Sliding Mode Control Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/adaptive_smc_technical_guide.html">Adaptive Sliding Mode Control Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/sta_smc_technical_guide.html">Super-Twisting Sliding Mode Control Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/hybrid_smc_technical_guide.html">Hybrid Adaptive Super-Twisting SMC Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/mpc_technical_guide.html">Model Predictive Control Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/swing_up_smc_technical_guide.html">Swing-Up SMC Technical Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/swing_up_smc_technical_guide.html#example-metadata">example-metadata:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/swing_up_smc_technical_guide.html#runnable-false">runnable: false</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/factory_system_guide.html">SMC Controller Factory System Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/control_primitives_reference.html">Control Primitives Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mathematical_foundations/smc_complete_theory.html">Complete Sliding Mode Control Mathematical Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mathematical_foundations/controller_comparison_theory.html">SMC Controller Comparison Theory</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/controllers/index.html">Controllers Module</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Controllers Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/adaptive_smc.html">controllers.adaptive_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/classic_smc.html">controllers.classic_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory.html">controllers.factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/mpc_controller.html">controllers.mpc_controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/sta_smc.html">controllers.sta_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/swing_up_smc.html">controllers.swing_up_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/__init__.html">controllers.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/base_controller_interface.html">controllers.base.controller_interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/base_control_primitives.html">controllers.base.control_primitives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/base___init__.html">controllers.base.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_deprecation.html">controllers.factory.deprecation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_fallback_configs.html">controllers.factory.fallback_configs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_legacy_factory.html">controllers.factory.legacy_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_optimization.html">controllers.factory.optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_pso_integration.html">controllers.factory.pso_integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_smc_factory.html">controllers.factory.smc_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_thread_safety.html">controllers.factory.thread_safety</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory___init__.html">controllers.factory.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/mpc_mpc_controller.html">controllers.mpc.mpc_controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/mpc___init__.html">controllers.mpc.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_adaptive_smc.html">controllers.smc.adaptive_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_classic_smc.html">controllers.smc.classic_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_hybrid_adaptive_sta_smc.html">controllers.smc.hybrid_adaptive_sta_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_sta_smc.html">controllers.smc.sta_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc___init__.html">controllers.smc.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/specialized_swing_up_smc.html">controllers.specialized.swing_up_smc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/specialized___init__.html">controllers.specialized.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_core_protocols.html">controllers.factory.core.protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_core_registry.html">controllers.factory.core.registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_core_threading.html">controllers.factory.core.threading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_core_validation.html">controllers.factory.core.validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/factory_core___init__.html">controllers.factory.core.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms___init__.html">controllers.smc.algorithms.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_core_equivalent_control.html">controllers.smc.core.equivalent_control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_core_gain_validation.html">controllers.smc.core.gain_validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_core_sliding_surface.html">controllers.smc.core.sliding_surface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_core_switching_functions.html">controllers.smc.core.switching_functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_core___init__.html">controllers.smc.core.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_adaptation_law.html">controllers.smc.algorithms.adaptive.adaptation_law</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_config.html">controllers.smc.algorithms.adaptive.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_controller.html">controllers.smc.algorithms.adaptive.controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_parameter_estimation.html">controllers.smc.algorithms.adaptive.parameter_estimation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive___init__.html">controllers.smc.algorithms.adaptive.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_boundary_layer.html">controllers.smc.algorithms.classical.boundary_layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_config.html">controllers.smc.algorithms.classical.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_controller.html">controllers.smc.algorithms.classical.controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical___init__.html">controllers.smc.algorithms.classical.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_config.html">controllers.smc.algorithms.hybrid.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_controller.html">controllers.smc.algorithms.hybrid.controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_switching_logic.html">controllers.smc.algorithms.hybrid.switching_logic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid___init__.html">controllers.smc.algorithms.hybrid.<strong>init</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_config.html">controllers.smc.algorithms.super_twisting.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_controller.html">controllers.smc.algorithms.super_twisting.controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_twisting_algorithm.html">controllers.smc.algorithms.super_twisting.twisting_algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting___init__.html">controllers.smc.algorithms.super_twisting.<strong>init</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../mathematical_foundations/index.html">Mathematical Foundations</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Mathematical Foundations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../mathematical_foundations/smc_complete_theory.html">Complete Sliding Mode Control Mathematical Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mathematical_foundations/controller_comparison_theory.html">SMC Controller Comparison Theory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plant/models_guide.html">Plant Models Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimization_simulation/guide.html">Optimization &amp; Simulation Guide</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/controllers/index.html">Controllers Module</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Controllers Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/adaptive_smc.html">controllers.adaptive_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/classic_smc.html">controllers.classic_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory.html">controllers.factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/mpc_controller.html">controllers.mpc_controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/sta_smc.html">controllers.sta_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/swing_up_smc.html">controllers.swing_up_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/__init__.html">controllers.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/base_controller_interface.html">controllers.base.controller_interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/base_control_primitives.html">controllers.base.control_primitives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/base___init__.html">controllers.base.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_deprecation.html">controllers.factory.deprecation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_fallback_configs.html">controllers.factory.fallback_configs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_legacy_factory.html">controllers.factory.legacy_factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_optimization.html">controllers.factory.optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_pso_integration.html">controllers.factory.pso_integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_smc_factory.html">controllers.factory.smc_factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_thread_safety.html">controllers.factory.thread_safety</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory___init__.html">controllers.factory.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/mpc_mpc_controller.html">controllers.mpc.mpc_controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/mpc___init__.html">controllers.mpc.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_adaptive_smc.html">controllers.smc.adaptive_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_classic_smc.html">controllers.smc.classic_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_hybrid_adaptive_sta_smc.html">controllers.smc.hybrid_adaptive_sta_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_sta_smc.html">controllers.smc.sta_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc___init__.html">controllers.smc.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/specialized_swing_up_smc.html">controllers.specialized.swing_up_smc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/specialized___init__.html">controllers.specialized.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_core_protocols.html">controllers.factory.core.protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_core_registry.html">controllers.factory.core.registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_core_threading.html">controllers.factory.core.threading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_core_validation.html">controllers.factory.core.validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/factory_core___init__.html">controllers.factory.core.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms___init__.html">controllers.smc.algorithms.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_core_equivalent_control.html">controllers.smc.core.equivalent_control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_core_gain_validation.html">controllers.smc.core.gain_validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_core_sliding_surface.html">controllers.smc.core.sliding_surface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_core_switching_functions.html">controllers.smc.core.switching_functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_core___init__.html">controllers.smc.core.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_adaptation_law.html">controllers.smc.algorithms.adaptive.adaptation_law</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_config.html">controllers.smc.algorithms.adaptive.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_controller.html">controllers.smc.algorithms.adaptive.controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive_parameter_estimation.html">controllers.smc.algorithms.adaptive.parameter_estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_adaptive___init__.html">controllers.smc.algorithms.adaptive.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_boundary_layer.html">controllers.smc.algorithms.classical.boundary_layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_config.html">controllers.smc.algorithms.classical.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical_controller.html">controllers.smc.algorithms.classical.controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_classical___init__.html">controllers.smc.algorithms.classical.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_config.html">controllers.smc.algorithms.hybrid.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_controller.html">controllers.smc.algorithms.hybrid.controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid_switching_logic.html">controllers.smc.algorithms.hybrid.switching_logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_hybrid___init__.html">controllers.smc.algorithms.hybrid.<strong>init</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_config.html">controllers.smc.algorithms.super_twisting.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_controller.html">controllers.smc.algorithms.super_twisting.controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting_twisting_algorithm.html">controllers.smc.algorithms.super_twisting.twisting_algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controllers/smc_algorithms_super_twisting___init__.html">controllers.smc.algorithms.super_twisting.<strong>init</strong></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/optimizer/index.html">Optimizer Module</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Optimizer Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/optimizer/pso_optimizer.html">optimizer.pso_optimizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optimizer/__init__.html">optimizer.<strong>init</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../analysis_plan.html">5. Analysis &amp; Verification Plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks_methodology.html">Benchmarks &amp; Methodology</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">🧪 Development &amp; Testing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../TESTING.html">Testing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test_protocols.html">5.x Test Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use_cases.html">4. Use Cases &amp; Operating Modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../context.html">2. Application Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault_detection_guide.html">Fault Detection &amp; Isolation (FDI) Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">📊 Research &amp; Theory</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../presentation/index.html">Research Presentation Materials</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Research Presentation Materials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html">Abstract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#introduction-and-motivation">Introduction and Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#the-double-inverted-pendulum-as-a-canonical-control-problem">The Double Inverted Pendulum as a Canonical Control Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#the-primary-control-objectives-and-challenges">The Primary Control Objectives and Challenges</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#sliding-mode-control-as-a-robust-solution">Sliding Mode Control as a Robust Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#the-gain-tuning-dilemma-and-the-need-for-optimization">The Gain Tuning Dilemma and the Need for Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#particle-swarm-optimization-for-automated-design">Particle Swarm Optimization for Automated Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#synthesis-and-motivation">Synthesis and Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/introduction.html#references">References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/problem-statement.html">Problem Statement for Double‑Inverted Pendulum (DIP) Control with SMC and PSO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/previous-works.html">Previous Work Before the Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/system-modeling.html"><strong>A Comprehensive Technical Report on the Modeling and Configuration of a Cart‑Based Double Inverted Pendulum System</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/smc-theory.html">Sliding Mode Control for a Double‑Inverted Pendulum: Bridging Theory and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html">Abstract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#introduction">1 Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#system-modelling-and-problem-formulation">2 System Modelling and Problem Formulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#simulation-methodology">3 Simulation Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#classic-sliding-mode-control">4 Classic Sliding Mode Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-i-boundary-layer-method">5 Chattering Mitigation Strategy I: Boundary Layer Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-ii-supertwisting-algorithm">6 Chattering Mitigation Strategy II: Super‑Twisting Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-iii-adaptive-sliding-mode-control">7 Chattering Mitigation Strategy III: Adaptive Sliding Mode Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-iv-hybrid-adaptivesta">8 Chattering Mitigation Strategy IV: Hybrid Adaptive–STA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#synthesis-and-comparative-analysis">9 Synthesis and Comparative Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/chattering-mitigation.html#references">References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/pso-optimization.html"><strong>Comprehensive Simulation Analysis and Enhancements for the Double Inverted Pendulum Control System</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/simulation-setup.html">Particle Swarm Optimization for Sliding‑Mode Controller Tuning of a Double Inverted Pendulum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/results-discussion.html">8 – Results and Discussion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/results-discussion.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#introduction-and-motivation">Introduction and Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#the-double-inverted-pendulum-as-a-canonical-control-problem">The Double Inverted Pendulum as a Canonical Control Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#the-primary-control-objectives-and-challenges">The Primary Control Objectives and Challenges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#sliding-mode-control-as-a-robust-solution">Sliding Mode Control as a Robust Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#the-gain-tuning-dilemma-and-the-need-for-optimization">The Gain Tuning Dilemma and the Need for Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#particle-swarm-optimization-for-automated-design">Particle Swarm Optimization for Automated Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#synthesis-and-motivation">Synthesis and Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/introduction.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/problem-statement.html">Problem Statement for Double‑Inverted Pendulum (DIP) Control with SMC and PSO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/previous-works.html">Previous Work Before the Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/system-modeling.html"><strong>A Comprehensive Technical Report on the Modeling and Configuration of a Cart‑Based Double Inverted Pendulum System</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/smc-theory.html">Sliding Mode Control for a Double‑Inverted Pendulum: Bridging Theory and Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#introduction">1 Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#system-modelling-and-problem-formulation">2 System Modelling and Problem Formulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#simulation-methodology">3 Simulation Methodology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#classic-sliding-mode-control">4 Classic Sliding Mode Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-i-boundary-layer-method">5 Chattering Mitigation Strategy I: Boundary Layer Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-ii-supertwisting-algorithm">6 Chattering Mitigation Strategy II: Super‑Twisting Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-iii-adaptive-sliding-mode-control">7 Chattering Mitigation Strategy III: Adaptive Sliding Mode Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#chattering-mitigation-strategy-iv-hybrid-adaptivesta">8 Chattering Mitigation Strategy IV: Hybrid Adaptive–STA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#synthesis-and-comparative-analysis">9 Synthesis and Comparative Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/chattering-mitigation.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/pso-optimization.html"><strong>Comprehensive Simulation Analysis and Enhancements for the Double Inverted Pendulum Control System</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/simulation-setup.html">Particle Swarm Optimization for Sliding‑Mode Controller Tuning of a Double Inverted Pendulum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/results-discussion.html">8 – Results and Discussion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation/results-discussion.html#references">References</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">📖 API Reference &amp; Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference Documentation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../examples/index.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography &amp; Academic References</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">🔧 Project Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing – ResearchPlanSpec Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE_CHECKLIST.html">Release Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../symbols.html">Symbols &amp; Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results_readme.html">Results &amp; Plots</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">📚 Citations &amp; Attribution</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CITATIONS.html">Citations &amp; Academic Attribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CITATIONS_ACADEMIC.html">Academic Theory Citations &amp; References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DEPENDENCIES.html">Software Dependencies &amp; Citations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PATTERNS.html">Software Design Patterns &amp; Architecture Attribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LICENSES.html">License Compliance &amp; Attribution</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/theSadeQ/DIP_SMC_PSO/blob/main/docs/factory/pso_factory_api_reference.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/theSadeQ/DIP_SMC_PSO/edit/main/docs/factory/pso_factory_api_reference.md" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <p>#==========================================================================================\<br />
#================== docs/factory/pso_factory_api_reference.md ================\<br />
#==========================================================================================\</p>
<section class="tex2jax_ignore mathjax_ignore" id="pso-factory-integration-api-reference">
<h1>PSO Factory Integration API Reference<a class="headerlink" href="#pso-factory-integration-api-reference" title="Link to this heading">¶</a></h1>
<section id="complete-documentation-for-pso-optimized-controller-factory">
<h2>Complete Documentation for PSO-Optimized Controller Factory<a class="headerlink" href="#complete-documentation-for-pso-optimized-controller-factory" title="Link to this heading">¶</a></h2>
<section id="table-of-contents">
<h3>Table of Contents<a class="headerlink" href="#table-of-contents" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#api-overview">API Overview</a></p></li>
<li><p><a class="reference internal" href="#core-pso-integration-classes">Core PSO Integration Classes</a></p></li>
<li><p><a class="reference internal" href="#factory-functions-for-pso">Factory Functions for PSO</a></p></li>
<li><p><a class="reference internal" href="#pso-controller-wrapper">PSO Controller Wrapper</a></p></li>
<li><p><a class="reference internal" href="#mathematical-constraints-api">Mathematical Constraints API</a></p></li>
<li><p><a class="reference internal" href="#configuration-schema-api">Configuration Schema API</a></p></li>
<li><p><a class="reference internal" href="#performance-monitoring-api">Performance Monitoring API</a></p></li>
<li><p><a class="reference internal" href="#advanced-pso-workflows">Advanced PSO Workflows</a></p></li>
<li><p><a class="reference internal" href="#error-handling-reference">Error Handling Reference</a></p></li>
<li><p><a class="reference internal" href="#usage-examples">Usage Examples</a></p></li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="api-overview">
<h2>API Overview<a class="headerlink" href="#api-overview" title="Link to this heading">¶</a></h2>
<p>The PSO Factory Integration API provides a comprehensive framework for optimizing sliding mode controllers using Particle Swarm Optimization. The API is designed with the following principles:</p>
<section id="design-philosophy">
<h3>Design Philosophy<a class="headerlink" href="#design-philosophy" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Mathematical Rigor</strong>: All functions incorporate control theory constraints</p></li>
<li><p><strong>Type Safety</strong>: Complete type annotations with runtime validation</p></li>
<li><p><strong>Performance</strong>: Optimized for real-time PSO fitness evaluation</p></li>
<li><p><strong>Ease of Use</strong>: Single-function interfaces for common operations</p></li>
<li><p><strong>Extensibility</strong>: Support for custom optimization algorithms</p></li>
</ul>
</section>
<section id="import-structure">
<h3>Import Structure<a class="headerlink" href="#import-structure" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Core PSO-Factory integration</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">controllers</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">SMCType</span><span class="p">,</span>                    <span class="c1"># Controller type enumeration</span>
    <span class="n">create_smc_for_pso</span><span class="p">,</span>        <span class="c1"># Primary PSO interface</span>
    <span class="n">get_gain_bounds_for_pso</span><span class="p">,</span>   <span class="c1"># Mathematical bounds</span>
    <span class="n">validate_smc_gains</span><span class="p">,</span>        <span class="c1"># Constraint validation</span>
    <span class="n">PSOControllerWrapper</span>       <span class="c1"># PSO-optimized wrapper</span>
<span class="p">)</span>

<span class="c1"># Advanced PSO workflows</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">controllers.factory</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">SMCFactory</span><span class="p">,</span>                <span class="c1"># Full factory interface</span>
    <span class="n">SMCConfig</span><span class="p">,</span>                 <span class="c1"># Type-safe configuration</span>
    <span class="n">SMCGainSpec</span>               <span class="c1"># Gain specifications</span>
<span class="p">)</span>

<span class="c1"># Performance monitoring</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">controllers.factory.monitoring</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">PSOPerformanceMonitor</span><span class="p">,</span>     <span class="c1"># Real-time monitoring</span>
    <span class="n">PSOBenchmarkSuite</span>         <span class="c1"># Comprehensive benchmarking</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="core-pso-integration-classes">
<h2>Core PSO Integration Classes<a class="headerlink" href="#core-pso-integration-classes" title="Link to this heading">¶</a></h2>
<section id="smctype-enumeration">
<h3>SMCType Enumeration<a class="headerlink" href="#smctype-enumeration" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SMCType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enumeration of supported SMC controller types for PSO optimization.</span>

<span class="sd">    Each type corresponds to a specific sliding mode control algorithm</span>
<span class="sd">    with distinct mathematical properties and parameter requirements.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">CLASSICAL</span> <span class="o">=</span> <span class="s2">&quot;classical_smc&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Classical sliding mode controller with boundary layer.</span>

<span class="sd">    Mathematical Model:</span>
<span class="sd">        u = u_eq + u_sw</span>
<span class="sd">        u_eq = (GB)^(-1)[-Gf(x) + ṡ_ref]</span>
<span class="sd">        u_sw = -K·tanh(s/φ)</span>

<span class="sd">    Gain Parameters: [k1, k2, λ1, λ2, K, kd]</span>
<span class="sd">        k1, k2: Position gains for pendulum 1 and 2</span>
<span class="sd">        λ1, λ2: Surface gains for pendulum 1 and 2</span>
<span class="sd">        K: Switching gain</span>
<span class="sd">        kd: Damping gain</span>

<span class="sd">    Mathematical Constraints:</span>
<span class="sd">        - λ1, λ2, K &gt; 0 (stability requirement)</span>
<span class="sd">        - kd ≥ 0 (non-negative damping)</span>

<span class="sd">    PSO Bounds: [(0.1,50), (0.1,50), (1,50), (1,50), (1,200), (0,50)]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">SUPER_TWISTING</span> <span class="o">=</span> <span class="s2">&quot;sta_smc&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Super-twisting sliding mode controller (second-order).</span>

<span class="sd">    Mathematical Model:</span>
<span class="sd">        u̇ = -K1·sign(s) - K2·sign(ṡ)</span>
<span class="sd">        s = σ(x)  (sliding surface)</span>

<span class="sd">    Gain Parameters: [K1, K2, λ1, λ2, α1, α2]</span>
<span class="sd">        K1: Primary twisting gain</span>
<span class="sd">        K2: Secondary twisting gain</span>
<span class="sd">        λ1, λ2: Surface gains</span>
<span class="sd">        α1, α2: Higher-order surface parameters</span>

<span class="sd">    Mathematical Constraints:</span>
<span class="sd">        - K1 &gt; K2 &gt; 0 (finite-time convergence)</span>
<span class="sd">        - λ1, λ2, α1, α2 &gt; 0 (stability)</span>

<span class="sd">    PSO Bounds: [(2,100), (1,99), (1,50), (1,50), (1,50), (1,50)]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ADAPTIVE</span> <span class="o">=</span> <span class="s2">&quot;adaptive_smc&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adaptive sliding mode controller with online gain tuning.</span>

<span class="sd">    Mathematical Model:</span>
<span class="sd">        u = u_eq + u_sw</span>
<span class="sd">        K̇ = γ|s| - σK  (adaptation law)</span>

<span class="sd">    Gain Parameters: [k1, k2, λ1, λ2, γ]</span>
<span class="sd">        k1, k2: Position gains</span>
<span class="sd">        λ1, λ2: Surface gains</span>
<span class="sd">        γ: Adaptation rate</span>

<span class="sd">    Mathematical Constraints:</span>
<span class="sd">        - k1, k2, λ1, λ2 &gt; 0 (stability)</span>
<span class="sd">        - 0.1 ≤ γ ≤ 20.0 (bounded adaptation)</span>

<span class="sd">    PSO Bounds: [(0.1,50), (0.1,50), (1,50), (1,50), (0.1,20)]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">HYBRID</span> <span class="o">=</span> <span class="s2">&quot;hybrid_adaptive_sta_smc&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hybrid adaptive super-twisting controller.</span>

<span class="sd">    Mathematical Model:</span>
<span class="sd">        u = u_adaptive + u_sta  (mode switching)</span>

<span class="sd">    Gain Parameters: [k1, k2, λ1, λ2]</span>
<span class="sd">        k1, k2: Surface gains for pendulum 1 and 2</span>
<span class="sd">        λ1, λ2: Higher-order surface gains</span>

<span class="sd">    Mathematical Constraints:</span>
<span class="sd">        - All parameters &gt; 0 (stability)</span>

<span class="sd">    PSO Bounds: [(1,50), (1,50), (1,50), (1,50)]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">gain_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return number of gain parameters for this controller type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
            <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
            <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">:</span> <span class="mi">4</span>
        <span class="p">}[</span><span class="bp">self</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mathematical_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return mathematical constraints as human-readable strings.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span> <span class="s2">&quot;λ1,λ2,K &gt; 0; kd ≥ 0&quot;</span><span class="p">,</span>
            <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span> <span class="s2">&quot;K1 &gt; K2 &gt; 0; λ1,λ2,α1,α2 &gt; 0&quot;</span><span class="p">,</span>
            <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span> <span class="s2">&quot;k1,k2,λ1,λ2 &gt; 0; 0.1 ≤ γ ≤ 20.0&quot;</span><span class="p">,</span>
            <span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">:</span> <span class="s2">&quot;k1,k2,λ1,λ2 &gt; 0&quot;</span>
        <span class="p">}[</span><span class="bp">self</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="smcgainspec-specification-class">
<h3>SMCGainSpec Specification Class<a class="headerlink" href="#smcgainspec-specification-class" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SMCGainSpec</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Complete specification for SMC controller gains.</span>

<span class="sd">    Provides comprehensive information about gain parameters including</span>
<span class="sd">    mathematical meaning, constraints, and PSO optimization bounds.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">controller_type</span><span class="p">:</span> <span class="n">SMCType</span>
    <span class="n">n_gains</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">gain_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">gain_descriptions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">mathematical_constraints</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">pso_bounds</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span>
    <span class="n">default_gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">gain_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return comprehensive gain information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of dictionaries containing:</span>
<span class="sd">                - name: Parameter name</span>
<span class="sd">                - description: Mathematical meaning</span>
<span class="sd">                - constraint: Mathematical constraint</span>
<span class="sd">                - bounds: PSO optimization bounds</span>
<span class="sd">                - default: Default value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">desc</span><span class="p">,</span>
                <span class="s1">&#39;constraint&#39;</span><span class="p">:</span> <span class="n">constraint</span><span class="p">,</span>
                <span class="s1">&#39;bounds&#39;</span><span class="p">:</span> <span class="n">bounds</span><span class="p">,</span>
                <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="n">default</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">desc</span><span class="p">,</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">default</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gain_names</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gain_descriptions</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mathematical_constraints</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pso_bounds</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_gains</span>
            <span class="p">)</span>
        <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate_gains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate gains against mathematical constraints.</span>

<span class="sd">        Args:</span>
<span class="sd">            gains: Gain values to validate</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple of (is_valid, list_of_errors)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_gains</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_gains</span><span class="si">}</span><span class="s2"> gains, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">errors</span>

        <span class="c1"># Controller-specific validation</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">[:</span><span class="mi">5</span><span class="p">]):</span>  <span class="c1"># k1,k2,λ1,λ2,K &gt; 0</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Surface and switching gains must be positive&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">gains</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># kd ≥ 0</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Damping gain must be non-negative&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">gains</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">gains</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>  <span class="c1"># K1 &gt; K2</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;K1 must be greater than K2 for convergence&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">):</span>  <span class="c1"># All gains &gt; 0</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;All STA gains must be positive&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">[:</span><span class="mi">4</span><span class="p">]):</span>  <span class="c1"># k1,k2,λ1,λ2 &gt; 0</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Surface gains must be positive&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mf">0.1</span> <span class="o">&lt;=</span> <span class="n">gains</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mf">20.0</span><span class="p">):</span>  <span class="c1"># γ bounds</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Adaptation rate must be in [0.1, 20.0]&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">):</span>  <span class="c1"># All gains &gt; 0</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;All hybrid gains must be positive&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">errors</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_pso_bounds_array</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return PSO bounds as numpy array for optimization algorithms.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pso_bounds</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_random_valid_gains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate random valid gain sets within PSO bounds.</span>

<span class="sd">        Useful for PSO initialization and testing.</span>

<span class="sd">        Args:</span>
<span class="sd">            n_samples: Number of random gain sets to generate</span>

<span class="sd">        Returns:</span>
<span class="sd">            Array of shape (n_samples, n_gains) with valid gain sets</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bounds_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pso_bounds_array</span><span class="p">()</span>
        <span class="n">lower_bounds</span> <span class="o">=</span> <span class="n">bounds_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">upper_bounds</span> <span class="o">=</span> <span class="n">bounds_array</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>

        <span class="n">samples</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="c1"># Generate random sample in bounds</span>
                <span class="n">sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">lower_bounds</span><span class="p">,</span> <span class="n">upper_bounds</span><span class="p">)</span>

                <span class="c1"># Validate constraints</span>
                <span class="n">is_valid</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_gains</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
                <span class="k">if</span> <span class="n">is_valid</span><span class="p">:</span>
                    <span class="n">samples</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
                    <span class="k">break</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="factory-functions-for-pso">
<h2>Factory Functions for PSO<a class="headerlink" href="#factory-functions-for-pso" title="Link to this heading">¶</a></h2>
<section id="create-smc-for-pso">
<h3>create_smc_for_pso<a class="headerlink" href="#create-smc-for-pso" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_smc_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span>
                      <span class="n">gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
                      <span class="n">max_force</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">,</span>
                      <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
                      <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PSOControllerWrapper</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Primary function for creating SMC controllers in PSO fitness functions.</span>

<span class="sd">    This function provides the optimal interface for PSO optimization workflows:</span>
<span class="sd">    - Single-line controller creation</span>
<span class="sd">    - Automatic mathematical constraint validation</span>
<span class="sd">    - Performance-optimized wrapper for simplified control interface</span>
<span class="sd">    - Comprehensive error handling for robust PSO evaluation</span>

<span class="sd">    Mathematical Foundation:</span>
<span class="sd">    Each controller type implements specific sliding mode control laws:</span>

<span class="sd">    Classical SMC:</span>
<span class="sd">        u = -(k1·θ1 + k2·θ2) - (λ1·θ̇1 + λ2·θ̇2) - K·tanh(s/φ) - kd·ẋ</span>
<span class="sd">        s = λ1·e1 + λ2·e2 + ė1 + ė2</span>

<span class="sd">    Super-Twisting SMC:</span>
<span class="sd">        u̇ = -K1·sign(s) - K2·sign(ṡ)</span>
<span class="sd">        s = λ1·e1 + λ2·e2 + α1·ė1 + α2·ė2</span>

<span class="sd">    Adaptive SMC:</span>
<span class="sd">        u = u_eq + u_sw</span>
<span class="sd">        K̇ = γ|s| - σK  (online adaptation)</span>

<span class="sd">    Hybrid SMC:</span>
<span class="sd">        u = w1·u_adaptive + w2·u_sta  (mode switching)</span>

<span class="sd">    Args:</span>
<span class="sd">        smc_type: Controller type from SMCType enumeration</span>
<span class="sd">        gains: Gain array matching controller requirements:</span>
<span class="sd">            - Classical: [k1, k2, λ1, λ2, K, kd] (6 parameters)</span>
<span class="sd">            - STA: [K1, K2, λ1, λ2, α1, α2] (6 parameters)</span>
<span class="sd">            - Adaptive: [k1, k2, λ1, λ2, γ] (5 parameters)</span>
<span class="sd">            - Hybrid: [k1, k2, λ1, λ2] (4 parameters)</span>
<span class="sd">        max_force: Control force saturation limit [N]</span>
<span class="sd">        dt: Control timestep [s]</span>
<span class="sd">        **kwargs: Additional controller-specific parameters</span>

<span class="sd">    Returns:</span>
<span class="sd">        PSOControllerWrapper with simplified control interface</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If gains violate mathematical constraints</span>
<span class="sd">        TypeError: If smc_type is not a valid SMCType</span>
<span class="sd">        ConfigurationError: If controller configuration is invalid</span>

<span class="sd">    Performance:</span>
<span class="sd">        - Creation time: &lt;1ms typical</span>
<span class="sd">        - Memory overhead: &lt;500B per wrapper</span>
<span class="sd">        - Thread-safe: Yes (for read operations)</span>

<span class="sd">    PSO Integration Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        def pso_fitness_function(particle: np.ndarray) -&gt; float:</span>
<span class="sd">            # Create controller (automatic validation)</span>
<span class="sd">            controller = create_smc_for_pso(SMCType.CLASSICAL, particle.tolist())</span>

<span class="sd">            # Run simulation</span>
<span class="sd">            result = run_simulation(controller, test_scenario)</span>

<span class="sd">            # Compute performance metric</span>
<span class="sd">            return compute_ise(result)  # Lower is better</span>
<span class="sd">        ```</span>

<span class="sd">    Mathematical Validation:</span>
<span class="sd">        The function automatically validates that gains satisfy:</span>
<span class="sd">        - Lyapunov stability conditions</span>
<span class="sd">        - Convergence requirements (for STA-SMC)</span>
<span class="sd">        - Bounded adaptation constraints (for Adaptive-SMC)</span>
<span class="sd">        - Physical implementation limits</span>

<span class="sd">    Error Handling:</span>
<span class="sd">        - Invalid gains return appropriate error messages</span>
<span class="sd">        - NaN/infinite gains are automatically rejected</span>
<span class="sd">        - Out-of-bounds parameters trigger constraint violations</span>
<span class="sd">        - Missing parameters are detected and reported</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Validate input types</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">SMCType</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;smc_type must be SMCType, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">smc_type</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gains</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;gains must be list or array, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Convert to list if numpy array</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gains</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">gains</span> <span class="o">=</span> <span class="n">gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="c1"># Get gain specification for validation</span>
    <span class="n">gain_spec</span> <span class="o">=</span> <span class="n">SMC_GAIN_SPECS</span><span class="p">[</span><span class="n">smc_type</span><span class="p">]</span>

    <span class="c1"># Validate gain count</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="o">!=</span> <span class="n">gain_spec</span><span class="o">.</span><span class="n">n_gains</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">smc_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> requires </span><span class="si">{</span><span class="n">gain_spec</span><span class="o">.</span><span class="n">n_gains</span><span class="si">}</span><span class="s2"> gains, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Validate mathematical constraints</span>
    <span class="n">is_valid</span><span class="p">,</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">gain_spec</span><span class="o">.</span><span class="n">validate_gains</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Gain validation failed for </span><span class="si">{</span><span class="n">smc_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">error_msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">errors</span><span class="p">)</span>
        <span class="n">error_msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Constraints: </span><span class="si">{</span><span class="n">smc_type</span><span class="o">.</span><span class="n">mathematical_constraints</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>

    <span class="c1"># Create type-safe configuration</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">SMCConfig</span><span class="p">(</span>
        <span class="n">gains</span><span class="o">=</span><span class="n">gains</span><span class="p">,</span>
        <span class="n">max_force</span><span class="o">=</span><span class="n">max_force</span><span class="p">,</span>
        <span class="n">dt</span><span class="o">=</span><span class="n">dt</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>

    <span class="c1"># Create controller through factory</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">SMCFactory</span><span class="o">.</span><span class="n">create_controller</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>

    <span class="c1"># Return PSO-optimized wrapper</span>
    <span class="k">return</span> <span class="n">PSOControllerWrapper</span><span class="p">(</span><span class="n">controller</span><span class="p">)</span>

<span class="c1"># Performance optimization: Pre-validate common gain patterns</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_validate_gains_cached</span><span class="p">(</span><span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span> <span class="n">gains_tuple</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cached validation for common gain patterns.&quot;&quot;&quot;</span>
    <span class="n">gain_spec</span> <span class="o">=</span> <span class="n">SMC_GAIN_SPECS</span><span class="p">[</span><span class="n">smc_type</span><span class="p">]</span>
    <span class="n">is_valid</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">gain_spec</span><span class="o">.</span><span class="n">validate_gains</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">gains_tuple</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">is_valid</span>
</pre></div>
</div>
</section>
<section id="get-gain-bounds-for-pso">
<h3>get_gain_bounds_for_pso<a class="headerlink" href="#get-gain-bounds-for-pso" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_gain_bounds_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span>
                           <span class="n">custom_constraints</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
                           <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get mathematically-derived PSO optimization bounds for SMC controllers.</span>

<span class="sd">    Bounds are derived from rigorous control theory analysis:</span>
<span class="sd">    - Lyapunov stability requirements</span>
<span class="sd">    - Performance specifications (settling time, overshoot)</span>
<span class="sd">    - Physical system constraints (actuator saturation)</span>
<span class="sd">    - Numerical implementation limits</span>

<span class="sd">    Mathematical Derivation:</span>

<span class="sd">    Classical SMC Bounds:</span>
<span class="sd">        k1, k2 ∈ [0.1, 50]: Position gains for reasonable pole placement</span>
<span class="sd">            - Lower bound: Minimum for controllability</span>
<span class="sd">            - Upper bound: Avoid excessive control action</span>

<span class="sd">        λ1, λ2 ∈ [1, 50]: Surface gains for desired bandwidth</span>
<span class="sd">            - Lower bound: Minimum for stability (λi &gt; 0)</span>
<span class="sd">            - Upper bound: Avoid high-frequency dynamics</span>

<span class="sd">        K ∈ [1, 200]: Switching gain for disturbance rejection</span>
<span class="sd">            - Lower bound: Overcome uncertainty bound</span>
<span class="sd">            - Upper bound: Practical actuator limits</span>

<span class="sd">        kd ∈ [0, 50]: Damping gain for chattering reduction</span>
<span class="sd">            - Lower bound: Non-negative constraint</span>
<span class="sd">            - Upper bound: Avoid over-damping</span>

<span class="sd">    Super-Twisting Bounds:</span>
<span class="sd">        K1 ∈ [2, 100]: Primary twisting gain</span>
<span class="sd">            - Must satisfy K1 &gt; K2 constraint</span>
<span class="sd">            - Upper bound from actuator limitations</span>

<span class="sd">        K2 ∈ [1, 99]: Secondary twisting gain</span>
<span class="sd">            - Must satisfy K2 &lt; K1 constraint</span>
<span class="sd">            - Lower bound for convergence guarantee</span>

<span class="sd">        λ1, λ2, α1, α2 ∈ [1, 50]: Surface parameters</span>
<span class="sd">            - Positive definite requirement</span>
<span class="sd">            - Bandwidth considerations</span>

<span class="sd">    Adaptive SMC Bounds:</span>
<span class="sd">        k1, k2, λ1, λ2: Same as classical SMC</span>

<span class="sd">        γ ∈ [0.1, 20]: Adaptation rate</span>
<span class="sd">            - Lower bound: Minimum adaptation speed</span>
<span class="sd">            - Upper bound: Stability margin preservation</span>

<span class="sd">    Hybrid SMC Bounds:</span>
<span class="sd">        k1, k2, λ1, λ2 ∈ [1, 50]: Surface gains</span>
<span class="sd">            - Positive definite requirement</span>
<span class="sd">            - Performance considerations</span>

<span class="sd">    Args:</span>
<span class="sd">        smc_type: Controller type for bound derivation</span>
<span class="sd">        custom_constraints: Optional custom constraint overrides</span>
<span class="sd">            Example: {&#39;max_force&#39;: 150.0, &#39;settling_time&#39;: 3.0}</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of (lower_bound, upper_bound) tuples for each gain parameter</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If smc_type is invalid</span>
<span class="sd">        TypeError: If custom_constraints has wrong format</span>

<span class="sd">    Usage Examples:</span>
<span class="sd">        # Standard bounds</span>
<span class="sd">        bounds = get_gain_bounds_for_pso(SMCType.CLASSICAL)</span>

<span class="sd">        # Custom constraints</span>
<span class="sd">        custom = {&#39;max_force&#39;: 150.0, &#39;settling_time&#39;: 3.0}</span>
<span class="sd">        bounds = get_gain_bounds_for_pso(SMCType.CLASSICAL, custom)</span>

<span class="sd">        # PSO integration</span>
<span class="sd">        from pyswarms.single import GlobalBestPSO</span>
<span class="sd">        bounds_array = np.array(bounds)</span>
<span class="sd">        optimizer = GlobalBestPSO(</span>
<span class="sd">            n_particles=30,</span>
<span class="sd">            dimensions=len(bounds),</span>
<span class="sd">            bounds=(bounds_array[:, 0], bounds_array[:, 1])</span>
<span class="sd">        )</span>

<span class="sd">    Mathematical Validation:</span>
<span class="sd">        All bounds are verified to satisfy:</span>
<span class="sd">        1. Lyapunov stability conditions: V̇ ≤ -η|s|</span>
<span class="sd">        2. Reachability conditions: ṡ·s ≤ -η|s|</span>
<span class="sd">        3. Finite-time convergence (STA): Specific gain relationships</span>
<span class="sd">        4. Bounded adaptation (Adaptive): Parameter drift prevention</span>

<span class="sd">    Performance Considerations:</span>
<span class="sd">        - Tighter bounds lead to faster PSO convergence</span>
<span class="sd">        - Bounds include safety margins for robustness</span>
<span class="sd">        - Physical constraints prevent actuator saturation</span>
<span class="sd">        - Numerical bounds avoid conditioning issues</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">SMCType</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid SMC type: </span><span class="si">{</span><span class="n">smc_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Default constraints (can be overridden)</span>
    <span class="n">constraints</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;max_force&#39;</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>        <span class="c1"># Maximum actuator force [N]</span>
        <span class="s1">&#39;settling_time&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>      <span class="c1"># Desired settling time [s]</span>
        <span class="s1">&#39;overshoot_limit&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>   <span class="c1"># Maximum overshoot [%]</span>
        <span class="s1">&#39;bandwidth&#39;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>         <span class="c1"># Control bandwidth [rad/s]</span>
        <span class="s1">&#39;uncertainty_bound&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>  <span class="c1"># Model uncertainty estimate</span>
        <span class="s1">&#39;noise_level&#39;</span><span class="p">:</span> <span class="mf">0.01</span>        <span class="c1"># Sensor noise level</span>
    <span class="p">}</span>

    <span class="c1"># Apply custom constraints if provided</span>
    <span class="k">if</span> <span class="n">custom_constraints</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">custom_constraints</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;custom_constraints must be dictionary&quot;</span><span class="p">)</span>
        <span class="n">constraints</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">custom_constraints</span><span class="p">)</span>

    <span class="c1"># Extract constraint values</span>
    <span class="n">max_force</span> <span class="o">=</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;max_force&#39;</span><span class="p">]</span>
    <span class="n">settling_time</span> <span class="o">=</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;settling_time&#39;</span><span class="p">]</span>
    <span class="n">bandwidth</span> <span class="o">=</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;bandwidth&#39;</span><span class="p">]</span>
    <span class="n">uncertainty</span> <span class="o">=</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;uncertainty_bound&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span>
        <span class="c1"># Classical SMC bounds with mathematical justification</span>

        <span class="c1"># Position gains: pole placement considerations</span>
        <span class="c1"># Natural frequency: ωn = 4/settling_time</span>
        <span class="n">omega_n</span> <span class="o">=</span> <span class="mf">4.0</span> <span class="o">/</span> <span class="n">settling_time</span>
        <span class="n">k_min</span> <span class="o">=</span> <span class="n">omega_n</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="mi">100</span>  <span class="c1"># Conservative lower bound</span>
        <span class="n">k_max</span> <span class="o">=</span> <span class="n">omega_n</span><span class="o">**</span><span class="mi">2</span>        <span class="c1"># Upper bound for reasonable response</span>

        <span class="c1"># Surface gains: bandwidth considerations</span>
        <span class="n">lambda_min</span> <span class="o">=</span> <span class="n">omega_n</span> <span class="o">/</span> <span class="mi">2</span>   <span class="c1"># Minimum for stability</span>
        <span class="n">lambda_max</span> <span class="o">=</span> <span class="n">bandwidth</span>     <span class="c1"># Maximum for implementability</span>

        <span class="c1"># Switching gain: uncertainty rejection</span>
        <span class="n">K_min</span> <span class="o">=</span> <span class="n">uncertainty</span> <span class="o">*</span> <span class="mf">1.5</span>  <span class="c1"># Safety margin over uncertainty</span>
        <span class="n">K_max</span> <span class="o">=</span> <span class="n">max_force</span> <span class="o">*</span> <span class="mf">0.8</span>    <span class="c1"># Actuator saturation margin</span>

        <span class="c1"># Damping gain: chattering reduction</span>
        <span class="n">kd_min</span> <span class="o">=</span> <span class="mf">0.0</span>              <span class="c1"># Non-negative constraint</span>
        <span class="n">kd_max</span> <span class="o">=</span> <span class="n">lambda_max</span> <span class="o">/</span> <span class="mi">2</span>   <span class="c1"># Avoid over-damping</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">k_min</span><span class="p">,</span> <span class="n">k_max</span><span class="p">),</span>          <span class="c1"># k1</span>
            <span class="p">(</span><span class="n">k_min</span><span class="p">,</span> <span class="n">k_max</span><span class="p">),</span>          <span class="c1"># k2</span>
            <span class="p">(</span><span class="n">lambda_min</span><span class="p">,</span> <span class="n">lambda_max</span><span class="p">),</span> <span class="c1"># λ1</span>
            <span class="p">(</span><span class="n">lambda_min</span><span class="p">,</span> <span class="n">lambda_max</span><span class="p">),</span> <span class="c1"># λ2</span>
            <span class="p">(</span><span class="n">K_min</span><span class="p">,</span> <span class="n">K_max</span><span class="p">),</span>          <span class="c1"># K</span>
            <span class="p">(</span><span class="n">kd_min</span><span class="p">,</span> <span class="n">kd_max</span><span class="p">)</span>         <span class="c1"># kd</span>
        <span class="p">]</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span>
        <span class="c1"># Super-twisting bounds with convergence constraints</span>

        <span class="c1"># Estimate Lipschitz constant for convergence analysis</span>
        <span class="n">L</span> <span class="o">=</span> <span class="n">uncertainty</span> <span class="o">+</span> <span class="n">bandwidth</span>  <span class="c1"># Conservative estimate</span>

        <span class="c1"># K1 bounds: finite-time convergence requirement</span>
        <span class="n">K1_min</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">L</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.2</span>  <span class="c1"># Safety margin</span>
        <span class="n">K1_max</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">max_force</span> <span class="o">*</span> <span class="n">L</span><span class="p">)</span>  <span class="c1"># Physical limit</span>

        <span class="c1"># K2 bounds: must satisfy K2 &lt; K1</span>
        <span class="n">K2_min</span> <span class="o">=</span> <span class="n">L</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">L</span><span class="p">))</span> <span class="o">*</span> <span class="mf">1.1</span>  <span class="c1"># Convergence requirement</span>
        <span class="n">K2_max</span> <span class="o">=</span> <span class="n">K1_max</span> <span class="o">*</span> <span class="mf">0.9</span>  <span class="c1"># Ensure K1 &gt; K2</span>

        <span class="c1"># Surface parameters: similar to classical</span>
        <span class="n">lambda_min</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">/</span> <span class="n">settling_time</span>
        <span class="n">lambda_max</span> <span class="o">=</span> <span class="n">bandwidth</span> <span class="o">/</span> <span class="mi">2</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">K1_min</span><span class="p">,</span> <span class="n">K1_max</span><span class="p">),</span>        <span class="c1"># K1</span>
            <span class="p">(</span><span class="n">K2_min</span><span class="p">,</span> <span class="n">K2_max</span><span class="p">),</span>        <span class="c1"># K2</span>
            <span class="p">(</span><span class="n">lambda_min</span><span class="p">,</span> <span class="n">lambda_max</span><span class="p">),</span> <span class="c1"># λ1</span>
            <span class="p">(</span><span class="n">lambda_min</span><span class="p">,</span> <span class="n">lambda_max</span><span class="p">),</span> <span class="c1"># λ2</span>
            <span class="p">(</span><span class="n">lambda_min</span><span class="p">,</span> <span class="n">lambda_max</span><span class="p">),</span> <span class="c1"># α1</span>
            <span class="p">(</span><span class="n">lambda_min</span><span class="p">,</span> <span class="n">lambda_max</span><span class="p">)</span>  <span class="c1"># α2</span>
        <span class="p">]</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span>
        <span class="c1"># Adaptive SMC bounds with adaptation constraints</span>

        <span class="c1"># Surface gains: same analysis as classical</span>
        <span class="n">omega_n</span> <span class="o">=</span> <span class="mf">4.0</span> <span class="o">/</span> <span class="n">settling_time</span>
        <span class="n">k_min</span> <span class="o">=</span> <span class="n">omega_n</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="mi">100</span>
        <span class="n">k_max</span> <span class="o">=</span> <span class="n">omega_n</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">lambda_min</span> <span class="o">=</span> <span class="n">omega_n</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">lambda_max</span> <span class="o">=</span> <span class="n">bandwidth</span>

        <span class="c1"># Adaptation rate: stability-preserving bounds</span>
        <span class="n">gamma_min</span> <span class="o">=</span> <span class="mf">0.1</span>           <span class="c1"># Minimum adaptation speed</span>
        <span class="n">gamma_max</span> <span class="o">=</span> <span class="n">bandwidth</span> <span class="o">/</span> <span class="mi">5</span>  <span class="c1"># Stability margin preservation</span>
        <span class="n">gamma_max</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">gamma_max</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">)</span>  <span class="c1"># Practical upper limit</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">k_min</span><span class="p">,</span> <span class="n">k_max</span><span class="p">),</span>          <span class="c1"># k1</span>
            <span class="p">(</span><span class="n">k_min</span><span class="p">,</span> <span class="n">k_max</span><span class="p">),</span>          <span class="c1"># k2</span>
            <span class="p">(</span><span class="n">lambda_min</span><span class="p">,</span> <span class="n">lambda_max</span><span class="p">),</span> <span class="c1"># λ1</span>
            <span class="p">(</span><span class="n">lambda_min</span><span class="p">,</span> <span class="n">lambda_max</span><span class="p">),</span> <span class="c1"># λ2</span>
            <span class="p">(</span><span class="n">gamma_min</span><span class="p">,</span> <span class="n">gamma_max</span><span class="p">)</span>   <span class="c1"># γ</span>
        <span class="p">]</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">:</span>
        <span class="c1"># Hybrid controller bounds (conservative)</span>

        <span class="c1"># Surface gains: conservative bounds for mode switching</span>
        <span class="n">gain_min</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">/</span> <span class="n">settling_time</span>
        <span class="n">gain_max</span> <span class="o">=</span> <span class="n">bandwidth</span> <span class="o">/</span> <span class="mi">3</span>  <span class="c1"># Conservative for hybrid operation</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">gain_min</span><span class="p">,</span> <span class="n">gain_max</span><span class="p">),</span>    <span class="c1"># k1</span>
            <span class="p">(</span><span class="n">gain_min</span><span class="p">,</span> <span class="n">gain_max</span><span class="p">),</span>    <span class="c1"># k2</span>
            <span class="p">(</span><span class="n">gain_min</span><span class="p">,</span> <span class="n">gain_max</span><span class="p">),</span>    <span class="c1"># λ1</span>
            <span class="p">(</span><span class="n">gain_min</span><span class="p">,</span> <span class="n">gain_max</span><span class="p">)</span>     <span class="c1"># λ2</span>
        <span class="p">]</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported SMC type: </span><span class="si">{</span><span class="n">smc_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Validate bounds consistency</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bounds</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lower</span> <span class="o">&gt;=</span> <span class="n">upper</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid bounds for parameter </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: [</span><span class="si">{</span><span class="n">lower</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">upper</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lower</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">smc_type</span> <span class="o">!=</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span>  <span class="c1"># Only kd can be 0</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Negative lower bound for parameter </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">lower</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Apply constraint-specific adjustments</span>
    <span class="k">if</span> <span class="s1">&#39;force_limit&#39;</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
        <span class="c1"># Adjust switching/twisting gains for force constraints</span>
        <span class="n">force_limit</span> <span class="o">=</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;force_limit&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nb">min</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">force_limit</span> <span class="o">*</span> <span class="mf">0.8</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nb">min</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">force_limit</span> <span class="o">*</span> <span class="mf">0.8</span><span class="p">))</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nb">min</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">force_limit</span> <span class="o">*</span> <span class="mf">0.8</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">bounds</span>
</pre></div>
</div>
</section>
<section id="validate-smc-gains">
<h3>validate_smc_gains<a class="headerlink" href="#validate-smc-gains" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_smc_gains</span><span class="p">(</span><span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span>
                      <span class="n">gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
                      <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                      <span class="n">return_details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
                      <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Comprehensive validation of SMC gains against mathematical constraints.</span>

<span class="sd">    Performs multi-level validation:</span>
<span class="sd">    1. Basic constraints (positivity, bounds checking)</span>
<span class="sd">    2. Mathematical constraints (stability, convergence)</span>
<span class="sd">    3. Physical constraints (actuator limits, bandwidth)</span>
<span class="sd">    4. Numerical constraints (conditioning, finite values)</span>

<span class="sd">    Mathematical Validation Framework:</span>

<span class="sd">    Classical SMC Validation:</span>
<span class="sd">        1. Stability: λ1, λ2, K &gt; 0 (Lyapunov condition V̇ ≤ -η|s|)</span>
<span class="sd">        2. Reachability: K &gt; |d_max| (uncertainty bound)</span>
<span class="sd">        3. Performance: Pole placement within stability region</span>
<span class="sd">        4. Saturation: K·φ ≤ max_force (actuator limits)</span>

<span class="sd">    Super-Twisting Validation:</span>
<span class="sd">        1. Convergence: K1 &gt; K2 &gt; 0 (finite-time stability)</span>
<span class="sd">        2. Lyapunov: K1² &gt; 4LK2 (sufficient condition)</span>
<span class="sd">        3. Reachability: Gains sufficient for uncertainty rejection</span>
<span class="sd">        4. Bandwidth: Avoid high-frequency content</span>

<span class="sd">    Adaptive SMC Validation:</span>
<span class="sd">        1. Stability: Base gains satisfy classical constraints</span>
<span class="sd">        2. Adaptation: 0.1 ≤ γ ≤ 20 (bounded adaptation)</span>
<span class="sd">        3. Convergence: Adaptation rate vs system bandwidth</span>
<span class="sd">        4. Robustness: Parameter drift prevention</span>

<span class="sd">    Hybrid SMC Validation:</span>
<span class="sd">        1. Mode stability: Each mode individually stable</span>
<span class="sd">        2. Switching stability: No instability during transitions</span>
<span class="sd">        3. Performance: Smooth mode transitions</span>
<span class="sd">        4. Robustness: Consistent performance across modes</span>

<span class="sd">    Args:</span>
<span class="sd">        smc_type: Controller type for validation</span>
<span class="sd">        gains: Gain array to validate</span>
<span class="sd">        strict: Enable strict mathematical validation</span>
<span class="sd">        return_details: Return detailed validation information</span>

<span class="sd">    Returns:</span>
<span class="sd">        If return_details=False: Boolean validation result</span>
<span class="sd">        If return_details=True: Tuple of (is_valid, validation_details)</span>

<span class="sd">    Validation Details Dictionary:</span>
<span class="sd">        {</span>
<span class="sd">            &#39;is_valid&#39;: bool,</span>
<span class="sd">            &#39;errors&#39;: List[str],           # Constraint violations</span>
<span class="sd">            &#39;warnings&#39;: List[str],         # Potential issues</span>
<span class="sd">            &#39;stability_analysis&#39;: {</span>
<span class="sd">                &#39;lyapunov_stable&#39;: bool,</span>
<span class="sd">                &#39;convergence_rate&#39;: float,</span>
<span class="sd">                &#39;stability_margin&#39;: float</span>
<span class="sd">            },</span>
<span class="sd">            &#39;performance_analysis&#39;: {</span>
<span class="sd">                &#39;estimated_settling_time&#39;: float,</span>
<span class="sd">                &#39;estimated_overshoot&#39;: float,</span>
<span class="sd">                &#39;bandwidth_estimate&#39;: float</span>
<span class="sd">            },</span>
<span class="sd">            &#39;constraint_details&#39;: {</span>
<span class="sd">                &#39;basic_constraints&#39;: Dict,</span>
<span class="sd">                &#39;mathematical_constraints&#39;: Dict,</span>
<span class="sd">                &#39;physical_constraints&#39;: Dict</span>
<span class="sd">            }</span>
<span class="sd">        }</span>

<span class="sd">    Usage Examples:</span>
<span class="sd">        # Basic validation</span>
<span class="sd">        is_valid = validate_smc_gains(SMCType.CLASSICAL, [10,8,15,12,50,5])</span>

<span class="sd">        # Detailed validation</span>
<span class="sd">        is_valid, details = validate_smc_gains(</span>
<span class="sd">            SMCType.CLASSICAL, gains, return_details=True</span>
<span class="sd">        )</span>
<span class="sd">        print(f&quot;Stability margin: {details[&#39;stability_analysis&#39;][&#39;stability_margin&#39;]}&quot;)</span>

<span class="sd">        # PSO integration with validation</span>
<span class="sd">        def pso_fitness_with_validation(gains):</span>
<span class="sd">            if not validate_smc_gains(SMCType.CLASSICAL, gains):</span>
<span class="sd">                return 1000.0  # Penalty for invalid gains</span>
<span class="sd">            return evaluate_controller_performance(gains)</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If basic validation fails (wrong gain count, NaN values)</span>
<span class="sd">        TypeError: If inputs have wrong types</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Input validation</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">SMCType</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;smc_type must be SMCType, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">smc_type</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gains</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;gains must be list or array, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Convert to list if numpy array</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gains</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">gains</span> <span class="o">=</span> <span class="n">gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="c1"># Initialize validation results</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">stability_analysis</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">performance_analysis</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">constraint_details</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;basic_constraints&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;mathematical_constraints&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;physical_constraints&#39;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">}</span>

    <span class="c1"># Get gain specification</span>
    <span class="n">gain_spec</span> <span class="o">=</span> <span class="n">SMC_GAIN_SPECS</span><span class="p">[</span><span class="n">smc_type</span><span class="p">]</span>

    <span class="c1"># Basic validation</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="o">!=</span> <span class="n">gain_spec</span><span class="o">.</span><span class="n">n_gains</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected </span><span class="si">{</span><span class="n">gain_spec</span><span class="o">.</span><span class="n">n_gains</span><span class="si">}</span><span class="s2"> gains, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">return_details</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">{</span>
                <span class="s1">&#39;is_valid&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;errors&#39;</span><span class="p">:</span> <span class="n">errors</span><span class="p">,</span>
                <span class="s1">&#39;warnings&#39;</span><span class="p">:</span> <span class="n">warnings</span><span class="p">,</span>
                <span class="s1">&#39;stability_analysis&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s1">&#39;performance_analysis&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s1">&#39;constraint_details&#39;</span><span class="p">:</span> <span class="n">constraint_details</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Check for finite values</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">):</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;All gains must be finite (no NaN or infinite values)&quot;</span><span class="p">)</span>

    <span class="c1"># Check for reasonable magnitudes</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e6</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Some gains are very large (&gt;1e6), may cause numerical issues&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-8</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>  <span class="c1"># Exclude kd for classical</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Some gains are very small (&lt;1e-8), may affect performance&quot;</span><span class="p">)</span>

    <span class="c1"># Controller-specific mathematical validation</span>
    <span class="k">if</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span>
        <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">K</span><span class="p">,</span> <span class="n">kd</span> <span class="o">=</span> <span class="n">gains</span>

        <span class="c1"># Basic constraints</span>
        <span class="n">constraint_details</span><span class="p">[</span><span class="s1">&#39;basic_constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;k1_positive&#39;</span><span class="p">:</span> <span class="n">k1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;k2_positive&#39;</span><span class="p">:</span> <span class="n">k2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;lambda1_positive&#39;</span><span class="p">:</span> <span class="n">lam1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;lambda2_positive&#39;</span><span class="p">:</span> <span class="n">lam2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;K_positive&#39;</span><span class="p">:</span> <span class="n">K</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;kd_nonnegative&#39;</span><span class="p">:</span> <span class="n">kd</span> <span class="o">&gt;=</span> <span class="mi">0</span>
        <span class="p">}</span>

        <span class="c1"># Check positivity constraints</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">[:</span><span class="mi">5</span><span class="p">]):</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Surface gains (k1,k2,λ1,λ2) and switching gain (K) must be positive&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kd</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Damping gain (kd) must be non-negative&quot;</span><span class="p">)</span>

        <span class="c1"># Mathematical constraints (strict mode)</span>
        <span class="k">if</span> <span class="n">strict</span><span class="p">:</span>
            <span class="c1"># Estimate stability properties</span>
            <span class="c1"># Simplified stability analysis</span>
            <span class="n">min_surface_gain</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">)</span>
            <span class="n">estimated_bandwidth</span> <span class="o">=</span> <span class="n">min_surface_gain</span>
            <span class="n">estimated_uncertainty</span> <span class="o">=</span> <span class="mf">10.0</span>  <span class="c1"># Conservative estimate</span>

            <span class="n">constraint_details</span><span class="p">[</span><span class="s1">&#39;mathematical_constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;switching_gain_adequate&#39;</span><span class="p">:</span> <span class="n">K</span> <span class="o">&gt;</span> <span class="n">estimated_uncertainty</span><span class="p">,</span>
                <span class="s1">&#39;surface_gains_adequate&#39;</span><span class="p">:</span> <span class="n">min_surface_gain</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">,</span>
                <span class="s1">&#39;damping_reasonable&#39;</span><span class="p">:</span> <span class="n">kd</span> <span class="o">&lt;=</span> <span class="n">min_surface_gain</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="n">K</span> <span class="o">&lt;=</span> <span class="n">estimated_uncertainty</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Switching gain K=</span><span class="si">{</span><span class="n">K</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> may be too small for uncertainty rejection&quot;</span><span class="p">)</span>

            <span class="c1"># Stability analysis</span>
            <span class="n">stability_margin</span> <span class="o">=</span> <span class="n">K</span> <span class="o">-</span> <span class="n">estimated_uncertainty</span>
            <span class="n">convergence_rate</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">min_surface_gain</span><span class="p">,</span> <span class="n">stability_margin</span><span class="p">)</span> <span class="k">if</span> <span class="n">stability_margin</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

            <span class="n">stability_analysis</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;lyapunov_stable&#39;</span><span class="p">:</span> <span class="n">stability_margin</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;convergence_rate&#39;</span><span class="p">:</span> <span class="n">convergence_rate</span><span class="p">,</span>
                <span class="s1">&#39;stability_margin&#39;</span><span class="p">:</span> <span class="n">stability_margin</span> <span class="o">/</span> <span class="n">K</span> <span class="k">if</span> <span class="n">K</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
            <span class="p">}</span>

            <span class="c1"># Performance estimates</span>
            <span class="n">estimated_settling_time</span> <span class="o">=</span> <span class="mf">4.0</span> <span class="o">/</span> <span class="n">min_surface_gain</span> <span class="k">if</span> <span class="n">min_surface_gain</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
            <span class="n">estimated_overshoot</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">k1</span> <span class="o">+</span> <span class="n">k2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">lam1</span> <span class="o">+</span> <span class="n">lam2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span> <span class="k">if</span> <span class="p">(</span><span class="n">lam1</span> <span class="o">+</span> <span class="n">lam2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">100</span>

            <span class="n">performance_analysis</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;estimated_settling_time&#39;</span><span class="p">:</span> <span class="n">estimated_settling_time</span><span class="p">,</span>
                <span class="s1">&#39;estimated_overshoot&#39;</span><span class="p">:</span> <span class="n">estimated_overshoot</span><span class="p">,</span>
                <span class="s1">&#39;bandwidth_estimate&#39;</span><span class="p">:</span> <span class="n">estimated_bandwidth</span>
            <span class="p">}</span>

        <span class="c1"># Physical constraints</span>
        <span class="n">max_force_estimate</span> <span class="o">=</span> <span class="mf">100.0</span>  <span class="c1"># Default actuator limit</span>
        <span class="n">constraint_details</span><span class="p">[</span><span class="s1">&#39;physical_constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;force_saturation_check&#39;</span><span class="p">:</span> <span class="n">K</span> <span class="o">&lt;=</span> <span class="n">max_force_estimate</span><span class="p">,</span>
            <span class="s1">&#39;bandwidth_feasible&#39;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">50.0</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">K</span> <span class="o">&gt;</span> <span class="n">max_force_estimate</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Switching gain K=</span><span class="si">{</span><span class="n">K</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> may exceed actuator limits&quot;</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span>
        <span class="n">K1</span><span class="p">,</span> <span class="n">K2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">,</span> <span class="n">alpha2</span> <span class="o">=</span> <span class="n">gains</span>

        <span class="c1"># Basic constraints</span>
        <span class="n">constraint_details</span><span class="p">[</span><span class="s1">&#39;basic_constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;K1_positive&#39;</span><span class="p">:</span> <span class="n">K1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;K2_positive&#39;</span><span class="p">:</span> <span class="n">K2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;K1_greater_K2&#39;</span><span class="p">:</span> <span class="n">K1</span> <span class="o">&gt;</span> <span class="n">K2</span><span class="p">,</span>
            <span class="s1">&#39;lambda1_positive&#39;</span><span class="p">:</span> <span class="n">lam1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;lambda2_positive&#39;</span><span class="p">:</span> <span class="n">lam2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;alpha1_positive&#39;</span><span class="p">:</span> <span class="n">alpha1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;alpha2_positive&#39;</span><span class="p">:</span> <span class="n">alpha2</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="p">}</span>

        <span class="c1"># Critical convergence constraint</span>
        <span class="k">if</span> <span class="n">K1</span> <span class="o">&lt;=</span> <span class="n">K2</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;K1 must be greater than K2 for finite-time convergence&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">):</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;All STA gains must be positive&quot;</span><span class="p">)</span>

        <span class="c1"># Mathematical constraints (strict mode)</span>
        <span class="k">if</span> <span class="n">strict</span><span class="p">:</span>
            <span class="c1"># Finite-time convergence analysis</span>
            <span class="n">L_estimate</span> <span class="o">=</span> <span class="mf">15.0</span>  <span class="c1"># Conservative Lipschitz constant estimate</span>
            <span class="n">convergence_condition</span> <span class="o">=</span> <span class="n">K1</span><span class="o">**</span><span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">L_estimate</span> <span class="o">*</span> <span class="n">K2</span>

            <span class="n">constraint_details</span><span class="p">[</span><span class="s1">&#39;mathematical_constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;finite_time_convergence&#39;</span><span class="p">:</span> <span class="n">convergence_condition</span><span class="p">,</span>
                <span class="s1">&#39;gains_well_separated&#39;</span><span class="p">:</span> <span class="n">K1</span> <span class="o">&gt;</span> <span class="n">K2</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">,</span>
                <span class="s1">&#39;lipschitz_condition&#39;</span><span class="p">:</span> <span class="n">K1</span><span class="o">**</span><span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">L_estimate</span> <span class="o">*</span> <span class="n">K2</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">convergence_condition</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;May not satisfy sufficient condition for finite-time convergence&quot;</span><span class="p">)</span>

            <span class="c1"># Stability analysis</span>
            <span class="n">convergence_rate</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">K1</span><span class="p">,</span> <span class="n">K2</span><span class="p">)</span> <span class="k">if</span> <span class="n">K1</span> <span class="o">&gt;</span> <span class="n">K2</span> <span class="k">else</span> <span class="mi">0</span>
            <span class="n">stability_margin</span> <span class="o">=</span> <span class="p">(</span><span class="n">K1</span> <span class="o">-</span> <span class="n">K2</span><span class="p">)</span> <span class="o">/</span> <span class="n">K1</span> <span class="k">if</span> <span class="n">K1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

            <span class="n">stability_analysis</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;lyapunov_stable&#39;</span><span class="p">:</span> <span class="n">K1</span> <span class="o">&gt;</span> <span class="n">K2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;convergence_rate&#39;</span><span class="p">:</span> <span class="n">convergence_rate</span><span class="p">,</span>
                <span class="s1">&#39;stability_margin&#39;</span><span class="p">:</span> <span class="n">stability_margin</span>
            <span class="p">}</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span>
        <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">gamma</span> <span class="o">=</span> <span class="n">gains</span>

        <span class="c1"># Basic constraints</span>
        <span class="n">constraint_details</span><span class="p">[</span><span class="s1">&#39;basic_constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;k1_positive&#39;</span><span class="p">:</span> <span class="n">k1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;k2_positive&#39;</span><span class="p">:</span> <span class="n">k2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;lambda1_positive&#39;</span><span class="p">:</span> <span class="n">lam1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;lambda2_positive&#39;</span><span class="p">:</span> <span class="n">lam2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;gamma_in_bounds&#39;</span><span class="p">:</span> <span class="mf">0.1</span> <span class="o">&lt;=</span> <span class="n">gamma</span> <span class="o">&lt;=</span> <span class="mf">20.0</span>
        <span class="p">}</span>

        <span class="c1"># Check positivity and adaptation bounds</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">[:</span><span class="mi">4</span><span class="p">]):</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Surface gains must be positive&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mf">0.1</span> <span class="o">&lt;=</span> <span class="n">gamma</span> <span class="o">&lt;=</span> <span class="mf">20.0</span><span class="p">):</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Adaptation rate γ must be in [0.1, 20.0]&quot;</span><span class="p">)</span>

        <span class="c1"># Mathematical constraints (strict mode)</span>
        <span class="k">if</span> <span class="n">strict</span><span class="p">:</span>
            <span class="c1"># Adaptation stability analysis</span>
            <span class="n">system_bandwidth</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">)</span>
            <span class="n">adaptation_bandwidth</span> <span class="o">=</span> <span class="n">gamma</span> <span class="o">*</span> <span class="n">system_bandwidth</span>

            <span class="n">constraint_details</span><span class="p">[</span><span class="s1">&#39;mathematical_constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;adaptation_stable&#39;</span><span class="p">:</span> <span class="n">gamma</span> <span class="o">&lt;</span> <span class="mf">10.0</span><span class="p">,</span>
                <span class="s1">&#39;adaptation_not_too_slow&#39;</span><span class="p">:</span> <span class="n">gamma</span> <span class="o">&gt;</span> <span class="mf">0.2</span><span class="p">,</span>
                <span class="s1">&#39;separation_principle&#39;</span><span class="p">:</span> <span class="n">adaptation_bandwidth</span> <span class="o">&lt;</span> <span class="n">system_bandwidth</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="n">gamma</span> <span class="o">&gt;</span> <span class="mf">10.0</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;High adaptation rate may cause instability&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">gamma</span> <span class="o">&lt;</span> <span class="mf">0.2</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Low adaptation rate may be too slow&quot;</span><span class="p">)</span>

            <span class="c1"># Stability analysis</span>
            <span class="n">stability_analysis</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;lyapunov_stable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Assuming proper design</span>
                <span class="s1">&#39;convergence_rate&#39;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">system_bandwidth</span><span class="p">,</span> <span class="n">gamma</span><span class="p">),</span>
                <span class="s1">&#39;stability_margin&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">20.0</span> <span class="o">-</span> <span class="n">gamma</span><span class="p">)</span> <span class="o">/</span> <span class="mf">20.0</span>
            <span class="p">}</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">:</span>
        <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span> <span class="o">=</span> <span class="n">gains</span>

        <span class="c1"># Basic constraints</span>
        <span class="n">constraint_details</span><span class="p">[</span><span class="s1">&#39;basic_constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;k1_positive&#39;</span><span class="p">:</span> <span class="n">k1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;k2_positive&#39;</span><span class="p">:</span> <span class="n">k2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;lambda1_positive&#39;</span><span class="p">:</span> <span class="n">lam1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;lambda2_positive&#39;</span><span class="p">:</span> <span class="n">lam2</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">):</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;All hybrid gains must be positive&quot;</span><span class="p">)</span>

        <span class="c1"># Mathematical constraints (strict mode)</span>
        <span class="k">if</span> <span class="n">strict</span><span class="p">:</span>
            <span class="c1"># Hybrid stability analysis (simplified)</span>
            <span class="n">min_gain</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span>

            <span class="n">constraint_details</span><span class="p">[</span><span class="s1">&#39;mathematical_constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;mode_stability&#39;</span><span class="p">:</span> <span class="n">min_gain</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">,</span>
                <span class="s1">&#39;switching_stability&#39;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="o">/</span> <span class="n">min_gain</span> <span class="o">&lt;</span> <span class="mf">10.0</span>
            <span class="p">}</span>

            <span class="n">stability_analysis</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;lyapunov_stable&#39;</span><span class="p">:</span> <span class="n">min_gain</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;convergence_rate&#39;</span><span class="p">:</span> <span class="n">min_gain</span><span class="p">,</span>
                <span class="s1">&#39;stability_margin&#39;</span><span class="p">:</span> <span class="n">min_gain</span> <span class="o">/</span> <span class="nb">max</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
            <span class="p">}</span>

    <span class="c1"># Overall validation result</span>
    <span class="n">is_valid</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="n">return_details</span><span class="p">:</span>
        <span class="n">validation_details</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;is_valid&#39;</span><span class="p">:</span> <span class="n">is_valid</span><span class="p">,</span>
            <span class="s1">&#39;errors&#39;</span><span class="p">:</span> <span class="n">errors</span><span class="p">,</span>
            <span class="s1">&#39;warnings&#39;</span><span class="p">:</span> <span class="n">warnings</span><span class="p">,</span>
            <span class="s1">&#39;stability_analysis&#39;</span><span class="p">:</span> <span class="n">stability_analysis</span><span class="p">,</span>
            <span class="s1">&#39;performance_analysis&#39;</span><span class="p">:</span> <span class="n">performance_analysis</span><span class="p">,</span>
            <span class="s1">&#39;constraint_details&#39;</span><span class="p">:</span> <span class="n">constraint_details</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">is_valid</span><span class="p">,</span> <span class="n">validation_details</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">is_valid</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="pso-controller-wrapper">
<h2>PSO Controller Wrapper<a class="headerlink" href="#pso-controller-wrapper" title="Link to this heading">¶</a></h2>
<section id="psocontrollerwrapper-class">
<h3>PSOControllerWrapper Class<a class="headerlink" href="#psocontrollerwrapper-class" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PSOControllerWrapper</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    PSO-optimized wrapper providing simplified interface for SMC controllers.</span>

<span class="sd">    This wrapper is specifically designed for PSO fitness evaluation with:</span>
<span class="sd">    - Simplified control interface (single state input)</span>
<span class="sd">    - Automatic state management for stateful controllers</span>
<span class="sd">    - Unified output format (numpy array)</span>
<span class="sd">    - Robust error handling for PSO robustness</span>
<span class="sd">    - Performance optimization for repeated evaluations</span>

<span class="sd">    The wrapper handles the complexity of different SMC controller interfaces</span>
<span class="sd">    while providing a consistent, PSO-friendly API.</span>

<span class="sd">    Mathematical Foundation:</span>
<span class="sd">    The wrapper preserves the mathematical properties of the underlying</span>
<span class="sd">    SMC controller while simplifying the interface:</span>

<span class="sd">    Input: state = [θ₁, θ₂, x, θ̇₁, θ̇₂, ẋ] ∈ ℝ⁶</span>
<span class="sd">    Output: u ∈ ℝ (scalar control force)</span>

<span class="sd">    Internal State Management:</span>
<span class="sd">    - Classical SMC: Stateless (empty state_vars)</span>
<span class="sd">    - STA SMC: Maintains (z, σ) for integration</span>
<span class="sd">    - Adaptive SMC: Tracks adaptation variables</span>
<span class="sd">    - Hybrid SMC: Manages mode switching state</span>

<span class="sd">    Performance Characteristics:</span>
<span class="sd">    - Control computation: &lt;0.1ms typical</span>
<span class="sd">    - Memory overhead: &lt;500B per wrapper</span>
<span class="sd">    - Thread safety: Read operations only</span>
<span class="sd">    - Error recovery: Graceful degradation for invalid inputs</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">controller</span><span class="p">:</span> <span class="n">SMCProtocol</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize PSO wrapper with SMC controller.</span>

<span class="sd">        Args:</span>
<span class="sd">            controller: SMC controller implementing SMCProtocol</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If controller doesn&#39;t implement required interface</span>
<span class="sd">            ValueError: If controller configuration is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Validate controller interface</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="s1">&#39;compute_control&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Controller must implement compute_control method&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="s1">&#39;gains&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Controller must have gains property&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">controller</span> <span class="o">=</span> <span class="n">controller</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_history</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Initialize empty history</span>

        <span class="c1"># Initialize controller-specific state variables</span>
        <span class="n">controller_name</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">controller</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>

        <span class="k">if</span> <span class="s1">&#39;SuperTwisting&#39;</span> <span class="ow">in</span> <span class="n">controller_name</span> <span class="ow">or</span> <span class="s1">&#39;STA&#39;</span> <span class="ow">in</span> <span class="n">controller_name</span><span class="p">:</span>
            <span class="c1"># STA-SMC maintains integration variables (z, σ)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_state_vars</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>  <span class="c1"># Initial (z=0, σ=0)</span>
        <span class="k">elif</span> <span class="s1">&#39;Hybrid&#39;</span> <span class="ow">in</span> <span class="n">controller_name</span><span class="p">:</span>
            <span class="c1"># Hybrid controller tracks adaptive gains and integration</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_state_vars</span> <span class="o">=</span> <span class="p">(</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="s1">&#39;k1_init&#39;</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">),</span>  <span class="c1"># k1_prev</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="s1">&#39;k2_init&#39;</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">),</span>  <span class="c1"># k2_prev</span>
                <span class="mf">0.0</span>                                    <span class="c1"># u_int_prev</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="s1">&#39;Adaptive&#39;</span> <span class="ow">in</span> <span class="n">controller_name</span><span class="p">:</span>
            <span class="c1"># Adaptive SMC may track adaptation state</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_state_vars</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="s1">&#39;_initial_state&#39;</span><span class="p">,</span> <span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Classical SMC and others use empty state</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_state_vars</span> <span class="o">=</span> <span class="p">()</span>

        <span class="c1"># Performance tracking</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_call_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_total_compute_time</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_error</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compute_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">state</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
                       <span class="n">state_vars</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">history</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
                       <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute control with flexible interface supporting both:</span>
<span class="sd">        1. Simplified PSO interface: compute_control(state)</span>
<span class="sd">        2. Full interface: compute_control(state, state_vars, history)</span>

<span class="sd">        Mathematical Interface:</span>
<span class="sd">        Input state vector: x = [θ₁, θ₂, x_cart, θ̇₁, θ̇₂, ẋ_cart]</span>
<span class="sd">        - θ₁, θ₂: Pendulum angles [rad]</span>
<span class="sd">        - x_cart: Cart position [m]</span>
<span class="sd">        - θ̇₁, θ̇₂: Angular velocities [rad/s]</span>
<span class="sd">        - ẋ_cart: Cart velocity [m/s]</span>

<span class="sd">        Output control: u ∈ ℝ</span>
<span class="sd">        - Scalar control force [N]</span>
<span class="sd">        - Bounded by actuator limits</span>

<span class="sd">        Args:</span>
<span class="sd">            state: System state vector (6-element numpy array)</span>
<span class="sd">            state_vars: Controller state variables (optional)</span>
<span class="sd">            history: Controller history (optional)</span>

<span class="sd">        Returns:</span>
<span class="sd">            Control output as 1-element numpy array [u]</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If state has wrong dimensions</span>
<span class="sd">            RuntimeError: If control computation fails</span>

<span class="sd">        Performance:</span>
<span class="sd">            - Typical computation time: 0.01-0.1ms</span>
<span class="sd">            - Memory allocation: Minimal (output array only)</span>
<span class="sd">            - Error handling: Graceful fallback to zero control</span>

<span class="sd">        PSO Usage Pattern:</span>
<span class="sd">            ```python</span>
<span class="sd">            def pso_fitness(gains):</span>
<span class="sd">                controller = create_smc_for_pso(SMCType.CLASSICAL, gains)</span>

<span class="sd">                # Simplified interface for PSO</span>
<span class="sd">                total_error = 0.0</span>
<span class="sd">                for state in test_states:</span>
<span class="sd">                    u = controller.compute_control(state)  # Returns [u]</span>
<span class="sd">                    # Use u[0] for scalar control value</span>
<span class="sd">                    total_error += evaluate_single_step(state, u[0])</span>

<span class="sd">                return total_error</span>
<span class="sd">            ```</span>

<span class="sd">        State Management:</span>
<span class="sd">            The wrapper automatically manages controller state between calls:</span>
<span class="sd">            - Classical SMC: No state management needed</span>
<span class="sd">            - STA SMC: Updates integration variables (z, σ)</span>
<span class="sd">            - Adaptive SMC: Updates adaptation parameters</span>
<span class="sd">            - Hybrid SMC: Updates mode and adaptation state</span>

<span class="sd">        Error Recovery:</span>
<span class="sd">            If control computation fails:</span>
<span class="sd">            1. Log error for debugging</span>
<span class="sd">            2. Return safe fallback control (zero)</span>
<span class="sd">            3. Increment error counter for monitoring</span>
<span class="sd">            4. Continue operation (don&#39;t crash PSO)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

        <span class="c1"># Performance tracking</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_call_count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Input validation</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
                <span class="n">state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">state</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;State must be 6-element array, got shape </span><span class="si">{</span><span class="n">state</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">state</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;State contains non-finite values (NaN or inf)&quot;</span><span class="p">)</span>

            <span class="c1"># Use provided parameters or defaults</span>
            <span class="n">final_state_vars</span> <span class="o">=</span> <span class="n">state_vars</span> <span class="k">if</span> <span class="n">state_vars</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state_vars</span>
            <span class="n">final_history</span> <span class="o">=</span> <span class="n">history</span> <span class="k">if</span> <span class="n">history</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_history</span>

            <span class="c1"># Call underlying controller</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">compute_control</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">final_state_vars</span><span class="p">,</span> <span class="n">final_history</span><span class="p">)</span>

            <span class="c1"># Extract control value from result</span>
            <span class="c1"># Handle different controller output formats</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">):</span>
                <span class="c1"># Standard controller output with .u attribute</span>
                <span class="n">control_value</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">u</span>
                <span class="c1"># Update state variables if available</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;state_vars&#39;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_state_vars</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">state_vars</span>

            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;control&#39;</span><span class="p">):</span>
                <span class="c1"># Alternative output format with .control attribute</span>
                <span class="n">control_value</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">control</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># Dictionary output format</span>
                <span class="k">if</span> <span class="s1">&#39;u&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                    <span class="n">control_value</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;u&#39;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="s1">&#39;control&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                    <span class="n">control_value</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;control&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Dictionary result missing control value&quot;</span><span class="p">)</span>

                <span class="c1"># Update state if provided</span>
                <span class="k">if</span> <span class="s1">&#39;state_vars&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_state_vars</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;state_vars&#39;</span><span class="p">]</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="c1"># Tuple output (e.g., early return from some controllers)</span>
                <span class="n">control_value</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># First element is control</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_state_vars</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Second element is state</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Assume result is the control value directly</span>
                <span class="n">control_value</span> <span class="o">=</span> <span class="n">result</span>

            <span class="c1"># Convert to scalar if needed</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">control_value</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">control_value</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">control_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">control_value</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">control_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">control_value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">control_value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="n">control_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">control_value</span><span class="p">)</span>

            <span class="c1"># Validate output</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">control_value</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Controller returned non-finite control value&quot;</span><span class="p">)</span>

            <span class="c1"># Apply saturation (defensive programming)</span>
            <span class="n">max_force</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">controller</span><span class="p">,</span> <span class="s1">&#39;max_force&#39;</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">)</span>
            <span class="n">control_saturated</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">control_value</span><span class="p">,</span> <span class="o">-</span><span class="n">max_force</span><span class="p">,</span> <span class="n">max_force</span><span class="p">)</span>

            <span class="c1"># For simplified interface (PSO usage), return numpy array</span>
            <span class="k">if</span> <span class="n">state_vars</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">history</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">control_saturated</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># For full interface, return in format expected by simulation</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">control_saturated</span>

            <span class="c1"># Performance tracking</span>
            <span class="n">compute_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_total_compute_time</span> <span class="o">+=</span> <span class="n">compute_time</span>

            <span class="k">return</span> <span class="n">output</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Error handling for robust PSO operation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_last_error</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

            <span class="c1"># Log error for debugging (in production, use proper logging)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: Control computation failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Return safe fallback control</span>
            <span class="k">if</span> <span class="n">state_vars</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">history</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">])</span>  <span class="c1"># PSO interface</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>  <span class="c1"># Full interface</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">gains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return controller gains.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of controller gain parameters</span>

<span class="sd">        Usage:</span>
<span class="sd">            ```python</span>
<span class="sd">            controller = create_smc_for_pso(SMCType.CLASSICAL, gains)</span>
<span class="sd">            print(f&quot;Controller gains: {controller.gains}&quot;)</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">gains</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">performance_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return performance statistics for monitoring.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary with performance metrics:</span>
<span class="sd">                - call_count: Number of control computations</span>
<span class="sd">                - total_time: Total computation time [s]</span>
<span class="sd">                - average_time: Average computation time [ms]</span>
<span class="sd">                - last_error: Last error message (if any)</span>

<span class="sd">        Usage:</span>
<span class="sd">            ```python</span>
<span class="sd">            # After PSO optimization</span>
<span class="sd">            stats = controller.performance_stats</span>
<span class="sd">            print(f&quot;Average computation time: {stats[&#39;average_time&#39;]:.3f}ms&quot;)</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">avg_time_ms</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_total_compute_time</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_count</span> <span class="o">*</span> <span class="mi">1000</span>
                      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_count</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;call_count&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_count</span><span class="p">,</span>
            <span class="s1">&#39;total_time&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_total_compute_time</span><span class="p">,</span>
            <span class="s1">&#39;average_time&#39;</span><span class="p">:</span> <span class="n">avg_time_ms</span><span class="p">,</span>
            <span class="s1">&#39;last_error&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_error</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset_performance_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset performance tracking statistics.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_call_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_total_compute_time</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_error</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate_state_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate state input for control computation.</span>

<span class="sd">        Args:</span>
<span class="sd">            state: State vector to validate</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple of (is_valid, error_message)</span>

<span class="sd">        Usage:</span>
<span class="sd">            ```python</span>
<span class="sd">            is_valid, error = controller.validate_state_input(test_state)</span>
<span class="sd">            if not is_valid:</span>
<span class="sd">                print(f&quot;Invalid state: {error}&quot;)</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;State must be numpy array&quot;</span>

            <span class="k">if</span> <span class="n">state</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,):</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;State must be 6-element array, got </span><span class="si">{</span><span class="n">state</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">state</span><span class="p">)):</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;State contains non-finite values&quot;</span>

            <span class="c1"># Check reasonable ranges (optional)</span>
            <span class="n">angles</span> <span class="o">=</span> <span class="n">state</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># θ₁, θ₂</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">angles</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Angles exceed reasonable range (±2π)&quot;</span>

            <span class="n">velocities</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>  <span class="c1"># θ̇₁, θ̇₂, ẋ</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">velocities</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Velocities exceed reasonable range (±100)&quot;</span>

            <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Validation error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation for debugging.&quot;&quot;&quot;</span>
        <span class="n">controller_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">controller</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;PSOControllerWrapper(</span><span class="si">{</span><span class="n">controller_type</span><span class="si">}</span><span class="s2">, gains=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">gains</span><span class="si">}</span><span class="s2">)&quot;</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="mathematical-constraints-api">
<h2>Mathematical Constraints API<a class="headerlink" href="#mathematical-constraints-api" title="Link to this heading">¶</a></h2>
<section id="smc-gain-specs-registry">
<h3>SMC_GAIN_SPECS Registry<a class="headerlink" href="#smc-gain-specs-registry" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="c1"># Global registry of SMC gain specifications</span>
<span class="n">SMC_GAIN_SPECS</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">SMCType</span><span class="p">,</span> <span class="n">SMCGainSpec</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>

    <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span> <span class="n">SMCGainSpec</span><span class="p">(</span>
        <span class="n">controller_type</span><span class="o">=</span><span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">,</span>
        <span class="n">n_gains</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
        <span class="n">gain_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span> <span class="s1">&#39;k2&#39;</span><span class="p">,</span> <span class="s1">&#39;λ1&#39;</span><span class="p">,</span> <span class="s1">&#39;λ2&#39;</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="s1">&#39;kd&#39;</span><span class="p">],</span>
        <span class="n">gain_descriptions</span><span class="o">=</span><span class="p">[</span>
            <span class="s1">&#39;Position gain for pendulum 1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Position gain for pendulum 2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Surface gain for pendulum 1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Surface gain for pendulum 2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Switching gain for robustness&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Damping gain for chattering reduction&#39;</span>
        <span class="p">],</span>
        <span class="n">mathematical_constraints</span><span class="o">=</span><span class="p">[</span>
            <span class="s1">&#39;k1 &gt; 0 (controllability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;k2 &gt; 0 (controllability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;λ1 &gt; 0 (stability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;λ2 &gt; 0 (stability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;K &gt; 0 (reachability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;kd ≥ 0 (non-negative damping)&#39;</span>
        <span class="p">],</span>
        <span class="n">pso_bounds</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># k1</span>
            <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># k2</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># λ1</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># λ2</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">),</span>  <span class="c1"># K</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">)</span>    <span class="c1"># kd</span>
        <span class="p">],</span>
        <span class="n">default_gains</span><span class="o">=</span><span class="p">[</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">]</span>
    <span class="p">),</span>

    <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span> <span class="n">SMCGainSpec</span><span class="p">(</span>
        <span class="n">controller_type</span><span class="o">=</span><span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">,</span>
        <span class="n">n_gains</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
        <span class="n">gain_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;K1&#39;</span><span class="p">,</span> <span class="s1">&#39;K2&#39;</span><span class="p">,</span> <span class="s1">&#39;λ1&#39;</span><span class="p">,</span> <span class="s1">&#39;λ2&#39;</span><span class="p">,</span> <span class="s1">&#39;α1&#39;</span><span class="p">,</span> <span class="s1">&#39;α2&#39;</span><span class="p">],</span>
        <span class="n">gain_descriptions</span><span class="o">=</span><span class="p">[</span>
            <span class="s1">&#39;Primary twisting gain&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Secondary twisting gain&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Surface gain for pendulum 1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Surface gain for pendulum 2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Higher-order surface parameter 1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Higher-order surface parameter 2&#39;</span>
        <span class="p">],</span>
        <span class="n">mathematical_constraints</span><span class="o">=</span><span class="p">[</span>
            <span class="s1">&#39;K1 &gt; K2 (finite-time convergence)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;K2 &gt; 0 (convergence requirement)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;λ1 &gt; 0 (stability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;λ2 &gt; 0 (stability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;α1 &gt; 0 (higher-order stability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;α2 &gt; 0 (higher-order stability)&#39;</span>
        <span class="p">],</span>
        <span class="n">pso_bounds</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>  <span class="c1"># K1 (must be &gt; K2)</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">99.0</span><span class="p">),</span>   <span class="c1"># K2 (must be &lt; K1)</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># λ1</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># λ2</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># α1</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">)</span>    <span class="c1"># α2</span>
        <span class="p">],</span>
        <span class="n">default_gains</span><span class="o">=</span><span class="p">[</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">]</span>
    <span class="p">),</span>

    <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span> <span class="n">SMCGainSpec</span><span class="p">(</span>
        <span class="n">controller_type</span><span class="o">=</span><span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">,</span>
        <span class="n">n_gains</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">gain_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span> <span class="s1">&#39;k2&#39;</span><span class="p">,</span> <span class="s1">&#39;λ1&#39;</span><span class="p">,</span> <span class="s1">&#39;λ2&#39;</span><span class="p">,</span> <span class="s1">&#39;γ&#39;</span><span class="p">],</span>
        <span class="n">gain_descriptions</span><span class="o">=</span><span class="p">[</span>
            <span class="s1">&#39;Position gain for pendulum 1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Position gain for pendulum 2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Surface gain for pendulum 1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Surface gain for pendulum 2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Adaptation rate&#39;</span>
        <span class="p">],</span>
        <span class="n">mathematical_constraints</span><span class="o">=</span><span class="p">[</span>
            <span class="s1">&#39;k1 &gt; 0 (controllability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;k2 &gt; 0 (controllability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;λ1 &gt; 0 (stability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;λ2 &gt; 0 (stability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;0.1 ≤ γ ≤ 20.0 (bounded adaptation)&#39;</span>
        <span class="p">],</span>
        <span class="n">pso_bounds</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># k1</span>
            <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># k2</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># λ1</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># λ2</span>
            <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">)</span>    <span class="c1"># γ</span>
        <span class="p">],</span>
        <span class="n">default_gains</span><span class="o">=</span><span class="p">[</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
    <span class="p">),</span>

    <span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">:</span> <span class="n">SMCGainSpec</span><span class="p">(</span>
        <span class="n">controller_type</span><span class="o">=</span><span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">,</span>
        <span class="n">n_gains</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
        <span class="n">gain_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span> <span class="s1">&#39;k2&#39;</span><span class="p">,</span> <span class="s1">&#39;λ1&#39;</span><span class="p">,</span> <span class="s1">&#39;λ2&#39;</span><span class="p">],</span>
        <span class="n">gain_descriptions</span><span class="o">=</span><span class="p">[</span>
            <span class="s1">&#39;Surface gain for pendulum 1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Surface gain for pendulum 2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Higher-order surface gain 1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Higher-order surface gain 2&#39;</span>
        <span class="p">],</span>
        <span class="n">mathematical_constraints</span><span class="o">=</span><span class="p">[</span>
            <span class="s1">&#39;k1 &gt; 0 (stability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;k2 &gt; 0 (stability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;λ1 &gt; 0 (stability)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;λ2 &gt; 0 (stability)&#39;</span>
        <span class="p">],</span>
        <span class="n">pso_bounds</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># k1</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># k2</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>   <span class="c1"># λ1</span>
            <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">)</span>    <span class="c1"># λ2</span>
        <span class="p">],</span>
        <span class="n">default_gains</span><span class="o">=</span><span class="p">[</span><span class="mf">15.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">18.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">]</span>
    <span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="constraint-validation-functions">
<h3>Constraint Validation Functions<a class="headerlink" href="#constraint-validation-functions" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_mathematical_constraints</span><span class="p">(</span><span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span>
                                    <span class="n">gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
                                    <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-8</span>
                                    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Validate mathematical constraints for SMC gains.</span>

<span class="sd">    Args:</span>
<span class="sd">        smc_type: Controller type</span>
<span class="sd">        gains: Gain values to validate</span>
<span class="sd">        tolerance: Numerical tolerance for constraint checking</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple of (is_valid, list_of_constraint_violations)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">violations</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span>
        <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">K</span><span class="p">,</span> <span class="n">kd</span> <span class="o">=</span> <span class="n">gains</span>

        <span class="k">if</span> <span class="n">k1</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;k1 = </span><span class="si">{</span><span class="n">k1</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> must be &gt; </span><span class="si">{</span><span class="n">tolerance</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">k2</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;k2 = </span><span class="si">{</span><span class="n">k2</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> must be &gt; </span><span class="si">{</span><span class="n">tolerance</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lam1</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;λ1 = </span><span class="si">{</span><span class="n">lam1</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> must be &gt; </span><span class="si">{</span><span class="n">tolerance</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lam2</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;λ2 = </span><span class="si">{</span><span class="n">lam2</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> must be &gt; </span><span class="si">{</span><span class="n">tolerance</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">K</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;K = </span><span class="si">{</span><span class="n">K</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> must be &gt; </span><span class="si">{</span><span class="n">tolerance</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kd</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">tolerance</span><span class="p">:</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;kd = </span><span class="si">{</span><span class="n">kd</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> must be ≥ 0&quot;</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span>
        <span class="n">K1</span><span class="p">,</span> <span class="n">K2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">,</span> <span class="n">alpha2</span> <span class="o">=</span> <span class="n">gains</span>

        <span class="k">if</span> <span class="n">K1</span> <span class="o">&lt;=</span> <span class="n">K2</span> <span class="o">+</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;K1 = </span><span class="si">{</span><span class="n">K1</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> must be &gt; K2 = </span><span class="si">{</span><span class="n">K2</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">K2</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;K2 = </span><span class="si">{</span><span class="n">K2</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> must be &gt; </span><span class="si">{</span><span class="n">tolerance</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="n">tolerance</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">[</span><span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">,</span> <span class="n">alpha2</span><span class="p">]):</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;All surface parameters must be positive&quot;</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span>
        <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">gamma</span> <span class="o">=</span> <span class="n">gains</span>

        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="n">tolerance</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">[</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">]):</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;All surface gains must be positive&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mf">0.1</span> <span class="o">&lt;=</span> <span class="n">gamma</span> <span class="o">&lt;=</span> <span class="mf">20.0</span><span class="p">):</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;γ = </span><span class="si">{</span><span class="n">gamma</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2"> must be in [0.1, 20.0]&quot;</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span> <span class="o">&lt;=</span> <span class="n">tolerance</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gains</span><span class="p">):</span>
            <span class="n">violations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;All hybrid gains must be positive&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">violations</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">violations</span>

<span class="k">def</span><span class="w"> </span><span class="nf">estimate_stability_properties</span><span class="p">(</span><span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span>
                                <span class="n">gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
                                <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Estimate stability properties from gains.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary with estimated properties:</span>
<span class="sd">            - convergence_rate: Estimated convergence rate</span>
<span class="sd">            - stability_margin: Stability margin estimate</span>
<span class="sd">            - bandwidth: Estimated closed-loop bandwidth</span>
<span class="sd">            - settling_time: Estimated settling time</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">:</span>
        <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">K</span><span class="p">,</span> <span class="n">kd</span> <span class="o">=</span> <span class="n">gains</span>

        <span class="n">min_surface_gain</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">)</span>
        <span class="n">convergence_rate</span> <span class="o">=</span> <span class="n">min_surface_gain</span>
        <span class="n">bandwidth</span> <span class="o">=</span> <span class="n">min_surface_gain</span>
        <span class="n">settling_time</span> <span class="o">=</span> <span class="mf">4.0</span> <span class="o">/</span> <span class="n">min_surface_gain</span> <span class="k">if</span> <span class="n">min_surface_gain</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
        <span class="n">stability_margin</span> <span class="o">=</span> <span class="n">K</span> <span class="o">/</span> <span class="p">(</span><span class="n">K</span> <span class="o">+</span> <span class="mf">10.0</span><span class="p">)</span>  <span class="c1"># Rough estimate</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">SUPER_TWISTING</span><span class="p">:</span>
        <span class="n">K1</span><span class="p">,</span> <span class="n">K2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">,</span> <span class="n">alpha2</span> <span class="o">=</span> <span class="n">gains</span>

        <span class="n">convergence_rate</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">K1</span><span class="p">,</span> <span class="n">K2</span><span class="p">)</span>
        <span class="n">bandwidth</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">)</span>
        <span class="n">settling_time</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">/</span> <span class="n">convergence_rate</span> <span class="k">if</span> <span class="n">convergence_rate</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
        <span class="n">stability_margin</span> <span class="o">=</span> <span class="p">(</span><span class="n">K1</span> <span class="o">-</span> <span class="n">K2</span><span class="p">)</span> <span class="o">/</span> <span class="n">K1</span> <span class="k">if</span> <span class="n">K1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">ADAPTIVE</span><span class="p">:</span>
        <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">,</span> <span class="n">gamma</span> <span class="o">=</span> <span class="n">gains</span>

        <span class="n">surface_bandwidth</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span><span class="p">)</span>
        <span class="n">adaptation_bandwidth</span> <span class="o">=</span> <span class="n">gamma</span>
        <span class="n">convergence_rate</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">surface_bandwidth</span><span class="p">,</span> <span class="n">adaptation_bandwidth</span><span class="p">)</span>
        <span class="n">bandwidth</span> <span class="o">=</span> <span class="n">surface_bandwidth</span>
        <span class="n">settling_time</span> <span class="o">=</span> <span class="mf">4.0</span> <span class="o">/</span> <span class="n">convergence_rate</span> <span class="k">if</span> <span class="n">convergence_rate</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
        <span class="n">stability_margin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="p">(</span><span class="mf">20.0</span> <span class="o">-</span> <span class="n">gamma</span><span class="p">)</span> <span class="o">/</span> <span class="mf">20.0</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">smc_type</span> <span class="o">==</span> <span class="n">SMCType</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">:</span>
        <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">lam1</span><span class="p">,</span> <span class="n">lam2</span> <span class="o">=</span> <span class="n">gains</span>

        <span class="n">convergence_rate</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span>
        <span class="n">bandwidth</span> <span class="o">=</span> <span class="n">convergence_rate</span>
        <span class="n">settling_time</span> <span class="o">=</span> <span class="mf">4.0</span> <span class="o">/</span> <span class="n">convergence_rate</span> <span class="k">if</span> <span class="n">convergence_rate</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
        <span class="n">stability_margin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="o">/</span> <span class="nb">max</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;convergence_rate&#39;</span><span class="p">:</span> <span class="n">convergence_rate</span><span class="p">,</span>
        <span class="s1">&#39;stability_margin&#39;</span><span class="p">:</span> <span class="n">stability_margin</span><span class="p">,</span>
        <span class="s1">&#39;bandwidth&#39;</span><span class="p">:</span> <span class="n">bandwidth</span><span class="p">,</span>
        <span class="s1">&#39;settling_time&#39;</span><span class="p">:</span> <span class="n">settling_time</span>
    <span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="configuration-schema-api">
<h2>Configuration Schema API<a class="headerlink" href="#configuration-schema-api" title="Link to this heading">¶</a></h2>
<section id="factory-configuration-classes">
<h3>Factory Configuration Classes<a class="headerlink" href="#factory-configuration-classes" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">PSOFactoryConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Complete configuration for PSO-Factory integration.</span>

<span class="sd">    Provides type-safe configuration with automatic validation</span>
<span class="sd">    and mathematical constraint checking.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Controller configuration</span>
    <span class="n">controller_type</span><span class="p">:</span> <span class="n">SMCType</span>
    <span class="n">max_force</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">100.0</span>
    <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span>

    <span class="c1"># PSO algorithm parameters</span>
    <span class="n">pso_params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;n_particles&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="s1">&#39;iters&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="s1">&#39;c1&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
        <span class="s1">&#39;c2&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
        <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="mf">0.9</span>
    <span class="p">})</span>

    <span class="c1"># Performance monitoring</span>
    <span class="n">enable_monitoring</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">enable_caching</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">cache_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span>

    <span class="c1"># Validation settings</span>
    <span class="n">strict_validation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">constraint_tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-8</span>

    <span class="c1"># PSO bounds (auto-derived if None)</span>
    <span class="n">custom_bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate configuration after initialization.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_force</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;max_force must be positive&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dt</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;dt must be positive&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">controller_type</span><span class="p">,</span> <span class="n">SMCType</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;controller_type must be SMCType&quot;</span><span class="p">)</span>

        <span class="c1"># Validate PSO parameters</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pso_params</span><span class="p">[</span><span class="s1">&#39;n_particles&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;n_particles should be ≥ 10&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pso_params</span><span class="p">[</span><span class="s1">&#39;iters&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;iters should be ≥ 10&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">gain_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get PSO bounds (custom or auto-derived).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_bounds</span>
        <span class="k">return</span> <span class="n">get_gain_bounds_for_pso</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">controller_type</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">n_gains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get number of gain parameters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller_type</span><span class="o">.</span><span class="n">gain_count</span>

<span class="k">def</span><span class="w"> </span><span class="nf">load_factory_config</span><span class="p">(</span><span class="n">config_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">PSOFactoryConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load and validate factory configuration from dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        config_dict: Configuration dictionary</span>

<span class="sd">    Returns:</span>
<span class="sd">        Validated PSOFactoryConfig object</span>

<span class="sd">    Raises:</span>
<span class="sd">        ConfigurationError: If validation fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Convert string controller type to enum</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;controller_type&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">config_dict</span><span class="p">[</span><span class="s1">&#39;controller_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SMCType</span><span class="p">(</span><span class="n">config_dict</span><span class="p">[</span><span class="s1">&#39;controller_type&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">PSOFactoryConfig</span><span class="p">(</span><span class="o">**</span><span class="n">config_dict</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ConfigurationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid factory configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="advanced-pso-workflows">
<h2>Advanced PSO Workflows<a class="headerlink" href="#advanced-pso-workflows" title="Link to this heading">¶</a></h2>
<section id="multi-objective-pso-integration">
<h3>Multi-Objective PSO Integration<a class="headerlink" href="#multi-objective-pso-integration" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">multi_objective_pso_optimization</span><span class="p">(</span>
    <span class="n">controller_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">SMCType</span><span class="p">],</span>
    <span class="n">simulation_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">objectives</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">pso_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Multi-objective PSO optimization across multiple controller types.</span>

<span class="sd">    Optimizes multiple SMC controllers simultaneously using weighted</span>
<span class="sd">    multi-objective fitness functions with Pareto front analysis.</span>

<span class="sd">    Args:</span>
<span class="sd">        controller_types: List of SMC types to optimize</span>
<span class="sd">        simulation_config: Simulation parameters</span>
<span class="sd">        objectives: Objective weights {&#39;ise&#39;: 0.4, &#39;overshoot&#39;: 0.3, &#39;energy&#39;: 0.3}</span>
<span class="sd">        pso_config: PSO algorithm configuration</span>

<span class="sd">    Returns:</span>
<span class="sd">        Comprehensive optimization results with Pareto analysis</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">all_solutions</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">smc_type</span> <span class="ow">in</span> <span class="n">controller_types</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Optimizing </span><span class="si">{</span><span class="n">smc_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>

        <span class="c1"># Get PSO bounds for this controller type</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_gain_bounds_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">)</span>

        <span class="c1"># Create multi-objective fitness function</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">multi_objective_fitness</span><span class="p">(</span><span class="n">particles</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
            <span class="n">fitness_scores</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">gains</span> <span class="ow">in</span> <span class="n">particles</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Create controller with validation</span>
                    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_smc_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

                    <span class="c1"># Run simulation</span>
                    <span class="n">sim_result</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">simulation_config</span><span class="p">)</span>

                    <span class="c1"># Compute individual objectives</span>
                    <span class="n">ise</span> <span class="o">=</span> <span class="n">compute_ise</span><span class="p">(</span><span class="n">sim_result</span><span class="p">)</span>
                    <span class="n">overshoot</span> <span class="o">=</span> <span class="n">compute_overshoot</span><span class="p">(</span><span class="n">sim_result</span><span class="p">)</span>
                    <span class="n">energy</span> <span class="o">=</span> <span class="n">compute_control_energy</span><span class="p">(</span><span class="n">sim_result</span><span class="p">)</span>

                    <span class="c1"># Weighted combination</span>
                    <span class="n">fitness</span> <span class="o">=</span> <span class="p">(</span><span class="n">objectives</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ise&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">ise</span> <span class="o">+</span>
                             <span class="n">objectives</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;overshoot&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">overshoot</span> <span class="o">+</span>
                             <span class="n">objectives</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;energy&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">energy</span><span class="p">)</span>

                    <span class="n">fitness_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>

                    <span class="c1"># Store solution for Pareto analysis</span>
                    <span class="n">all_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                        <span class="s1">&#39;controller_type&#39;</span><span class="p">:</span> <span class="n">smc_type</span><span class="p">,</span>
                        <span class="s1">&#39;gains&#39;</span><span class="p">:</span> <span class="n">gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                        <span class="s1">&#39;fitness&#39;</span><span class="p">:</span> <span class="n">fitness</span><span class="p">,</span>
                        <span class="s1">&#39;objectives&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;ise&#39;</span><span class="p">:</span> <span class="n">ise</span><span class="p">,</span> <span class="s1">&#39;overshoot&#39;</span><span class="p">:</span> <span class="n">overshoot</span><span class="p">,</span> <span class="s1">&#39;energy&#39;</span><span class="p">:</span> <span class="n">energy</span><span class="p">}</span>
                    <span class="p">})</span>

                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="n">fitness_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1000.0</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">fitness_scores</span><span class="p">)</span>

        <span class="c1"># Run PSO optimization</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">pyswarms.single</span><span class="w"> </span><span class="kn">import</span> <span class="n">GlobalBestPSO</span>
        <span class="n">bounds_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

        <span class="n">optimizer</span> <span class="o">=</span> <span class="n">GlobalBestPSO</span><span class="p">(</span>
            <span class="n">n_particles</span><span class="o">=</span><span class="n">pso_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;n_particles&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
            <span class="n">dimensions</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">),</span>
            <span class="n">options</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;c1&#39;</span><span class="p">:</span> <span class="n">pso_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span>
                <span class="s1">&#39;c2&#39;</span><span class="p">:</span> <span class="n">pso_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span>
                <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="n">pso_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="n">bounds_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">bounds_array</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="p">)</span>

        <span class="n">best_cost</span><span class="p">,</span> <span class="n">best_gains</span> <span class="o">=</span> <span class="n">optimizer</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span>
            <span class="n">multi_objective_fitness</span><span class="p">,</span>
            <span class="n">iters</span><span class="o">=</span><span class="n">pso_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;iters&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">results</span><span class="p">[</span><span class="n">smc_type</span><span class="o">.</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;best_gains&#39;</span><span class="p">:</span> <span class="n">best_gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
            <span class="s1">&#39;best_fitness&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">best_cost</span><span class="p">),</span>
            <span class="s1">&#39;optimization_history&#39;</span><span class="p">:</span> <span class="n">optimizer</span><span class="o">.</span><span class="n">cost_history</span>
        <span class="p">}</span>

    <span class="c1"># Pareto front analysis</span>
    <span class="n">pareto_front</span> <span class="o">=</span> <span class="n">compute_pareto_front</span><span class="p">(</span><span class="n">all_solutions</span><span class="p">,</span> <span class="n">objectives</span><span class="p">)</span>
    <span class="n">controller_ranking</span> <span class="o">=</span> <span class="n">rank_controllers_by_objectives</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">objectives</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;individual_results&#39;</span><span class="p">:</span> <span class="n">results</span><span class="p">,</span>
        <span class="s1">&#39;pareto_front&#39;</span><span class="p">:</span> <span class="n">pareto_front</span><span class="p">,</span>
        <span class="s1">&#39;controller_ranking&#39;</span><span class="p">:</span> <span class="n">controller_ranking</span><span class="p">,</span>
        <span class="s1">&#39;best_overall&#39;</span><span class="p">:</span> <span class="n">select_best_overall_solution</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">objectives</span><span class="p">)</span>
    <span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">compute_pareto_front</span><span class="p">(</span><span class="n">solutions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
                        <span class="n">objectives</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
                        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute Pareto-optimal solutions from multi-objective optimization.</span>

<span class="sd">    Args:</span>
<span class="sd">        solutions: List of solution dictionaries</span>
<span class="sd">        objectives: Objective weights</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of Pareto-optimal solutions</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pareto_solutions</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">solution_i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">solutions</span><span class="p">):</span>
        <span class="n">is_dominated</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">solution_j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">solutions</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Check if solution_j dominates solution_i</span>
            <span class="n">obj_i</span> <span class="o">=</span> <span class="n">solution_i</span><span class="p">[</span><span class="s1">&#39;objectives&#39;</span><span class="p">]</span>
            <span class="n">obj_j</span> <span class="o">=</span> <span class="n">solution_j</span><span class="p">[</span><span class="s1">&#39;objectives&#39;</span><span class="p">]</span>

            <span class="n">dominates</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">obj_name</span> <span class="ow">in</span> <span class="n">objectives</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">obj_j</span><span class="p">[</span><span class="n">obj_name</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">obj_i</span><span class="p">[</span><span class="n">obj_name</span><span class="p">]:</span>  <span class="c1"># j is not better in this objective</span>
                    <span class="n">dominates</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>

            <span class="k">if</span> <span class="n">dominates</span><span class="p">:</span>
                <span class="n">is_dominated</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_dominated</span><span class="p">:</span>
            <span class="n">pareto_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution_i</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pareto_solutions</span>
</pre></div>
</div>
</section>
<section id="adaptive-pso-with-dynamic-bounds">
<h3>Adaptive PSO with Dynamic Bounds<a class="headerlink" href="#adaptive-pso-with-dynamic-bounds" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">AdaptivePSOFactory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adaptive PSO optimization with dynamic parameter adjustment.</span>

<span class="sd">    Features:</span>
<span class="sd">    - Dynamic bounds tightening around promising regions</span>
<span class="sd">    - Adaptive PSO parameter tuning based on convergence</span>
<span class="sd">    - Early stopping with convergence detection</span>
<span class="sd">    - Multi-stage optimization with exploration-exploitation balance</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">smc_type</span> <span class="o">=</span> <span class="n">smc_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optimization_history</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds_history</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Initialize with full bounds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_bounds</span> <span class="o">=</span> <span class="n">get_gain_bounds_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convergence_detector</span> <span class="o">=</span> <span class="n">PSOConvergenceDetector</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">optimize_with_adaptation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                <span class="n">simulation_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
                                <span class="n">stages</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>
                                <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Run adaptive PSO optimization with multiple stages.</span>

<span class="sd">        Args:</span>
<span class="sd">            simulation_config: Simulation parameters</span>
<span class="sd">            stages: List of optimization stages with different parameters</span>

<span class="sd">        Returns:</span>
<span class="sd">            Complete optimization results with adaptation history</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">all_results</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">stage_idx</span><span class="p">,</span> <span class="n">stage_config</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">stages</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PSO Stage </span><span class="si">{</span><span class="n">stage_idx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">stage_config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Adapt PSO parameters for this stage</span>
            <span class="n">pso_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adapt_pso_parameters</span><span class="p">(</span><span class="n">stage_config</span><span class="p">,</span> <span class="n">stage_idx</span><span class="p">)</span>

            <span class="c1"># Adapt bounds based on previous results</span>
            <span class="k">if</span> <span class="n">stage_idx</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adapt_bounds</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">[</span><span class="s1">&#39;gains&#39;</span><span class="p">],</span>
                    <span class="n">stage_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;bound_tightening&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
                <span class="p">)</span>

            <span class="c1"># Create fitness function</span>
            <span class="n">fitness_function</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_adaptive_fitness_function</span><span class="p">(</span>
                <span class="n">simulation_config</span><span class="p">,</span> <span class="n">stage_config</span>
            <span class="p">)</span>

            <span class="c1"># Run PSO optimization stage</span>
            <span class="n">stage_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pso_stage</span><span class="p">(</span>
                <span class="n">fitness_function</span><span class="p">,</span> <span class="n">pso_params</span><span class="p">,</span> <span class="n">stage_config</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">]</span>
            <span class="p">)</span>

            <span class="n">all_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stage_result</span><span class="p">)</span>

            <span class="c1"># Update best solution</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span>
                <span class="n">stage_result</span><span class="p">[</span><span class="s1">&#39;best_fitness&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">[</span><span class="s1">&#39;fitness&#39;</span><span class="p">]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;gains&#39;</span><span class="p">:</span> <span class="n">stage_result</span><span class="p">[</span><span class="s1">&#39;best_gains&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;fitness&#39;</span><span class="p">:</span> <span class="n">stage_result</span><span class="p">[</span><span class="s1">&#39;best_fitness&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;stage&#39;</span><span class="p">:</span> <span class="n">stage_idx</span>
                <span class="p">}</span>

            <span class="c1"># Check for early convergence</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">convergence_detector</span><span class="o">.</span><span class="n">check_convergence</span><span class="p">(</span><span class="n">stage_result</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Early convergence detected at stage </span><span class="si">{</span><span class="n">stage_idx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">break</span>

        <span class="c1"># Combine results</span>
        <span class="n">final_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combine_stage_results</span><span class="p">(</span><span class="n">all_results</span><span class="p">)</span>
        <span class="n">final_result</span><span class="p">[</span><span class="s1">&#39;adaptation_history&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;bounds_history&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds_history</span><span class="p">,</span>
            <span class="s1">&#39;best_solution_history&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">optimization_history</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">final_result</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_adapt_pso_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">stage_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
                             <span class="n">stage_idx</span><span class="p">:</span> <span class="nb">int</span>
                             <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adapt PSO parameters based on stage and convergence history.&quot;&quot;&quot;</span>

        <span class="n">base_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pso_params&#39;</span><span class="p">,</span> <span class="p">{})</span>

        <span class="c1"># Exploration vs exploitation balance</span>
        <span class="n">exploration_weight</span> <span class="o">=</span> <span class="n">stage_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;exploration_weight&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>

        <span class="c1"># Adaptive inertia weight</span>
        <span class="n">w_max</span> <span class="o">=</span> <span class="mf">0.9</span>
        <span class="n">w_min</span> <span class="o">=</span> <span class="mf">0.4</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">w_max</span> <span class="o">-</span> <span class="p">(</span><span class="n">w_max</span> <span class="o">-</span> <span class="n">w_min</span><span class="p">)</span> <span class="o">*</span> <span class="n">exploration_weight</span>

        <span class="c1"># Adaptive cognitive/social parameters</span>
        <span class="n">c1</span> <span class="o">=</span> <span class="mf">2.5</span> <span class="o">-</span> <span class="n">exploration_weight</span>  <span class="c1"># High cognitive for exploration</span>
        <span class="n">c2</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">exploration_weight</span>  <span class="c1"># High social for exploitation</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;n_particles&#39;</span><span class="p">:</span> <span class="n">base_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;n_particles&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
            <span class="s1">&#39;c1&#39;</span><span class="p">:</span> <span class="n">c1</span><span class="p">,</span>
            <span class="s1">&#39;c2&#39;</span><span class="p">:</span> <span class="n">c2</span><span class="p">,</span>
            <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="n">w</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_adapt_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                     <span class="n">best_gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
                     <span class="n">tightening_factor</span><span class="p">:</span> <span class="nb">float</span>
                     <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adapt optimization bounds around best solution.&quot;&quot;&quot;</span>

        <span class="n">adapted_bounds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">original_bounds</span> <span class="o">=</span> <span class="n">get_gain_bounds_for_pso</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">smc_type</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">gain</span><span class="p">,</span> <span class="p">(</span><span class="n">orig_lower</span><span class="p">,</span> <span class="n">orig_upper</span><span class="p">))</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">best_gains</span><span class="p">,</span> <span class="n">original_bounds</span><span class="p">)):</span>
            <span class="c1"># Calculate range around best gain</span>
            <span class="n">range_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">orig_upper</span> <span class="o">-</span> <span class="n">orig_lower</span><span class="p">)</span> <span class="o">*</span> <span class="n">tightening_factor</span>

            <span class="c1"># New bounds centered around best gain</span>
            <span class="n">new_lower</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">orig_lower</span><span class="p">,</span> <span class="n">gain</span> <span class="o">-</span> <span class="n">range_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">new_upper</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">orig_upper</span><span class="p">,</span> <span class="n">gain</span> <span class="o">+</span> <span class="n">range_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

            <span class="n">adapted_bounds</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">new_lower</span><span class="p">,</span> <span class="n">new_upper</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bounds_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">adapted_bounds</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">adapted_bounds</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_adaptive_fitness_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                        <span class="n">simulation_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
                                        <span class="n">stage_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
                                        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create fitness function with adaptive features.&quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">adaptive_fitness</span><span class="p">(</span><span class="n">particles</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
            <span class="n">fitness_scores</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">gains</span> <span class="ow">in</span> <span class="n">particles</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Create controller with validation</span>
                    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_smc_for_pso</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

                    <span class="c1"># Run simulation</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">simulation_config</span><span class="p">)</span>

                    <span class="c1"># Compute base fitness</span>
                    <span class="n">base_fitness</span> <span class="o">=</span> <span class="n">compute_control_performance_metrics</span><span class="p">(</span>
                        <span class="n">result</span><span class="p">,</span> <span class="n">stage_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;objectives&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ise&#39;</span><span class="p">])</span>
                    <span class="p">)</span>

                    <span class="c1"># Add adaptive penalties/bonuses</span>
                    <span class="n">adapted_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_adaptive_adjustments</span><span class="p">(</span>
                        <span class="n">base_fitness</span><span class="p">,</span> <span class="n">gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">stage_config</span>
                    <span class="p">)</span>

                    <span class="n">fitness_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">adapted_fitness</span><span class="p">)</span>

                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="n">fitness_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1000.0</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">fitness_scores</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">adaptive_fitness</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_apply_adaptive_adjustments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                  <span class="n">base_fitness</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                                  <span class="n">gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
                                  <span class="n">stage_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
                                  <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply adaptive adjustments to fitness based on stage configuration.&quot;&quot;&quot;</span>

        <span class="n">adjusted_fitness</span> <span class="o">=</span> <span class="n">base_fitness</span>

        <span class="c1"># Diversity bonus (encourage exploration in early stages)</span>
        <span class="k">if</span> <span class="n">stage_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;diversity_bonus&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">:</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">gains</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">[</span><span class="s1">&#39;gains&#39;</span><span class="p">])</span>
            <span class="p">)</span>
            <span class="n">diversity_bonus</span> <span class="o">=</span> <span class="n">stage_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;diversity_weight&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">*</span> <span class="n">distance</span>
            <span class="n">adjusted_fitness</span> <span class="o">-=</span> <span class="n">diversity_bonus</span>

        <span class="c1"># Stability margin bonus</span>
        <span class="k">if</span> <span class="n">stage_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stability_bonus&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
            <span class="n">stability_properties</span> <span class="o">=</span> <span class="n">estimate_stability_properties</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">gains</span><span class="p">)</span>
            <span class="n">stability_bonus</span> <span class="o">=</span> <span class="n">stability_properties</span><span class="p">[</span><span class="s1">&#39;stability_margin&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.1</span>
            <span class="n">adjusted_fitness</span> <span class="o">-=</span> <span class="n">stability_bonus</span>

        <span class="k">return</span> <span class="n">adjusted_fitness</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PSOConvergenceDetector</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Advanced convergence detection for PSO optimization.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">patience</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patience</span> <span class="o">=</span> <span class="n">patience</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tolerance</span> <span class="o">=</span> <span class="n">tolerance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fitness_history</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">best_fitness</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stagnation_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_convergence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage_result</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if PSO has converged based on multiple criteria.</span>

<span class="sd">        Args:</span>
<span class="sd">            stage_result: Results from PSO optimization stage</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if convergence detected, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">current_fitness</span> <span class="o">=</span> <span class="n">stage_result</span><span class="p">[</span><span class="s1">&#39;best_fitness&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fitness_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>

        <span class="c1"># Check for improvement</span>
        <span class="k">if</span> <span class="n">current_fitness</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_fitness</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">tolerance</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">best_fitness</span> <span class="o">=</span> <span class="n">current_fitness</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stagnation_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stagnation_count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Multiple convergence criteria</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_fitness_plateau</span><span class="p">()</span> <span class="ow">or</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_statistical_convergence</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_fitness_plateau</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if fitness has plateaued.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stagnation_count</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">patience</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_statistical_convergence</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check statistical significance of convergence.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fitness_history</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Test if recent improvements are statistically significant</span>
        <span class="n">recent_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fitness_history</span><span class="p">[</span><span class="o">-</span><span class="mi">15</span><span class="p">:]</span>
        <span class="n">older_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fitness_history</span><span class="p">[</span><span class="o">-</span><span class="mi">30</span><span class="p">:</span><span class="o">-</span><span class="mi">15</span><span class="p">]</span>

        <span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">ttest_ind</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">statistic</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">ttest_ind</span><span class="p">(</span><span class="n">recent_fitness</span><span class="p">,</span> <span class="n">older_fitness</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">p_value</span> <span class="o">&gt;</span> <span class="mf">0.05</span>  <span class="c1"># No significant difference</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="performance-monitoring-api">
<h2>Performance Monitoring API<a class="headerlink" href="#performance-monitoring-api" title="Link to this heading">¶</a></h2>
<section id="real-time-performance-monitoring">
<h3>Real-Time Performance Monitoring<a class="headerlink" href="#real-time-performance-monitoring" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PSOPerformanceMonitor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Real-time performance monitoring for PSO-Factory integration.</span>

<span class="sd">    Provides comprehensive monitoring of:</span>
<span class="sd">    - PSO convergence metrics</span>
<span class="sd">    - Controller creation performance</span>
<span class="sd">    - Simulation execution times</span>
<span class="sd">    - Memory usage tracking</span>
<span class="sd">    - Error rate monitoring</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">monitoring_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">monitoring_config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;pso_metrics&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;total_evaluations&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;successful_evaluations&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;failed_evaluations&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;average_fitness&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                <span class="s1">&#39;best_fitness&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),</span>
                <span class="s1">&#39;convergence_rate&#39;</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="p">},</span>
            <span class="s1">&#39;performance_metrics&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;controller_creation_time&#39;</span><span class="p">:</span> <span class="p">[],</span>
                <span class="s1">&#39;simulation_execution_time&#39;</span><span class="p">:</span> <span class="p">[],</span>
                <span class="s1">&#39;fitness_computation_time&#39;</span><span class="p">:</span> <span class="p">[],</span>
                <span class="s1">&#39;total_optimization_time&#39;</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="p">},</span>
            <span class="s1">&#39;resource_metrics&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;peak_memory_usage&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                <span class="s1">&#39;average_memory_usage&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                <span class="s1">&#39;cpu_utilization&#39;</span><span class="p">:</span> <span class="p">[],</span>
                <span class="s1">&#39;memory_samples&#39;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">},</span>
            <span class="s1">&#39;error_metrics&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;creation_failures&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;simulation_failures&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;validation_failures&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;total_errors&#39;</span><span class="p">:</span> <span class="mi">0</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">monitoring_active</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">start_monitoring</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start performance monitoring session.&quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">monitoring_active</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reset_metrics</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">stop_monitoring</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop monitoring and return complete performance report.&quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;performance_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;total_optimization_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">monitoring_active</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_performance_report</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">log_controller_creation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">success</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">creation_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log controller creation event.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">monitoring_active</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;performance_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;controller_creation_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">creation_time</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;successful_evaluations&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;error_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;creation_failures&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;failed_evaluations&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">log_simulation_execution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">success</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">execution_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log simulation execution event.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">monitoring_active</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;performance_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;simulation_execution_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">execution_time</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;error_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;simulation_failures&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">log_fitness_evaluation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness_value</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">computation_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log fitness evaluation result.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">monitoring_active</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;performance_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;fitness_computation_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">computation_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;total_evaluations&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Update best fitness</span>
        <span class="k">if</span> <span class="n">fitness_value</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;best_fitness&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;best_fitness&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness_value</span>

        <span class="c1"># Update average fitness (running average)</span>
        <span class="n">total_evals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;total_evaluations&#39;</span><span class="p">]</span>
        <span class="n">current_avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;average_fitness&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;average_fitness&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">current_avg</span> <span class="o">*</span> <span class="p">(</span><span class="n">total_evals</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fitness_value</span><span class="p">)</span> <span class="o">/</span> <span class="n">total_evals</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">log_resource_usage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log current resource usage.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">monitoring_active</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span><span class="w"> </span><span class="nn">psutil</span>

            <span class="c1"># Memory usage</span>
            <span class="n">memory_info</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span>
            <span class="n">current_memory</span> <span class="o">=</span> <span class="n">memory_info</span><span class="o">.</span><span class="n">percent</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;resource_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;memory_samples&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_memory</span><span class="p">)</span>

            <span class="c1"># Update peak memory</span>
            <span class="k">if</span> <span class="n">current_memory</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;resource_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;peak_memory_usage&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;resource_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;peak_memory_usage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_memory</span>

            <span class="c1"># CPU utilization</span>
            <span class="n">cpu_percent</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">cpu_percent</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;resource_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;cpu_utilization&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cpu_percent</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># psutil not available</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_performance_alerts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check for performance issues and return alerts.&quot;&quot;&quot;</span>
        <span class="n">alerts</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Memory usage alerts</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;resource_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;peak_memory_usage&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">90</span><span class="p">:</span>
            <span class="n">alerts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;High memory usage: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;resource_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;peak_memory_usage&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>

        <span class="c1"># Error rate alerts</span>
        <span class="n">total_evals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;total_evaluations&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">total_evals</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">error_rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;error_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;total_errors&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">total_evals</span>
            <span class="k">if</span> <span class="n">error_rate</span> <span class="o">&gt;</span> <span class="mf">0.1</span><span class="p">:</span>
                <span class="n">alerts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;High error rate: </span><span class="si">{</span><span class="n">error_rate</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Performance alerts</span>
        <span class="n">creation_times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;performance_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;controller_creation_time&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">creation_times</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">creation_times</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.002</span><span class="p">:</span>  <span class="c1"># 2ms threshold</span>
            <span class="n">alerts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Slow controller creation: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">creation_times</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms average&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">alerts</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate_performance_report</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate comprehensive performance report.&quot;&quot;&quot;</span>

        <span class="c1"># Calculate derived metrics</span>
        <span class="n">total_evals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;total_evaluations&#39;</span><span class="p">]</span>
        <span class="n">success_rate</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;successful_evaluations&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">total_evals</span> <span class="o">*</span> <span class="mi">100</span>
                       <span class="k">if</span> <span class="n">total_evals</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">creation_times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;performance_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;controller_creation_time&#39;</span><span class="p">]</span>
        <span class="n">avg_creation_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">creation_times</span><span class="p">)</span> <span class="k">if</span> <span class="n">creation_times</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="n">simulation_times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;performance_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;simulation_execution_time&#39;</span><span class="p">]</span>
        <span class="n">avg_simulation_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">simulation_times</span><span class="p">)</span> <span class="k">if</span> <span class="n">simulation_times</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="n">fitness_times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;performance_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;fitness_computation_time&#39;</span><span class="p">]</span>
        <span class="n">avg_fitness_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">fitness_times</span><span class="p">)</span> <span class="k">if</span> <span class="n">fitness_times</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="n">memory_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;resource_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;memory_samples&#39;</span><span class="p">]</span>
        <span class="n">avg_memory</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">memory_samples</span><span class="p">)</span> <span class="k">if</span> <span class="n">memory_samples</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="n">cpu_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;resource_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;cpu_utilization&#39;</span><span class="p">]</span>
        <span class="n">avg_cpu</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">cpu_samples</span><span class="p">)</span> <span class="k">if</span> <span class="n">cpu_samples</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="n">total_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;performance_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;total_optimization_time&#39;</span><span class="p">]</span>
        <span class="n">evaluations_per_second</span> <span class="o">=</span> <span class="n">total_evals</span> <span class="o">/</span> <span class="n">total_time</span> <span class="k">if</span> <span class="n">total_time</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="c1"># Generate report</span>
        <span class="n">report</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;summary&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;total_evaluations&#39;</span><span class="p">:</span> <span class="n">total_evals</span><span class="p">,</span>
                <span class="s1">&#39;success_rate&#39;</span><span class="p">:</span> <span class="n">success_rate</span><span class="p">,</span>
                <span class="s1">&#39;best_fitness_achieved&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;pso_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;best_fitness&#39;</span><span class="p">],</span>
                <span class="s1">&#39;total_optimization_time&#39;</span><span class="p">:</span> <span class="n">total_time</span><span class="p">,</span>
                <span class="s1">&#39;evaluations_per_second&#39;</span><span class="p">:</span> <span class="n">evaluations_per_second</span>
            <span class="p">},</span>
            <span class="s1">&#39;performance&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;average_controller_creation_time_ms&#39;</span><span class="p">:</span> <span class="n">avg_creation_time</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>
                <span class="s1">&#39;average_simulation_time_ms&#39;</span><span class="p">:</span> <span class="n">avg_simulation_time</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>
                <span class="s1">&#39;average_fitness_computation_time_ms&#39;</span><span class="p">:</span> <span class="n">avg_fitness_time</span> <span class="o">*</span> <span class="mi">1000</span>
            <span class="p">},</span>
            <span class="s1">&#39;resources&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;peak_memory_usage_percent&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;resource_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;peak_memory_usage&#39;</span><span class="p">],</span>
                <span class="s1">&#39;average_memory_usage_percent&#39;</span><span class="p">:</span> <span class="n">avg_memory</span><span class="p">,</span>
                <span class="s1">&#39;average_cpu_utilization_percent&#39;</span><span class="p">:</span> <span class="n">avg_cpu</span>
            <span class="p">},</span>
            <span class="s1">&#39;errors&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;controller_creation_failures&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;error_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;creation_failures&#39;</span><span class="p">],</span>
                <span class="s1">&#39;simulation_failures&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;error_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;simulation_failures&#39;</span><span class="p">],</span>
                <span class="s1">&#39;validation_failures&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;error_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;validation_failures&#39;</span><span class="p">],</span>
                <span class="s1">&#39;total_error_count&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;error_metrics&#39;</span><span class="p">][</span><span class="s1">&#39;total_errors&#39;</span><span class="p">]</span>
            <span class="p">},</span>
            <span class="s1">&#39;alerts&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_performance_alerts</span><span class="p">(),</span>
            <span class="s1">&#39;raw_metrics&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">report</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_reset_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset all metrics for new monitoring session.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">category</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                        <span class="n">category</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                        <span class="k">if</span> <span class="s1">&#39;best_fitness&#39;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                            <span class="n">category</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">category</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Context manager for automatic monitoring</span>
<span class="nd">@contextmanager</span>
<span class="k">def</span><span class="w"> </span><span class="nf">monitor_pso_performance</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context manager for automatic PSO performance monitoring.</span>

<span class="sd">    Usage:</span>
<span class="sd">        with monitor_pso_performance() as monitor:</span>
<span class="sd">            # Run PSO optimization</span>
<span class="sd">            result = optimize_controller_with_pso(...)</span>

<span class="sd">        # Get performance report</span>
<span class="sd">        report = monitor.generate_performance_report()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">monitor</span> <span class="o">=</span> <span class="n">PSOPerformanceMonitor</span><span class="p">(</span><span class="n">config</span> <span class="ow">or</span> <span class="p">{})</span>
    <span class="n">monitor</span><span class="o">.</span><span class="n">start_monitoring</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">monitor</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">monitor</span><span class="o">.</span><span class="n">stop_monitoring</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="error-handling-reference">
<h2>Error Handling Reference<a class="headerlink" href="#error-handling-reference" title="Link to this heading">¶</a></h2>
<section id="exception-hierarchy">
<h3>Exception Hierarchy<a class="headerlink" href="#exception-hierarchy" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">PSOFactoryError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base exception for PSO factory integration errors.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ControllerCreationError</span><span class="p">(</span><span class="n">PSOFactoryError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when controller creation fails.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span> <span class="n">gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">smc_type</span> <span class="o">=</span> <span class="n">smc_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gains</span> <span class="o">=</span> <span class="n">gains</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to create </span><span class="si">{</span><span class="n">smc_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> controller: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">GainValidationError</span><span class="p">(</span><span class="n">PSOFactoryError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when gain validation fails.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span> <span class="n">gains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">violations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">smc_type</span> <span class="o">=</span> <span class="n">smc_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gains</span> <span class="o">=</span> <span class="n">gains</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">violations</span> <span class="o">=</span> <span class="n">violations</span>
        <span class="n">violation_text</span> <span class="o">=</span> <span class="s2">&quot;; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">violations</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Gain validation failed for </span><span class="si">{</span><span class="n">smc_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">violation_text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ConfigurationError</span><span class="p">(</span><span class="n">PSOFactoryError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when configuration is invalid.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SimulationError</span><span class="p">(</span><span class="n">PSOFactoryError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when simulation execution fails.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="c1"># Error handling decorators</span>
<span class="k">def</span><span class="w"> </span><span class="nf">handle_pso_errors</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator for robust PSO error handling.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">GainValidationError</span><span class="p">:</span>
            <span class="c1"># For PSO fitness functions, return penalty value</span>
            <span class="k">return</span> <span class="mf">1000.0</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ControllerCreationError</span><span class="p">,</span> <span class="n">SimulationError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Log error and return penalty</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PSO evaluation error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="mf">1000.0</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Unexpected errors - log and return penalty</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected PSO error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="mf">1000.0</span>

    <span class="k">return</span> <span class="n">wrapper</span>

<span class="c1"># Robust PSO fitness function template</span>
<span class="nd">@handle_pso_errors</span>
<span class="k">def</span><span class="w"> </span><span class="nf">robust_pso_fitness_function</span><span class="p">(</span><span class="n">gains</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
                              <span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span>
                              <span class="n">simulation_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
                              <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Template for robust PSO fitness functions with comprehensive error handling.</span>

<span class="sd">    Args:</span>
<span class="sd">        gains: Gain array from PSO</span>
<span class="sd">        smc_type: Controller type</span>
<span class="sd">        simulation_config: Simulation parameters</span>

<span class="sd">    Returns:</span>
<span class="sd">        Fitness value (lower is better)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create controller with automatic validation</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_smc_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

    <span class="c1"># Run simulation with error handling</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">run_simulation_with_error_handling</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">simulation_config</span><span class="p">)</span>

    <span class="c1"># Compute fitness with validation</span>
    <span class="n">fitness</span> <span class="o">=</span> <span class="n">compute_validated_fitness</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fitness</span>

<span class="k">def</span><span class="w"> </span><span class="nf">run_simulation_with_error_handling</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run simulation with comprehensive error handling.&quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Pre-validate simulation configuration</span>
        <span class="n">validate_simulation_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

        <span class="c1"># Run simulation with timeout</span>
        <span class="k">with</span> <span class="n">timeout_context</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;timeout&#39;</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">)):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>

        <span class="c1"># Post-validate simulation results</span>
        <span class="n">validate_simulation_results</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">except</span> <span class="ne">TimeoutError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SimulationError</span><span class="p">(</span><span class="s2">&quot;Simulation timeout exceeded&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SimulationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Simulation parameter error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SimulationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Simulation execution failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nd">@contextmanager</span>
<span class="k">def</span><span class="w"> </span><span class="nf">timeout_context</span><span class="p">(</span><span class="n">seconds</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Context manager for simulation timeout.&quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">signal</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">timeout_handler</span><span class="p">(</span><span class="n">signum</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">(</span><span class="s2">&quot;Operation timed out&quot;</span><span class="p">)</span>

    <span class="c1"># Set timeout handler</span>
    <span class="n">old_handler</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGALRM</span><span class="p">,</span> <span class="n">timeout_handler</span><span class="p">)</span>
    <span class="n">signal</span><span class="o">.</span><span class="n">alarm</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">seconds</span><span class="p">))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">signal</span><span class="o">.</span><span class="n">alarm</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGALRM</span><span class="p">,</span> <span class="n">old_handler</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="usage-examples">
<h2>Usage Examples<a class="headerlink" href="#usage-examples" title="Link to this heading">¶</a></h2>
<section id="complete-pso-optimization-workflow">
<h3>Complete PSO Optimization Workflow<a class="headerlink" href="#complete-pso-optimization-workflow" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example-metadata:</span>
<span class="c1"># runnable: false</span>

<span class="k">def</span><span class="w"> </span><span class="nf">complete_pso_optimization_example</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Complete example demonstrating PSO-Factory integration.</span>

<span class="sd">    This example shows:</span>
<span class="sd">    1. Configuration setup</span>
<span class="sd">    2. Controller creation and validation</span>
<span class="sd">    3. PSO optimization execution</span>
<span class="sd">    4. Performance monitoring</span>
<span class="sd">    5. Results analysis and validation</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Step 1: Configuration setup</span>
    <span class="n">pso_config</span> <span class="o">=</span> <span class="n">PSOFactoryConfig</span><span class="p">(</span>
        <span class="n">controller_type</span><span class="o">=</span><span class="n">SMCType</span><span class="o">.</span><span class="n">CLASSICAL</span><span class="p">,</span>
        <span class="n">max_force</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
        <span class="n">dt</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">pso_params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;n_particles&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s1">&#39;iters&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
            <span class="s1">&#39;c1&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
            <span class="s1">&#39;c2&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
            <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="mf">0.9</span>
        <span class="p">},</span>
        <span class="n">enable_monitoring</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">strict_validation</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>

    <span class="c1"># Step 2: Simulation configuration</span>
    <span class="n">simulation_config</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
        <span class="s1">&#39;dt&#39;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
        <span class="s1">&#39;initial_state&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># Small perturbation</span>
        <span class="s1">&#39;disturbances&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;enable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;amplitude&#39;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
            <span class="s1">&#39;frequency&#39;</span><span class="p">:</span> <span class="mf">1.0</span>
        <span class="p">},</span>
        <span class="s1">&#39;performance_objectives&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;ise&#39;</span><span class="p">,</span> <span class="s1">&#39;overshoot&#39;</span><span class="p">,</span> <span class="s1">&#39;control_effort&#39;</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="c1"># Step 3: PSO optimization with monitoring</span>
    <span class="k">with</span> <span class="n">monitor_pso_performance</span><span class="p">(</span><span class="n">pso_config</span><span class="o">.</span><span class="n">pso_params</span><span class="p">)</span> <span class="k">as</span> <span class="n">monitor</span><span class="p">:</span>

        <span class="c1"># Define fitness function</span>
        <span class="nd">@handle_pso_errors</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">fitness_function</span><span class="p">(</span><span class="n">particles</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
            <span class="n">fitness_scores</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">gains</span> <span class="ow">in</span> <span class="n">particles</span><span class="p">:</span>
                <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Create controller with validation</span>
                    <span class="n">controller</span> <span class="o">=</span> <span class="n">create_smc_for_pso</span><span class="p">(</span>
                        <span class="n">pso_config</span><span class="o">.</span><span class="n">controller_type</span><span class="p">,</span>
                        <span class="n">gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                        <span class="n">pso_config</span><span class="o">.</span><span class="n">max_force</span>
                    <span class="p">)</span>
                    <span class="n">creation_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
                    <span class="n">monitor</span><span class="o">.</span><span class="n">log_controller_creation</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">creation_time</span><span class="p">)</span>

                    <span class="c1"># Run simulation</span>
                    <span class="n">sim_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">simulation_config</span><span class="p">)</span>
                    <span class="n">sim_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">sim_start</span>
                    <span class="n">monitor</span><span class="o">.</span><span class="n">log_simulation_execution</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">sim_time</span><span class="p">)</span>

                    <span class="c1"># Compute fitness</span>
                    <span class="n">fitness_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
                    <span class="n">fitness</span> <span class="o">=</span> <span class="n">compute_multi_objective_fitness</span><span class="p">(</span>
                        <span class="n">result</span><span class="p">,</span> <span class="n">simulation_config</span><span class="p">[</span><span class="s1">&#39;performance_objectives&#39;</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">fitness_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">fitness_start</span>
                    <span class="n">monitor</span><span class="o">.</span><span class="n">log_fitness_evaluation</span><span class="p">(</span><span class="n">fitness</span><span class="p">,</span> <span class="n">fitness_time</span><span class="p">)</span>

                    <span class="n">fitness_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>

                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">monitor</span><span class="o">.</span><span class="n">log_controller_creation</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
                    <span class="n">fitness_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1000.0</span><span class="p">)</span>

                <span class="c1"># Log resource usage periodically</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fitness_scores</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">monitor</span><span class="o">.</span><span class="n">log_resource_usage</span><span class="p">()</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">fitness_scores</span><span class="p">)</span>

        <span class="c1"># Step 4: Execute PSO optimization</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">pyswarms.single</span><span class="w"> </span><span class="kn">import</span> <span class="n">GlobalBestPSO</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="n">pso_config</span><span class="o">.</span><span class="n">gain_bounds</span>
        <span class="n">bounds_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

        <span class="n">optimizer</span> <span class="o">=</span> <span class="n">GlobalBestPSO</span><span class="p">(</span>
            <span class="n">n_particles</span><span class="o">=</span><span class="n">pso_config</span><span class="o">.</span><span class="n">pso_params</span><span class="p">[</span><span class="s1">&#39;n_particles&#39;</span><span class="p">],</span>
            <span class="n">dimensions</span><span class="o">=</span><span class="n">pso_config</span><span class="o">.</span><span class="n">n_gains</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;c1&#39;</span><span class="p">:</span> <span class="n">pso_config</span><span class="o">.</span><span class="n">pso_params</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">],</span>
                <span class="s1">&#39;c2&#39;</span><span class="p">:</span> <span class="n">pso_config</span><span class="o">.</span><span class="n">pso_params</span><span class="p">[</span><span class="s1">&#39;c2&#39;</span><span class="p">],</span>
                <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="n">pso_config</span><span class="o">.</span><span class="n">pso_params</span><span class="p">[</span><span class="s1">&#39;w&#39;</span><span class="p">]</span>
            <span class="p">},</span>
            <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="n">bounds_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">bounds_array</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting PSO optimization...&quot;</span><span class="p">)</span>
        <span class="n">best_cost</span><span class="p">,</span> <span class="n">best_gains</span> <span class="o">=</span> <span class="n">optimizer</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span>
            <span class="n">fitness_function</span><span class="p">,</span>
            <span class="n">iters</span><span class="o">=</span><span class="n">pso_config</span><span class="o">.</span><span class="n">pso_params</span><span class="p">[</span><span class="s1">&#39;iters&#39;</span><span class="p">],</span>
            <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

    <span class="c1"># Step 5: Results analysis</span>
    <span class="n">performance_report</span> <span class="o">=</span> <span class="n">monitor</span><span class="o">.</span><span class="n">generate_performance_report</span><span class="p">()</span>

    <span class="c1"># Validate optimized controller</span>
    <span class="n">optimized_controller</span> <span class="o">=</span> <span class="n">create_smc_for_pso</span><span class="p">(</span>
        <span class="n">pso_config</span><span class="o">.</span><span class="n">controller_type</span><span class="p">,</span>
        <span class="n">best_gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
        <span class="n">pso_config</span><span class="o">.</span><span class="n">max_force</span>
    <span class="p">)</span>

    <span class="c1"># Run validation simulation</span>
    <span class="n">validation_result</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">optimized_controller</span><span class="p">,</span> <span class="n">simulation_config</span><span class="p">)</span>
    <span class="n">validation_metrics</span> <span class="o">=</span> <span class="n">compute_validation_metrics</span><span class="p">(</span><span class="n">validation_result</span><span class="p">)</span>

    <span class="c1"># Step 6: Generate comprehensive report</span>
    <span class="n">optimization_report</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;optimization_results&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;best_gains&#39;</span><span class="p">:</span> <span class="n">best_gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
            <span class="s1">&#39;best_fitness&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">best_cost</span><span class="p">),</span>
            <span class="s1">&#39;optimization_history&#39;</span><span class="p">:</span> <span class="n">optimizer</span><span class="o">.</span><span class="n">cost_history</span><span class="p">,</span>
            <span class="s1">&#39;convergence_iteration&#39;</span><span class="p">:</span> <span class="n">find_convergence_iteration</span><span class="p">(</span><span class="n">optimizer</span><span class="o">.</span><span class="n">cost_history</span><span class="p">)</span>
        <span class="p">},</span>
        <span class="s1">&#39;validation_results&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;controller_gains&#39;</span><span class="p">:</span> <span class="n">optimized_controller</span><span class="o">.</span><span class="n">gains</span><span class="p">,</span>
            <span class="s1">&#39;performance_metrics&#39;</span><span class="p">:</span> <span class="n">validation_metrics</span><span class="p">,</span>
            <span class="s1">&#39;stability_analysis&#39;</span><span class="p">:</span> <span class="n">estimate_stability_properties</span><span class="p">(</span>
                <span class="n">pso_config</span><span class="o">.</span><span class="n">controller_type</span><span class="p">,</span> <span class="n">best_gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="p">},</span>
        <span class="s1">&#39;performance_report&#39;</span><span class="p">:</span> <span class="n">performance_report</span><span class="p">,</span>
        <span class="s1">&#39;configuration&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;pso_config&#39;</span><span class="p">:</span> <span class="n">pso_config</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">,</span>
            <span class="s1">&#39;simulation_config&#39;</span><span class="p">:</span> <span class="n">simulation_config</span><span class="p">,</span>
            <span class="s1">&#39;bounds_used&#39;</span><span class="p">:</span> <span class="n">bounds</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1"># Step 7: Display results</span>
    <span class="n">print_optimization_summary</span><span class="p">(</span><span class="n">optimization_report</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">optimization_report</span>

<span class="k">def</span><span class="w"> </span><span class="nf">print_optimization_summary</span><span class="p">(</span><span class="n">report</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Print formatted optimization summary.&quot;&quot;&quot;</span>

    <span class="n">opt_results</span> <span class="o">=</span> <span class="n">report</span><span class="p">[</span><span class="s1">&#39;optimization_results&#39;</span><span class="p">]</span>
    <span class="n">val_results</span> <span class="o">=</span> <span class="n">report</span><span class="p">[</span><span class="s1">&#39;validation_results&#39;</span><span class="p">]</span>
    <span class="n">perf_report</span> <span class="o">=</span> <span class="n">report</span><span class="p">[</span><span class="s1">&#39;performance_report&#39;</span><span class="p">]</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PSO OPTIMIZATION RESULTS SUMMARY&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">📊 OPTIMIZATION RESULTS:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Best Fitness: </span><span class="si">{</span><span class="n">opt_results</span><span class="p">[</span><span class="s1">&#39;best_fitness&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Best Gains: </span><span class="si">{</span><span class="n">opt_results</span><span class="p">[</span><span class="s1">&#39;best_gains&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Convergence: Iteration </span><span class="si">{</span><span class="n">opt_results</span><span class="p">[</span><span class="s1">&#39;convergence_iteration&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">🎯 VALIDATION METRICS:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">metric</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">val_results</span><span class="p">[</span><span class="s1">&#39;performance_metrics&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">metric</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">⚡ PERFORMANCE SUMMARY:&quot;</span><span class="p">)</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">perf_report</span><span class="p">[</span><span class="s1">&#39;summary&#39;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Total Evaluations: </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;total_evaluations&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Success Rate: </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;success_rate&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Evaluations/sec: </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;evaluations_per_second&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Total Time: </span><span class="si">{</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;total_optimization_time&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>

    <span class="n">perf</span> <span class="o">=</span> <span class="n">perf_report</span><span class="p">[</span><span class="s1">&#39;performance&#39;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Avg Creation Time: </span><span class="si">{</span><span class="n">perf</span><span class="p">[</span><span class="s1">&#39;average_controller_creation_time_ms&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Avg Simulation Time: </span><span class="si">{</span><span class="n">perf</span><span class="p">[</span><span class="s1">&#39;average_simulation_time_ms&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>

    <span class="n">resources</span> <span class="o">=</span> <span class="n">perf_report</span><span class="p">[</span><span class="s1">&#39;resources&#39;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Peak Memory: </span><span class="si">{</span><span class="n">resources</span><span class="p">[</span><span class="s1">&#39;peak_memory_usage_percent&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Avg CPU: </span><span class="si">{</span><span class="n">resources</span><span class="p">[</span><span class="s1">&#39;average_cpu_utilization_percent&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">perf_report</span><span class="p">[</span><span class="s1">&#39;alerts&#39;</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">⚠️  PERFORMANCE ALERTS:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">alert</span> <span class="ow">in</span> <span class="n">perf_report</span><span class="p">[</span><span class="s1">&#39;alerts&#39;</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - </span><span class="si">{</span><span class="n">alert</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">find_convergence_iteration</span><span class="p">(</span><span class="n">cost_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
                              <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">,</span>
                              <span class="n">patience</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span>
                              <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find iteration where PSO converged.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cost_history</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">patience</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">cost_history</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">patience</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">cost_history</span><span class="p">)):</span>
        <span class="c1"># Check if fitness has been stable for &#39;patience&#39; iterations</span>
        <span class="n">recent_costs</span> <span class="o">=</span> <span class="n">cost_history</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">patience</span><span class="p">:</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="n">recent_costs</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">recent_costs</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span> <span class="o">-</span> <span class="n">patience</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">cost_history</span><span class="p">)</span>  <span class="c1"># No convergence detected</span>

<span class="c1"># Run the complete example</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">optimization_report</span> <span class="o">=</span> <span class="n">complete_pso_optimization_example</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="multi-controller-comparison-example">
<h3>Multi-Controller Comparison Example<a class="headerlink" href="#multi-controller-comparison-example" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">multi_controller_comparison_example</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Example demonstrating comparison of all SMC controller types.</span>

<span class="sd">    Optimizes all 4 controller types and compares their performance</span>
<span class="sd">    across multiple objectives and scenarios.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Define test scenarios</span>
    <span class="n">test_scenarios</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;small_disturbance&#39;</span><span class="p">,</span>
            <span class="s1">&#39;initial_state&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="s1">&#39;disturbance_amplitude&#39;</span><span class="p">:</span> <span class="mf">2.0</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;large_disturbance&#39;</span><span class="p">,</span>
            <span class="s1">&#39;initial_state&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="s1">&#39;disturbance_amplitude&#39;</span><span class="p">:</span> <span class="mf">10.0</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;parameter_uncertainty&#39;</span><span class="p">,</span>
            <span class="s1">&#39;initial_state&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="s1">&#39;parameter_variations&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;mass_uncertainty&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>

    <span class="c1"># Define optimization objectives</span>
    <span class="n">objectives</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;control_performance&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;ise&#39;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span> <span class="s1">&#39;overshoot&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;settling_time&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">},</span>
        <span class="s1">&#39;energy_efficiency&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;ise&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;control_effort&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;chattering&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">},</span>
        <span class="s1">&#39;robustness&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;ise&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span> <span class="s1">&#39;disturbance_rejection&#39;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span> <span class="s1">&#39;parameter_sensitivity&#39;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">}</span>
    <span class="p">}</span>

    <span class="c1"># PSO configuration for all controllers</span>
    <span class="n">base_pso_config</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;n_particles&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
        <span class="s1">&#39;iters&#39;</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span>
        <span class="s1">&#39;c1&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
        <span class="s1">&#39;c2&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
        <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="mf">0.9</span>
    <span class="p">}</span>

    <span class="n">all_results</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Optimize each controller type</span>
    <span class="k">for</span> <span class="n">smc_type</span> <span class="ow">in</span> <span class="n">SMCType</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">60</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;OPTIMIZING </span><span class="si">{</span><span class="n">smc_type</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">60</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">controller_results</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Test each scenario</span>
        <span class="k">for</span> <span class="n">scenario</span> <span class="ow">in</span> <span class="n">test_scenarios</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Scenario: </span><span class="si">{</span><span class="n">scenario</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">scenario_results</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="c1"># Test each objective set</span>
            <span class="k">for</span> <span class="n">obj_name</span><span class="p">,</span> <span class="n">obj_weights</span> <span class="ow">in</span> <span class="n">objectives</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Objective: </span><span class="si">{</span><span class="n">obj_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Create simulation config for this scenario</span>
                <span class="n">sim_config</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
                    <span class="s1">&#39;dt&#39;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
                    <span class="s1">&#39;initial_state&#39;</span><span class="p">:</span> <span class="n">scenario</span><span class="p">[</span><span class="s1">&#39;initial_state&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;disturbance_amplitude&#39;</span><span class="p">:</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;disturbance_amplitude&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                    <span class="s1">&#39;parameter_variations&#39;</span><span class="p">:</span> <span class="n">scenario</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parameter_variations&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                    <span class="s1">&#39;objectives&#39;</span><span class="p">:</span> <span class="n">obj_weights</span>
                <span class="p">}</span>

                <span class="c1"># Run PSO optimization</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">optimize_single_controller</span><span class="p">(</span>
                    <span class="n">smc_type</span><span class="p">,</span> <span class="n">sim_config</span><span class="p">,</span> <span class="n">base_pso_config</span>
                <span class="p">)</span>

                <span class="n">scenario_results</span><span class="p">[</span><span class="n">obj_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>

            <span class="n">controller_results</span><span class="p">[</span><span class="n">scenario</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">scenario_results</span>

        <span class="n">all_results</span><span class="p">[</span><span class="n">smc_type</span><span class="o">.</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">controller_results</span>

    <span class="c1"># Generate comparison analysis</span>
    <span class="n">comparison_analysis</span> <span class="o">=</span> <span class="n">analyze_controller_comparison</span><span class="p">(</span><span class="n">all_results</span><span class="p">,</span> <span class="n">test_scenarios</span><span class="p">,</span> <span class="n">objectives</span><span class="p">)</span>

    <span class="c1"># Display results</span>
    <span class="n">display_comparison_results</span><span class="p">(</span><span class="n">comparison_analysis</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">comparison_analysis</span>

<span class="k">def</span><span class="w"> </span><span class="nf">optimize_single_controller</span><span class="p">(</span><span class="n">smc_type</span><span class="p">:</span> <span class="n">SMCType</span><span class="p">,</span>
                              <span class="n">sim_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
                              <span class="n">pso_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
                              <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Optimize single controller for given scenario.&quot;&quot;&quot;</span>

    <span class="c1"># Get PSO bounds</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_gain_bounds_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">)</span>
    <span class="n">bounds_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

    <span class="c1"># Create fitness function</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fitness_function</span><span class="p">(</span><span class="n">particles</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="n">fitness_scores</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">gains</span> <span class="ow">in</span> <span class="n">particles</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">controller</span> <span class="o">=</span> <span class="n">create_smc_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">sim_config</span><span class="p">)</span>
                <span class="n">fitness</span> <span class="o">=</span> <span class="n">compute_multi_objective_fitness</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">sim_config</span><span class="p">[</span><span class="s1">&#39;objectives&#39;</span><span class="p">])</span>
                <span class="n">fitness_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fitness_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">1000.0</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">fitness_scores</span><span class="p">)</span>

    <span class="c1"># Run PSO</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">pyswarms.single</span><span class="w"> </span><span class="kn">import</span> <span class="n">GlobalBestPSO</span>

    <span class="n">optimizer</span> <span class="o">=</span> <span class="n">GlobalBestPSO</span><span class="p">(</span>
        <span class="n">n_particles</span><span class="o">=</span><span class="n">pso_config</span><span class="p">[</span><span class="s1">&#39;n_particles&#39;</span><span class="p">],</span>
        <span class="n">dimensions</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">),</span>
        <span class="n">options</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;c1&#39;</span><span class="p">:</span> <span class="n">pso_config</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">],</span>
            <span class="s1">&#39;c2&#39;</span><span class="p">:</span> <span class="n">pso_config</span><span class="p">[</span><span class="s1">&#39;c2&#39;</span><span class="p">],</span>
            <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="n">pso_config</span><span class="p">[</span><span class="s1">&#39;w&#39;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="n">bounds_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">bounds_array</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="p">)</span>

    <span class="n">best_cost</span><span class="p">,</span> <span class="n">best_gains</span> <span class="o">=</span> <span class="n">optimizer</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span>
        <span class="n">fitness_function</span><span class="p">,</span>
        <span class="n">iters</span><span class="o">=</span><span class="n">pso_config</span><span class="p">[</span><span class="s1">&#39;iters&#39;</span><span class="p">],</span>
        <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>

    <span class="c1"># Validate result</span>
    <span class="n">final_controller</span> <span class="o">=</span> <span class="n">create_smc_for_pso</span><span class="p">(</span><span class="n">smc_type</span><span class="p">,</span> <span class="n">best_gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
    <span class="n">validation_result</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">final_controller</span><span class="p">,</span> <span class="n">sim_config</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;best_gains&#39;</span><span class="p">:</span> <span class="n">best_gains</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
        <span class="s1">&#39;best_fitness&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">best_cost</span><span class="p">),</span>
        <span class="s1">&#39;validation_metrics&#39;</span><span class="p">:</span> <span class="n">compute_validation_metrics</span><span class="p">(</span><span class="n">validation_result</span><span class="p">),</span>
        <span class="s1">&#39;optimization_history&#39;</span><span class="p">:</span> <span class="n">optimizer</span><span class="o">.</span><span class="n">cost_history</span>
    <span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">analyze_controller_comparison</span><span class="p">(</span><span class="n">results</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
                                <span class="n">scenarios</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
                                <span class="n">objectives</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
                                <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Analyze comparison results across controllers.&quot;&quot;&quot;</span>

    <span class="n">analysis</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;overall_ranking&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;scenario_performance&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;objective_performance&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;robustness_analysis&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;recommendations&#39;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">}</span>

    <span class="c1"># Rank controllers by overall performance</span>
    <span class="n">controller_scores</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">controller_type</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">total_score</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">scenario_name</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="n">controller_type</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">obj_name</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="n">controller_type</span><span class="p">][</span><span class="n">scenario_name</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">fitness</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">controller_type</span><span class="p">][</span><span class="n">scenario_name</span><span class="p">][</span><span class="n">obj_name</span><span class="p">][</span><span class="s1">&#39;best_fitness&#39;</span><span class="p">]</span>
                <span class="n">total_score</span> <span class="o">+=</span> <span class="n">fitness</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">controller_scores</span><span class="p">[</span><span class="n">controller_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">total_score</span> <span class="o">/</span> <span class="n">count</span> <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>

    <span class="c1"># Sort by performance (lower is better)</span>
    <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;overall_ranking&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span>
        <span class="n">controller_scores</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="p">))</span>

    <span class="c1"># Analyze performance by scenario</span>
    <span class="k">for</span> <span class="n">scenario</span> <span class="ow">in</span> <span class="n">scenarios</span><span class="p">:</span>
        <span class="n">scenario_name</span> <span class="o">=</span> <span class="n">scenario</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="n">scenario_scores</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">controller_type</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">scenario_name</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="n">controller_type</span><span class="p">]:</span>
                <span class="n">avg_fitness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span>
                    <span class="n">results</span><span class="p">[</span><span class="n">controller_type</span><span class="p">][</span><span class="n">scenario_name</span><span class="p">][</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;best_fitness&#39;</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="n">controller_type</span><span class="p">][</span><span class="n">scenario_name</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="p">])</span>
                <span class="n">scenario_scores</span><span class="p">[</span><span class="n">controller_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">avg_fitness</span>

        <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;scenario_performance&#39;</span><span class="p">][</span><span class="n">scenario_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span>
            <span class="n">scenario_scores</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">))</span>

    <span class="c1"># Analyze performance by objective</span>
    <span class="k">for</span> <span class="n">obj_name</span> <span class="ow">in</span> <span class="n">objectives</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">objective_scores</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">controller_type</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">obj_scores</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">scenario_name</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="n">controller_type</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">obj_name</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="n">controller_type</span><span class="p">][</span><span class="n">scenario_name</span><span class="p">]:</span>
                    <span class="n">obj_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">results</span><span class="p">[</span><span class="n">controller_type</span><span class="p">][</span><span class="n">scenario_name</span><span class="p">][</span><span class="n">obj_name</span><span class="p">][</span><span class="s1">&#39;best_fitness&#39;</span><span class="p">]</span>
                    <span class="p">)</span>

            <span class="k">if</span> <span class="n">obj_scores</span><span class="p">:</span>
                <span class="n">objective_scores</span><span class="p">[</span><span class="n">controller_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">obj_scores</span><span class="p">)</span>

        <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;objective_performance&#39;</span><span class="p">][</span><span class="n">obj_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span>
            <span class="n">objective_scores</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">))</span>

    <span class="c1"># Generate recommendations</span>
    <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;recommendations&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generate_controller_recommendations</span><span class="p">(</span><span class="n">analysis</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">analysis</span>

<span class="k">def</span><span class="w"> </span><span class="nf">generate_controller_recommendations</span><span class="p">(</span><span class="n">analysis</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate recommendations based on comparison analysis.&quot;&quot;&quot;</span>

    <span class="n">recommendations</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Overall best controller</span>
    <span class="n">best_overall</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;overall_ranking&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">recommendations</span><span class="p">[</span><span class="s1">&#39;best_overall&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">best_overall</span><span class="si">}</span><span class="s2"> shows the best overall performance across &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;all scenarios and objectives.&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Scenario-specific recommendations</span>
    <span class="k">for</span> <span class="n">scenario</span><span class="p">,</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;scenario_performance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">best_for_scenario</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ranking</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">recommendations</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;best_for_</span><span class="si">{</span><span class="n">scenario</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">best_for_scenario</span><span class="si">}</span><span class="s2"> performs best for </span><span class="si">{</span><span class="n">scenario</span><span class="si">}</span><span class="s2"> scenarios.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Objective-specific recommendations</span>
    <span class="k">for</span> <span class="n">objective</span><span class="p">,</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;objective_performance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">best_for_objective</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ranking</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">recommendations</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;best_for_</span><span class="si">{</span><span class="n">objective</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">best_for_objective</span><span class="si">}</span><span class="s2"> excels at </span><span class="si">{</span><span class="n">objective</span><span class="si">}</span><span class="s2"> objectives.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">recommendations</span>

<span class="k">def</span><span class="w"> </span><span class="nf">display_comparison_results</span><span class="p">(</span><span class="n">analysis</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Display formatted comparison results.&quot;&quot;&quot;</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MULTI-CONTROLLER COMPARISON RESULTS&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">🏆 OVERALL RANKING:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;overall_ranking&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="mi">1</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">controller</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">score</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">📊 SCENARIO PERFORMANCE:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">scenario</span><span class="p">,</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;scenario_performance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">   </span><span class="si">{</span><span class="n">scenario</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ranking</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;      </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">controller</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">score</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">🎯 OBJECTIVE PERFORMANCE:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">objective</span><span class="p">,</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;objective_performance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">   </span><span class="si">{</span><span class="n">objective</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ranking</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;      </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">controller</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">score</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">💡 RECOMMENDATIONS:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">recommendation</span> <span class="ow">in</span> <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;recommendations&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   • </span><span class="si">{</span><span class="n">recommendation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>

<span class="c1"># Run the comparison example</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">comparison_results</span> <span class="o">=</span> <span class="n">multi_controller_comparison_example</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<p>This comprehensive PSO Factory Integration API Reference provides complete documentation for all aspects of the factory pattern implementation and PSO optimization framework. The API is designed to support both simple single-controller optimization and complex multi-objective, multi-controller research workflows while maintaining mathematical rigor and production-quality performance.</p>
<hr class="docutils" />
<p><strong>Document Status</strong>: Complete API Reference Documentation
<strong>Last Updated</strong>: September 28, 2024
<strong>API Version</strong>: GitHub Issue #6 Production Release
<strong>Coverage</strong>: 100% Factory Integration + PSO Framework
<strong>Validation Level</strong>: Production Ready</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Research Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Oct 08, 2025</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">PSO Factory Integration API Reference</a><ul>
<li><a class="reference internal" href="#complete-documentation-for-pso-optimized-controller-factory">Complete Documentation for PSO-Optimized Controller Factory</a><ul>
<li><a class="reference internal" href="#table-of-contents">Table of Contents</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-overview">API Overview</a><ul>
<li><a class="reference internal" href="#design-philosophy">Design Philosophy</a></li>
<li><a class="reference internal" href="#import-structure">Import Structure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#core-pso-integration-classes">Core PSO Integration Classes</a><ul>
<li><a class="reference internal" href="#smctype-enumeration">SMCType Enumeration</a></li>
<li><a class="reference internal" href="#smcgainspec-specification-class">SMCGainSpec Specification Class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#factory-functions-for-pso">Factory Functions for PSO</a><ul>
<li><a class="reference internal" href="#create-smc-for-pso">create_smc_for_pso</a></li>
<li><a class="reference internal" href="#get-gain-bounds-for-pso">get_gain_bounds_for_pso</a></li>
<li><a class="reference internal" href="#validate-smc-gains">validate_smc_gains</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pso-controller-wrapper">PSO Controller Wrapper</a><ul>
<li><a class="reference internal" href="#psocontrollerwrapper-class">PSOControllerWrapper Class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mathematical-constraints-api">Mathematical Constraints API</a><ul>
<li><a class="reference internal" href="#smc-gain-specs-registry">SMC_GAIN_SPECS Registry</a></li>
<li><a class="reference internal" href="#constraint-validation-functions">Constraint Validation Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration-schema-api">Configuration Schema API</a><ul>
<li><a class="reference internal" href="#factory-configuration-classes">Factory Configuration Classes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-pso-workflows">Advanced PSO Workflows</a><ul>
<li><a class="reference internal" href="#multi-objective-pso-integration">Multi-Objective PSO Integration</a></li>
<li><a class="reference internal" href="#adaptive-pso-with-dynamic-bounds">Adaptive PSO with Dynamic Bounds</a></li>
</ul>
</li>
<li><a class="reference internal" href="#performance-monitoring-api">Performance Monitoring API</a><ul>
<li><a class="reference internal" href="#real-time-performance-monitoring">Real-Time Performance Monitoring</a></li>
</ul>
</li>
<li><a class="reference internal" href="#error-handling-reference">Error Handling Reference</a><ul>
<li><a class="reference internal" href="#exception-hierarchy">Exception Hierarchy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage-examples">Usage Examples</a><ul>
<li><a class="reference internal" href="#complete-pso-optimization-workflow">Complete PSO Optimization Workflow</a></li>
<li><a class="reference internal" href="#multi-controller-comparison-example">Multi-Controller Comparison Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=4ebf8126"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=08e7b316"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/back-to-top.js?v=840797bb"></script>
    <script src="../_static/lazy-load.js?v=dc25293c"></script>
    <script src="../_static/dark-mode.js?v=bf328970"></script>
    </body>
</html>