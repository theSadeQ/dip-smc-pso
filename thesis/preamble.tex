%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PREAMBLE: Packages, Formatting, Custom Commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% PAGE LAYOUT %%%
\usepackage[
    a4paper,
    left=3.5cm,      % Wider left margin for binding
    right=2.5cm,
    top=2.5cm,
    bottom=2.5cm,
    headheight=15pt
]{geometry}

%%% ENCODING & FONTS %%%
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}          % Latin Modern fonts (better than default)

%%% MATH PACKAGES %%%
\usepackage{amsmath}          % Core math environments
\usepackage{amsfonts}         % Math fonts (\mathbb{R})
\usepackage{amssymb}          % Extra symbols (\therefore, \because)
\usepackage{mathtools}        % Extensions to amsmath

%%% GRAPHICS & FIGURES %%%
\usepackage{graphicx}         % \includegraphics
\usepackage{float}            % [H] placement specifier
\usepackage{caption}          % Caption customization
\usepackage{subcaption}       % Subfigures (a), (b), (c)

%%% TABLES %%%
\usepackage{booktabs}         % Professional tables (\toprule, \midrule)
\usepackage{multirow}         % Multi-row cells
\usepackage{array}            % Enhanced column formatting
\usepackage{pdflscape}        % Landscape pages for wide tables
\usepackage{afterpage}        % Allow landscape tables after current page

%%% ALGORITHMS & CODE %%%
\usepackage[ruled,vlined]{algorithm2e}  % Algorithm pseudocode
\usepackage{listings}         % Code listings
\usepackage{xcolor}           % Colors for code syntax highlighting

% Code listing style
\lstset{
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue},
    commentstyle=\color{gray},
    stringstyle=\color{red},
    showstringspaces=false,
    numbers=left,
    numberstyle=\tiny\color{gray},
    frame=single,
    breaklines=true
}

%%% BIBLIOGRAPHY %%%
\usepackage[numbers,sort&compress]{natbib}  % Numeric citations [1,2,3]

%%% HYPERLINKS & CROSS-REFERENCES %%%
% Compatibility fix for hyperref with older LaTeX kernels
\providecommand{\IfFormatAtLeastT}[2]{}
\providecommand{\IfDocumentMetadataT}[1]{}
\usepackage[
    colorlinks=true,
    linkcolor=blue,       % Internal links (chapters, figures)
    citecolor=red,        % Citation links
    urlcolor=cyan,        % External URLs
    bookmarks=true
]{hyperref}

%%% HEADERS & FOOTERS %%%
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}  % Clear defaults
\fancyhead[R]{\nouppercase{\leftmark}}  % Chapter name on right
\fancyfoot[C]{\thepage}                 % Page number centered

% Chapter pages (no header)
\fancypagestyle{plain}{
    \fancyhf{}
    \fancyfoot[C]{\thepage}
    \renewcommand{\headrulewidth}{0pt}
}

%%% SI UNITS %%%
\usepackage{siunitx}          % \SI{10}{\meter\per\second}

%%% NOMENCLATURE %%%
\usepackage{nomencl}
\makenomenclature

%%% THEOREM ENVIRONMENTS %%%
\usepackage{amsthm}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{example}{Example}[section]

%%% TIKZ (for diagrams) %%%
\usepackage{tikz}
\usetikzlibrary{arrows,shapes,positioning,calc}

%%% CUSTOM COMMANDS %%%

% Vectors (bold)
\newcommand{\vect}[1]{\mathbf{#1}}

% Matrices (bold uppercase)
\newcommand{\mat}[1]{\mathbf{#1}}

% Real numbers
\newcommand{\Real}{\mathbb{R}}

% Derivative shortcuts
\newcommand{\diff}[2]{\frac{d #1}{d #2}}
\newcommand{\pdiff}[2]{\frac{\partial #1}{\partial #2}}

% Common symbols
\newcommand{\thetaone}{\theta_1}
\newcommand{\thetatwo}{\theta_2}

% Norm
\newcommand{\norm}[1]{\left\| #1 \right\|}

% Sign function
\DeclareMathOperator{\sign}{sign}

% Saturation function
\DeclareMathOperator{\sat}{sat}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
