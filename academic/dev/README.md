# dev/ - Development Artifacts Directory

## Purpose

This directory contains development artifacts, quality assurance reports, test coverage data, and runtime caches for the double-inverted pendulum SMC project. It serves as the centralized location for all development-related outputs that support code quality, testing, and performance optimization.

## Structure

```
dev/
├── quality/           [46 MB] - QA audits & coverage reports
│   ├── coverage/      [44 MB] - HTML coverage reports
│   ├── audits/        [972 KB] - QA audit deliverables
│   └── testing/       [916 KB] - Test summaries
└── caches/            [133 KB] - Testing & benchmark caches
    ├── pytest/        - Pytest cache (.pytest_cache)
    ├── hypothesis/    - Hypothesis test data
    └── benchmarks/    - Benchmark cache data
```

## Total Size

**Current:** ~46 MB (after Dec 29, 2025 reorganization)

**Breakdown:**
- quality/ (46 MB, 99.7%)
  - coverage/ (44 MB, 95.6%)
  - audits/ (972 KB, 2.1%)
  - testing/ (916 KB, 2.0%)
- caches/ (133 KB, 0.3%)

## Directory Contents

### quality/ [46 MB]
Quality assurance artifacts, test coverage reports, and testing summaries.

#### coverage/ [44 MB]
HTML test coverage reports generated by pytest-cov.

**Contents:**
- `htmlcov/` - HTML coverage report (interactive browsing)
- `coverage.xml` - XML coverage data (CI/CD integration)
- `.coverage` - Coverage database (SQLite)

**Usage:**
```bash
# Generate coverage report
python -m pytest tests/ --cov=src --cov-report=html --cov-report=xml

# View HTML report
open academic/dev/quality/coverage/htmlcov/index.html
```

**Metrics:**
- Overall coverage target: ≥85%
- Critical components target: ≥95%
- Safety-critical components: 100%

**Retention:** Keep latest report; regenerate as needed

#### audits/ [972 KB]
QA audit deliverables and quality gate reports.

**Contents:**
- Production readiness audits
- Phase completion reports
- Quality gate assessments
- Code review summaries

**Example Files:**
- `phase_4_1_audit.md` - Phase 4.1 production readiness
- `phase_4_2_audit.md` - Phase 4.2 thread safety validation
- `quality_gates_report.md` - Quality gates status (1/8 passing)

**Purpose:** Track production readiness and quality standards compliance.

**Retention:** Keep all audits indefinitely (project history)

#### testing/ [916 KB]
Test execution summaries and validation reports.

**Contents:**
- Test suite summaries
- Integration test reports
- Benchmark validation results
- Test failure analysis

**Example Files:**
- `test_summary_latest.md` - Latest test run summary
- `integration_test_report.md` - Integration test results
- `benchmark_validation.md` - Benchmark test outcomes

**Purpose:** Track test execution history and identify failure patterns.

**Retention:** Keep latest 30 days; archive old reports

### caches/ [133 KB]
Runtime caches for testing and benchmarking tools.

#### pytest/ (.pytest_cache)
Pytest execution cache for faster test reruns.

**Contents:**
- `.pytest_cache/` - Pytest metadata and test results
- Test discovery cache
- Last failed tests tracking
- Step-wise execution state

**Purpose:** Speed up pytest execution by caching test metadata.

**Regeneration:** Auto-regenerated on each pytest run

**Retention:** Can be deleted safely (regenerates automatically)

#### hypothesis/
Hypothesis property-based testing data.

**Contents:**
- Hypothesis database (test case examples)
- Failing test cases for regression testing
- Generated test data samples

**Purpose:** Preserve failing test cases for reproducible property-based testing.

**Regeneration:** Auto-regenerated, but preserves failing cases

**Retention:** Keep hypothesis database (preserves bug regression tests)

#### benchmarks/
Benchmark execution cache data.

**Contents:**
- `.benchmarks/` - pytest-benchmark cache
- Benchmark run history
- Performance regression data

**Purpose:** Track benchmark performance over time and detect regressions.

**Regeneration:** Auto-regenerated on benchmark runs

**Retention:** Keep for performance trend analysis

## Usage Guidelines

### For Developers
1. **Coverage Analysis:** Review `quality/coverage/htmlcov/index.html` for test coverage gaps
2. **Quality Gates:** Check `quality/audits/quality_gates_report.md` for production readiness
3. **Cache Cleanup:** Delete `caches/` if disk space needed (regenerates automatically)

### For QA Engineers
1. **Audit Reports:** Add new audits to `quality/audits/`
2. **Test Summaries:** Update `quality/testing/` after major test runs
3. **Coverage Reports:** Regenerate coverage after significant code changes

### For CI/CD Systems
1. **Coverage Data:** Use `quality/coverage/coverage.xml` for CI integration
2. **Quality Gates:** Parse `quality/audits/` for automated quality checks
3. **Benchmarks:** Monitor `caches/benchmarks/` for performance regressions

## Maintenance

### Coverage Report Generation
```bash
# Generate full coverage report
python -m pytest tests/ --cov=src --cov-report=html --cov-report=xml

# Save to dev/quality/coverage/
mv htmlcov academic/dev/quality/coverage/
mv coverage.xml academic/dev/quality/coverage/
mv .coverage academic/dev/quality/coverage/
```

### Cache Cleanup
```bash
# Safe to delete - regenerates automatically
rm -rf academic/dev/caches/pytest/
rm -rf academic/dev/caches/benchmarks/

# Keep hypothesis database (preserves bug regression tests)
# Only delete if absolutely necessary
```

### Audit Management
```bash
# Add new audit report
cp new_audit.md academic/dev/quality/audits/

# Archive old audits (>1 year)
mkdir -p academic/dev/quality/audits/archive/2024/
mv academic/dev/quality/audits/*_2024_*.md academic/dev/quality/audits/archive/2024/
```

## Quality Standards

### Coverage Targets
(Per CLAUDE.md Section 11: Testing & Coverage Standards)

- **Overall:** ≥85%
- **Critical components:** ≥95%
- **Safety-critical:** 100%

**Critical Components:**
- Controllers (src/controllers/)
- Dynamics models (src/plant/)
- Simulation engine (src/core/)

**Safety-Critical:**
- Control primitives (src/utils/control/)
- Fault detection (src/hil/fault_detection.py)
- Real-time monitoring (src/utils/monitoring/)

### Quality Gates
(Per .ai_workspace/guides/phase4_status.md)

**Current Status:** 1/8 gates passing

**Gates:**
1. [OK] Thread Safety (11/11 tests passing)
2. [ERROR] Coverage Measurement (broken)
3. [ERROR] Unit Test Suite (needs fixing)
4. [ERROR] Integration Tests (incomplete)
5. [ERROR] Benchmark Tests (needs validation)
6. [ERROR] Documentation Build (warnings)
7. [ERROR] Code Quality (linting issues)
8. [ERROR] Production Checklist (incomplete)

### Production Readiness Score
**Current:** 23.9/100

**Status:** RESEARCH-READY [OK] | NOT production-ready [ERROR]

## File Types

- **HTML:** Coverage reports (interactive browsing)
- **XML:** Coverage data (CI/CD integration)
- **Markdown:** Audit reports, test summaries
- **SQLite:** Coverage database (.coverage)
- **JSON:** Benchmark data, hypothesis examples
- **Text:** Test failure logs, validation reports

## Status

**Last Updated:** December 29, 2025
**Reorganization:** Complete (moved from academic/ root to academic/dev/)
**Version:** v2.0 (Three-category structure: paper/, logs/, dev/)
**Size:** 46 MB (quality/ dominates at 99.7%)
**Health:** OK (coverage reports current, quality gates tracked)

## Related Directories

- **academic/paper/** - Research papers, thesis, documentation
- **academic/logs/** - Runtime and development logs
- **D:\Projects\main\.cache/** - Project root caches (deprecated, use academic/dev/caches/)

## Notes

- **Coverage Dominance:** quality/coverage/ accounts for 95.6% of dev/ size (44 MB)
- **Cache Cleanup:** All caches in caches/ can be safely deleted (auto-regenerate)
- **Quality Gates:** Production readiness tracked in quality/audits/
- **Research vs Production:** Project is RESEARCH-READY but NOT production-ready
- **Testing Standards:** Every .py file has a test_*.py peer (per CLAUDE.md Section 11)

## Troubleshooting

### Coverage Reports Not Generating
**Problem:** pytest-cov not creating htmlcov/ directory.

**Solutions:**
1. Install pytest-cov: `pip install pytest-cov`
2. Run with correct flags: `python -m pytest tests/ --cov=src --cov-report=html`
3. Check file permissions: `academic/dev/quality/coverage/` should be writable
4. Verify pytest configuration in `pytest.ini` or `pyproject.toml`

### Large dev/ Directory Size
**Problem:** dev/ exceeds 50 MB target.

**Solutions:**
1. Delete old coverage reports: `rm -rf academic/dev/quality/coverage/htmlcov_old/`
2. Clear caches: `rm -rf academic/dev/caches/pytest/ academic/dev/caches/benchmarks/`
3. Archive old audits: Move audits >1 year to `quality/audits/archive/`
4. Regenerate coverage (may reduce HTML size with newer pytest-cov)

### Missing Quality Gate Reports
**Problem:** Expected audit reports not found in quality/audits/.

**Solutions:**
1. Check if reports exist in old locations: `find D:\Projects\main -name "*audit*.md"`
2. Review git history: `git log --all --full-history -- academic/dev/quality/audits/`
3. Check if reports are in .artifacts/ or academic/archive/
4. Generate new reports using quality assessment scripts

## Automation

### Nightly Coverage Report
```bash
#!/bin/bash
# Run nightly and save to dev/quality/coverage/

cd D:\Projects\main
python -m pytest tests/ --cov=src --cov-report=html --cov-report=xml
mv htmlcov academic/dev/quality/coverage/
mv coverage.xml academic/dev/quality/coverage/
echo "Coverage report generated: $(date)" >> academic/dev/quality/coverage/last_update.txt
```

### CI/CD Integration
```yaml
# Example GitHub Actions workflow
- name: Generate Coverage Report
  run: |
    python -m pytest tests/ --cov=src --cov-report=xml
    mv coverage.xml academic/dev/quality/coverage/

- name: Upload Coverage
  uses: codecov/codecov-action@v3
  with:
    file: academic/dev/quality/coverage/coverage.xml
```

## See Also

- `D:\Projects\main\CLAUDE.md` - Section 11 (Testing & Coverage Standards)
- `.ai_workspace/guides/phase4_status.md` - Production readiness status
- `.ai_workspace/config/testing_standards.md` - Complete testing standards
- `docs/development/quality_gates.md` - Quality gates documentation
- `scripts/testing/run_coverage.sh` - Coverage generation script
